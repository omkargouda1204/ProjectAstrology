<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>{% TITLE %}</title>
    <meta name="description" content="{% DESCRIPTION %}">
    <meta name="keywords" content="Astrology services, Best astrologer, Famous astrologer, Online astrology consultation, Horoscope reading, Kundali reading, Janam kundali, Birth chart analysis, Vedic astrology, Indian astrologer, Marriage astrology, Love problem solution astrologer, Relationship astrology, Kundali matching, Love marriage specialist, Astrologer near me, Career astrology, Business astrology, Financial astrology, Health astrology, Family astrology, Astrology predictions, Online kundali, Numerology services, Palmistry reading, Face reading, Tarot reading, Muhurta astrology, Vaastu consultant, Gemstone recommendation, Black magic removal, Negative energy removal, Pooja & ritual services, Navagraha dosha, Rahu Ketu dosha, Manglik dosha, Shani dosha remedies, Graha shanti pooja, Astrology expert in India, Best astrologer in Mysore, Genuine astrologer Mysuru, Astrologer in Mysore, Astrologer near Jayanagar Mysore, Best Jyotish in Mysuru, Genuine astrologer Mysore, Love marriage problem solution in Mysore, Business astrology service Mysore, Horoscope reader in Mysuru, Kundali specialist in Mysore, Sri Mahakali Bhairavi Astrology Center, Om Sri Mahakali Bhairavi Jyotishya Shastram, Venkatanatha Kulakarni astrologer, Pandit Sudarshan Guruji astrology, Expert astrologer Sudarshan Guruji, Mysore astrology expert, Traditional Vedic astrologer Mysuru, Sri Mahakali Bhairavi astrologer, Solutions for love problems, Solutions for marriage delay, Solutions for divorce problems, Solutions for family disputes, Solutions for financial loss, Solutions for business failure, Solutions for education problems, Solutions for health issues, Remedies for planetary doshas, Astrology remedies for life problems, Astrology consultation online, Phone astrology consultation, WhatsApp astrology reading, Personalized horoscope, Kundali prediction, Graha dosha nivarana, Pooja & havan services, Navagraha pooja, Black magic protection, Evil eye removal, Vashikaran consultation, Marriage compatibility check, Mahakali pooja, Bhairavi pooja, Devi blessings astrology, Hindu astrology predictions, Spiritual healing astrologer, Divine astrology guidance, Best astrologer in Mysuru, Horoscope reading Mysore, Kundali matching Karnataka, Pooja puja services, Vedic astrology consultation, Remedies parihara, Jyotish services, Nadi astrology, Marriage compatibility, Birth chart analysis, Vastu consultation, Numerology services, Gemstone recommendation, Graha shanti pooja, Nakshatra analysis, Dasha predictions, Rashi phal, Best jyotishi Mysuru, Famous astrologer Karnataka, Online astrology consultation, Telephone astrology, Mysuru jyotish kendra, ಮೈಸೂರು ಜ್ಯೋತಿಷ್ಯರು, ಜ್ಯೋತಿಷ್ಯ ಶಾಸ್ತ್ರ, ಕುಂಡಲಿ ಗುರು, ಪರಿಹಾರ ಪೂಜೆ, ವೇದಿಕ್ ಜ್ಯೋತಿಷ್ಯ, ಹೊರೊಸ್ಕೋಪ್ ರೀಡಿಂಗ್, ನವಗ್ರಹ ಶಾಂತಿ ಪೂಜೆ, ವಾಸ್ತು ಸಲಹೆ, Mysore astrologer, Karnataka astrology center, South India astrologer, Temple pooja services">
    <meta name="author" content="Venkatanatha Kulakarni">
    <meta name="language" content="English, Kannada">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="https://astrology-center.com{% CANONICAL %}">
    
    <!-- Geo Location -->
    <meta name="geo.region" content="IN-KA">
    <meta name="geo.placename" content="Mysuru, Karnataka, India">
    <meta name="geo.position" content="12.2958;76.6394">
    <meta name="ICBM" content="12.2958, 76.6394">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="{% OG_TITLE %}">
    <meta property="og:description" content="{% OG_DESCRIPTION %}">
    <meta property="og:image" content="https://astrology-center.com/static/assets/images/logo.png">
    <meta property="og:url" content="https://astrology-center.com{% CANONICAL %}">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Om Sri Mahakali Bhairavi Astrology Center">
    <meta property="og:locale" content="en_IN">
    <meta property="og:locale:alternate" content="kn_IN">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% TWITTER_TITLE %}">
    <meta name="twitter:description" content="{% TWITTER_DESCRIPTION %}">
    <meta name="twitter:image" content="https://astrology-center.com/static/assets/images/logo.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/assets/images/favicon.ico">
    <link rel="apple-touch-icon" href="/static/assets/images/apple-touch-icon.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.15.4/css/all.css">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#7C3AED',
                        secondary: '#FFD700',
                        accent: '#EC4899'
                    }
                }
            }
        }
    </script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="/static/styles/main.css">
    
    <!-- Base Critical Styles -->
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            background: #f9fafb;
            overflow-x: hidden;
        }
        img { max-width: 100%; height: auto; display: block; }
        
        /* Logo styles */
        .logo-container img, .navbar-logo {
            border-radius: 0 !important;
            object-fit: contain !important;
            border: none !important;
            transition: all 0.3s ease !important;
        }
        
        .logo-container img:hover, .navbar-logo:hover {
            transform: scale(1.05) !important;
        }
        
        /* Responsive Logo Sizes */
        @media (max-width: 480px) {
            .navbar-logo, #navbar-logo { max-width: 120px !important; max-height: 80px !important; height: auto !important; }
            #website-name { font-size: 0.875rem !important; line-height: 1.2 !important; }
        }
        @media (min-width: 481px) and (max-width: 640px) {
            .navbar-logo, #navbar-logo { max-width: 150px !important; max-height: 100px !important; height: auto !important; }
            #website-name { font-size: 1rem !important; }
        }
        @media (min-width: 641px) and (max-width: 768px) {
            .navbar-logo, #navbar-logo { max-width: 180px !important; max-height: 120px !important; height: auto !important; }
            #website-name { font-size: 1.25rem !important; }
        }
        @media (min-width: 769px) and (max-width: 1024px) {
            .navbar-logo, #navbar-logo { max-width: 220px !important; max-height: 140px !important; height: auto !important; }
            #website-name { font-size: 1.5rem !important; }
        }
        @media (min-width: 1025px) {
            .navbar-logo, #navbar-logo { max-width: 280px !important; max-height: 180px !important; height: auto !important; }
            #website-name { font-size: 2rem !important; }
        }
    </style>
    
    <!-- JSON-LD Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "ProfessionalService",
        "name": "Om Sri Mahakali Bhairavi Astrology Center",
        "alternateName": "ಓಂ ಶ್ರೀ ಮಹಾಕಾಳಿ ಭೈರವಿ ಜ್ಯೋತಿಷ್ಯ ಶಾಸ್ತ್ರಂ",
        "image": "https://astrology-center.com/static/assets/images/logo.png",
        "@id": "https://astrology-center.com",
        "url": "https://astrology-center.com",
        "telephone": "+919591909552",
        "priceRange": "₹₹",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "Mysuru",
            "addressLocality": "Mysuru",
            "addressRegion": "Karnataka",
            "postalCode": "570001",
            "addressCountry": "IN"
        },
        "geo": {
            "@type": "GeoCoordinates",
            "latitude": 12.2958,
            "longitude": 76.6394
        },
        "openingHoursSpecification": {
            "@type": "OpeningHoursSpecification",
            "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
            "opens": "09:00",
            "closes": "18:00"
        },
        "sameAs": [
            "https://www.facebook.com/cosmicastrologyofficial",
            "https://www.instagram.com/cosmicastrologyofficial",
            "https://twitter.com/cosmicastrologyofficial"
        ]
    }
    </script>
    
    {% ADDITIONAL_HEAD %}
</head>
<body class="bg-gray-50">
   <!-- Clean Header Section (Yenepoya Style) -->
    <header class="bg-white border-b-2 border-gray-200 shadow-md">
        <div class="container mx-auto px-4 py-5 md:py-6">
            <div class="flex items-center justify-between md:justify-start md:space-x-8">
                <!-- Logo - Direct Display (No Round Shape, No Fallback Icon) -->
                <div class="flex-shrink-0 logo-container">
                    <img id="navbar-logo" src="" alt="Logo" class="h-20 w-auto sm:h-24 md:h-28 lg:h-32 xl:h-36 object-contain transition-transform duration-300 hover:scale-105" style="max-width: 250px;">
                </div>
                
                <!-- Website Name & Tagline - Fully Responsive -->
                <div class="flex-1 min-w-0 px-2 sm:px-4 website-name-container">
                    <h1 id="website-name" class="text-sm sm:text-lg md:text-xl lg:text-2xl xl:text-3xl font-bold text-gray-800 tracking-wide leading-tight break-words animate-fade-in">
                        Om Sri Mahakali Bhairavi Jyotishya Shastram
                    </h1>
                    <p id="website-subtitle" class="text-xs sm:text-sm md:text-base lg:text-lg text-gray-600 mt-1 md:mt-2 font-medium break-words animate-fade-in-delay">
                        Specialized Astrology & Pooja Services
                    </p>
                </div>
                
                <!-- Mobile Menu Toggle -->
                <button id="mobile-menu-btn" class="lg:hidden p-3 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors">
                    <i class="fas fa-bars text-3xl"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Navigation Bar (Blue/Purple Theme) - Increased Height -->
    <nav id="main-navbar" class="bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 text-white sticky top-0 z-50 shadow-2xl">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16 md:h-20 lg:h-24">
                
                <!-- Desktop Menu -->
                <div id="desktop-menu" class="hidden lg:flex items-center space-x-4 flex-1">
                    <!-- Menu items will be dynamically loaded -->
                </div>
                
                <!-- Language Selector -->
                <div class="hidden lg:block relative">
                    <button id="lang-dropdown-btn" class="flex items-center space-x-2 px-4 py-3 rounded-lg hover:bg-white hover:bg-opacity-20 transition-all duration-300 text-base md:text-lg font-medium">
                        <i class="fas fa-globe text-xl"></i>
                        <span>EN</span>
                        <i class="fas fa-chevron-down text-sm"></i>
                    </button>
                    <div id="lang-dropdown" class="hidden absolute right-4 mt-2 w-48 bg-white rounded-lg shadow-xl border overflow-hidden">
                        <div id="google_translate_element" class="p-2"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Mobile Navigation Menu -->
        <div id="mobile-menu" class="lg:hidden hidden bg-purple-800">
            <div class="container mx-auto px-4 py-3">
                <!-- Website name in mobile menu -->
                <div class="border-b border-purple-600 pb-3 mb-3">
                    <h2 class="text-lg font-bold">Sri Mahakali Bhairavi Astrology</h2>
                    <p class="text-xs text-purple-200">Specialized Astrology & Pooja Services</p>
                </div>
                
                <!-- Mobile menu items will be dynamically loaded -->
                <div id="mobile-menu-items" class="space-y-1"></div>
                
                <!-- Language in mobile -->
                <div class="mt-3 pt-3 border-t border-purple-600">
                    <button onclick="document.getElementById('lang-dropdown').classList.toggle('hidden')" class="w-full text-left px-3 py-2 rounded hover:bg-purple-700">
                        <i class="fas fa-globe mr-2"></i>Language: EN
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-24">
        {% CONTENT %}
    </main>
    
    <!-- Footer -->
    <footer class="bg-black text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-2xl font-bold mb-4 font-serif">Om Sri Mahakali Bhairavi Astrology Center</h3>
                    <p class="text-sm text-gray-300 mb-3">ಓಂ ಶ್ರೀ ಮಹಾಕಾಳಿ ಭೈರವಿ ಜ್ಯೋತಿಷ್ಯ ಶಾಸ್ತ್ರಂ</p>
                    <p class="text-gray-300">Your trusted guide to cosmic wisdom and spiritual enlightenment.</p>
                </div>
                <div>
                    <h4 class="text-xl font-bold mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="/" class="hover:text-yellow-300 transition">Home</a></li>
                        <li><a href="/#services" class="hover:text-yellow-300 transition">Services</a></li>
                        <li><a href="/contact" class="hover:text-yellow-300 transition">Contact</a></li>
                        <li><a href="/#reviews" class="hover:text-yellow-300 transition">Reviews</a></li>
                        <li><a href="/privacy" class="hover:text-yellow-300 transition">Privacy Policy</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-xl font-bold mb-4">Contact Us</h4>
                    <p class="text-gray-300 mb-2"><i class="fas fa-phone mr-2"></i><span id="footer-phone">Loading...</span></p>
                    <p class="text-gray-300 mb-2"><i class="fas fa-envelope mr-2"></i><span id="footer-email">Loading...</span></p>
                    <p class="text-gray-300 mb-4"><i class="fas fa-map-marker-alt mr-2"></i><span id="footer-address">Mysuru, Karnataka</span></p>
                    <div class="flex space-x-4" id="footer-social">
                        <!-- Social links loaded dynamically -->
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; <span id="current-year"></span> Om Sri Mahakali Bhairavi Astrology Center. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <!-- Base Scripts - Navbar, Footer, Mobile Menu -->
    <script>
        // Mobile Menu Toggle
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            
            if (mobileMenuBtn && mobileMenu) {
                mobileMenuBtn.addEventListener('click', function() {
                    mobileMenu.classList.toggle('hidden');
                    const icon = this.querySelector('i');
                    if (mobileMenu.classList.contains('hidden')) {
                        icon.classList.remove('fa-times');
                        icon.classList.add('fa-bars');
                    } else {
                        icon.classList.remove('fa-bars');
                        icon.classList.add('fa-times');
                    }
                });
            }
        });
        
        // Set current year
        document.getElementById('current-year').textContent = new Date().getFullYear();
        
        // Load navbar settings - Complete implementation
        async function loadNavbar() {
            try {
                const settingsResponse = await fetch('/api/navbar-settings');
                if (settingsResponse.ok) {
                    const settings = await settingsResponse.json();
                    
                    // Load logo with responsive sizing
                    if (settings.logo_url) {
                        const logoEl = document.getElementById('navbar-logo');
                        if (logoEl) {
                            logoEl.src = settings.logo_url;
                            logoEl.className = 'h-20 w-auto sm:h-24 md:h-28 lg:h-32 xl:h-36 object-contain transition-transform duration-300 hover:scale-105';
                            logoEl.style.display = 'block';
                            logoEl.style.maxWidth = '250px';
                            logoEl.style.background = 'transparent';
                        }
                    }
                    
                    // Update website name
                    if (settings.name) {
                        const nameEl = document.getElementById('website-name');
                        if (nameEl) {
                            nameEl.textContent = settings.name;
                            nameEl.classList.add('animate-fade-in');
                        }
                    }
                    
                    // Update subtitle
                    if (settings.subtitle1 || settings.subtitle) {
                        const subtitleEl = document.getElementById('website-subtitle');
                        if (subtitleEl) {
                            subtitleEl.textContent = settings.subtitle1 || settings.subtitle;
                            subtitleEl.classList.add('animate-fade-in-delay');
                        }
                    }
                    
                    // Load menu items
                    try {
                        const menuResponse = await fetch('/api/menu-items');
                        if (menuResponse.ok) {
                            const menuItems = await menuResponse.json();
                            if (Array.isArray(menuItems) && menuItems.length > 0) {
                                renderMenuItems(menuItems);
                            } else {
                                renderDefaultMenuItems();
                            }
                        } else {
                            renderDefaultMenuItems();
                        }
                    } catch (error) {
                        console.warn('Failed to load menu from database, using default menu');
                        renderDefaultMenuItems();
                    }
                } else {
                    renderDefaultMenuItems();
                }
            } catch (error) {
                console.error('Error loading navbar:', error);
                renderDefaultMenuItems();
            }
        }
        
        function renderDefaultMenuItems() {
            const defaultItems = [
                { title: 'Home', url: '/', target: '_self' },
                { title: 'Services', url: '/#services', target: '_self' },
                { title: 'Gallery', url: '/#gallery', target: '_self' },
                { title: 'About', url: '/#about', target: '_self' },
                { title: 'Contact', url: '/contact', target: '_self' }
            ];
            renderMenuItems(defaultItems);
        }
        
        function renderMenuItems(items) {
            const desktopMenu = document.getElementById('desktop-menu');
            const mobileMenuItems = document.getElementById('mobile-menu-items');
            
            if (desktopMenu) {
                desktopMenu.innerHTML = items.map(item => 
                    `<a href="${item.url}" target="${item.target || '_self'}" class="px-4 py-2 rounded-lg hover:bg-white hover:bg-opacity-20 transition-all duration-300 text-base md:text-lg font-medium">${item.title}</a>`
                ).join('');
            }
            
            if (mobileMenuItems) {
                mobileMenuItems.innerHTML = items.map(item => 
                    `<a href="${item.url}" target="${item.target || '_self'}" class="block px-3 py-2 rounded hover:bg-purple-700 mobile-nav-link">${item.title}</a>`
                ).join('');
            }
        }
        
        // Load contact info for footer
        async function loadContactInfo() {
            try {
                const response = await fetch('/api/business-info');
                if (!response.ok) throw new Error('Failed to load contact info');
                const data = await response.json();
                
                if (data.phone) {
                    const phoneEl = document.getElementById('footer-phone');
                    if (phoneEl) phoneEl.textContent = data.phone;
                }
                if (data.email) {
                    const emailEl = document.getElementById('footer-email');
                    if (emailEl) emailEl.textContent = data.email;
                }
                if (data.address) {
                    const addressEl = document.getElementById('footer-address');
                    if (addressEl) addressEl.textContent = data.address;
                }
                
                if (data.social_media) {
                    const socialHTML = Object.entries(data.social_media)
                        .filter(([key, value]) => value)
                        .map(([key, value]) => {
                            const icons = {
                                facebook: 'fab fa-facebook-f',
                                instagram: 'fab fa-instagram',
                                twitter: 'fab fa-twitter',
                                youtube: 'fab fa-youtube',
                                linkedin: 'fab fa-linkedin-in'
                            };
                            return `<a href="${value}" target="_blank" rel="noopener noreferrer" class="bg-purple-600 hover:bg-purple-700 p-3 rounded-full transition"><i class="${icons[key]}"></i></a>`;
                        }).join('');
                    const socialEl = document.getElementById('footer-social');
                    if (socialEl) socialEl.innerHTML = socialHTML;
                }
            } catch (error) {
                console.error('Error loading contact info:', error);
            }
        }
        
        // Initialize on page load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                loadNavbar();
                loadContactInfo();
            });
        } else {
            loadNavbar();
            loadContactInfo();
        }
    </script>
    
    {% ADDITIONAL_SCRIPTS %}
</body>
</html>
