<!DOCTYPE html>
<html lang="en">
<head>
            <script>
            // Ensure globalChatbotConfig is defined to prevent ReferenceError
            window.globalChatbotConfig = window.globalChatbotConfig || {
                welcome_message: ''
            };
            
            // Clear session storage cache to force fresh data load from database
            // Uncomment below line to force fresh load, then comment it back
            sessionStorage.clear();
            console.log('üîÑ Session storage cleared - loading fresh data from database');
            
            // Clear old cached scripts
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistrations().then(function(registrations) {
                    for(let registration of registrations) {
                        registration.unregister();
                    }
                });
            }
            </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <!-- Force reload: v1.2.0 -->
    <title>Sri Mahakali Bhairavi Astrology Center | Best Astrologer in Mysuru | ‡≤∂‡≥ç‡≤∞‡≥Ä ‡≤Æ‡≤π‡≤æ‡≤ï‡≤æ‡≤≥‡≤ø ‡≤≠‡≥à‡≤∞‡≤µ‡≤ø ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤ï‡≥á‡≤Ç‡≤¶‡≥ç‡≤∞</title>
    <meta name="description" content="Sri Mahakali Bhairavi Astrology Center - Best astrologer in Mysuru offering expert Vedic astrology services, horoscope reading, kundali matching, kundli reading, birth chart analysis, marriage astrology, career prediction, pooja services, gemstone consultation, vastu consultation, and astrology remedies. Online and offline consultations available. ‡≤∂‡≥ç‡≤∞‡≥Ä ‡≤Æ‡≤π‡≤æ‡≤ï‡≤æ‡≤≥‡≤ø ‡≤≠‡≥à‡≤∞‡≤µ‡≤ø ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤ï‡≥á‡≤Ç‡≤¶‡≥ç‡≤∞ - ‡≤Æ‡≥à‡≤∏‡≥Ç‡≤∞‡≤ø‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤Ö‡≤§‡≥ç‡≤Ø‡≥Å‡≤§‡≥ç‡≤§‡≤Æ ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤∏‡≥á‡≤µ‡≥Ü‡≤ó‡≤≥‡≥Å.">
    <meta name="og:title" content="Best Astrologer in Mysuru | Vedic Astrology Services | Sri Mahakali Bhairavi">
    <meta name="og:description" content="Expert Vedic astrology consultation, horoscope reading, kundali matching, pooja services in Mysuru. Best astrologer for marriage problems, career guidance, and astrology remedies.">
    <meta name="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Best Astrologer in Mysuru | Sri Mahakali Bhairavi Astrology Center">
    <meta name="twitter:description" content="Expert Vedic astrology services, horoscope reading, kundali matching, and pooja services in Mysuru, Karnataka.">
    <meta name="keywords" content="Astrology, Horoscope, Astrology predictions, Vedic astrology, Indian astrology, Online astrology, Astrology consultation, Astrology services, Kundli, Kundali, Birth chart, Zodiac signs, Daily horoscope, Astrology remedies, Astrology expert, Astrology guidance, Kundli reading, Free kundli, Kundali matching, Horoscope matching for marriage, Birth chart analysis, Janam kundli analysis, Marriage astrology, Love horoscope, Love compatibility, Marriage prediction, Marriage problem solution astrology, Career astrology, Career prediction astrology, Financial astrology, Business astrology, Business horoscope, Job prediction astrology, Health astrology, Planetary dosha remedies, Astrology solutions, Gemstone astrology, Gemstone recommendation, Which gemstone should I wear, Astrology gemstone consultation, Vedic gemstone remedies, Lucky gemstone as per horoscope, Mangal dosha, Rahu Ketu dosha, Shani dosha, Saturn effects in astrology, Planetary transit astrology, Retrograde planets astrology, Best astrologer in Mysuru, Astrologer in Mysuru, Astrology consultation in Mysuru, Vedic astrologer near me, Online astrologer in India, Famous astrologer in Mysuru, Best astrologer for marriage problems, Accurate astrology predictions online, Online kundli reading by expert astrologer, Astrology consultation for business problems, Marriage delay solution astrology, Career confusion astrology guidance, Astrology remedies for financial problems, What is astrology, How astrology works, Is astrology accurate, Can astrology predict future, How kundli matching works, Which planet causes marriage delay, Best astrologer Mysuru, Sri Mahakali Bhairavi Astrology, Venkatanatha Kulakarni astrologer, Om Sri Mahakali Bhairavi Jyotishya Shastram, Horoscope reading Mysore, Pooja puja services, Remedies parihara, Jyotish services, Nadi astrology, Marriage compatibility, Vastu consultation, Numerology services, Graha shanti pooja, Nakshatra analysis, Dasha predictions, Rashi phal, Best jyotishi Mysuru, Famous astrologer Karnataka, Telephone astrology, Mysuru jyotish kendra, ‡≤Æ‡≥à‡≤∏‡≥Ç‡≤∞‡≥Å ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø‡≤∞‡≥Å, ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤∂‡≤æ‡≤∏‡≥ç‡≤§‡≥ç‡≤∞, ‡≤ï‡≥Å‡≤Ç‡≤°‡≤≤‡≤ø ‡≤ó‡≥Å‡≤∞‡≥Å, ‡≤™‡≤∞‡≤ø‡≤π‡≤æ‡≤∞ ‡≤™‡≥Ç‡≤ú‡≥Ü, ‡≤µ‡≥á‡≤¶‡≤ø‡≤ï‡≥ç ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø, ‡≤π‡≥ä‡≤∞‡≥ä‡≤∏‡≥ç‡≤ï‡≥ã‡≤™‡≥ç ‡≤∞‡≥Ä‡≤°‡≤ø‡≤Ç‡≤ó‡≥ç, ‡≤®‡≤µ‡≤ó‡≥ç‡≤∞‡≤π ‡≤∂‡≤æ‡≤Ç‡≤§‡≤ø ‡≤™‡≥Ç‡≤ú‡≥Ü, ‡≤µ‡≤æ‡≤∏‡≥ç‡≤§‡≥Å ‡≤∏‡≤≤‡≤π‡≥Ü, ‡≤Æ‡≥à‡≤∏‡≥Ç‡≤∞‡≥Å ‡≤Ö‡≤§‡≥ç‡≤Ø‡≥Å‡≤§‡≥ç‡≤§‡≤Æ ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø, ‡≤ï‡≤∞‡≥ç‡≤®‡≤æ‡≤ü‡≤ï ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤ï‡≥á‡≤Ç‡≤¶‡≥ç‡≤∞, ‡≤Ü‡≤®‡≥ç‡≤≤‡≥à‡≤®‡≥ç ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤∏‡≤≤‡≤π‡≥Ü, ‡≤ú‡≤®‡≥ç‡≤Æ ‡≤™‡≤§‡≥ç‡≤∞‡≤ø‡≤ï‡≥Ü ‡≤µ‡≤ø‡≤∂‡≥ç‡≤≤‡≥á‡≤∑‡≤£‡≥Ü, ‡≤Æ‡≤¶‡≥Å‡≤µ‡≥Ü ‡≤π‡≥ä‡≤Ç‡≤¶‡≤æ‡≤£‡≤ø‡≤ï‡≥Ü, ‡≤ó‡≥ç‡≤∞‡≤π ‡≤∂‡≤æ‡≤Ç‡≤§‡≤ø ‡≤™‡≥Ç‡≤ú‡≥Ü, ‡≤∞‡≤æ‡≤∂‡≤ø ‡≤´‡≤≤, ‡≤®‡≤ï‡≥ç‡≤∑‡≤§‡≥ç‡≤∞ ‡≤µ‡≤ø‡≤∂‡≥ç‡≤≤‡≥á‡≤∑‡≤£‡≥Ü, ‡≤¶‡≤∂‡≤æ ‡≤≠‡≤µ‡≤ø‡≤∑‡≥ç‡≤Ø, Mysore astrologer, Karnataka astrology center, South India astrologer, Temple pooja services">
    <meta name="author" content="Venkatanatha Kulakarni">
    <meta name="language" content="English, Kannada, Hindi">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="https://astrology-center.com/">
     <meta name="description" content="Sri Mahakali Bhairavi Astrology Center - Best astrologer in Mysuru offering expert Vedic astrology services, horoscope reading, kundali matching, kundli reading, birth chart analysis, marriage astrology, career prediction, pooja services, gemstone consultation, vastu consultation, and astrology remedies. Online and offline consultations available. ‡≤∂‡≥ç‡≤∞‡≥Ä ‡≤Æ‡≤π‡≤æ‡≤ï‡≤æ‡≤≥‡≤ø ‡≤≠‡≥à‡≤∞‡≤µ‡≤ø ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤ï‡≥á‡≤Ç‡≤¶‡≥ç‡≤∞ - ‡≤Æ‡≥à‡≤∏‡≥Ç‡≤∞‡≤ø‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤Ö‡≤§‡≥ç‡≤Ø‡≥Å‡≤§‡≥ç‡≤§‡≤Æ ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤∏‡≥á‡≤µ‡≥Ü‡≤ó‡≤≥‡≥Å.">
    <meta name="og:title" content="Best Astrologer in Mysuru | Vedic Astrology Services | Sri Mahakali Bhairavi">
    <meta name="og:description" content="Expert Vedic astrology consultation, horoscope reading, kundali matching, pooja services in Mysuru. Best astrologer for marriage problems, career guidance, and astrology remedies.">
    <meta name="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Best Astrologer in Mysuru | Sri Mahakali Bhairavi Astrology Center">
    <meta name="twitter:description" content="Expert Vedic astrology services, horoscope reading, kundali matching, and pooja services in Mysuru, Karnataka.">
    <meta name="keywords" content="Astrology, Horoscope, Astrology predictions, Vedic astrology, Indian astrology, Online astrology, Astrology consultation, Astrology services, Kundli, Kundali, Birth chart, Zodiac signs, Daily horoscope, Astrology remedies, Astrology expert, Astrology guidance, Kundli reading, Free kundli, Kundali matching, Horoscope matching for marriage, Birth chart analysis, Janam kundli analysis, Marriage astrology, Love horoscope, Love compatibility, Marriage prediction, Marriage problem solution astrology, Career astrology, Career prediction astrology, Financial astrology, Business astrology, Business horoscope, Job prediction astrology, Health astrology, Planetary dosha remedies, Astrology solutions, Gemstone astrology, Gemstone recommendation, Which gemstone should I wear, Astrology gemstone consultation, Vedic gemstone remedies, Lucky gemstone as per horoscope, Mangal dosha, Rahu Ketu dosha, Shani dosha, Saturn effects in astrology, Planetary transit astrology, Retrograde planets astrology, Best astrologer in Mysuru, Astrologer in Mysuru, Astrology consultation in Mysuru, Vedic astrologer near me, Online astrologer in India, Famous astrologer in Mysuru, Best astrologer for marriage problems, Accurate astrology predictions online, Online kundli reading by expert astrologer, Astrology consultation for business problems, Marriage delay solution astrology, Career confusion astrology guidance, Astrology remedies for financial problems, What is astrology, How astrology works, Is astrology accurate, Can astrology predict future, How kundli matching works, Which planet causes marriage delay, Best astrologer Mysuru, Sri Mahakali Bhairavi Astrology, Venkatanatha Kulakarni astrologer, Om Sri Mahakali Bhairavi Jyotishya Shastram, Horoscope reading Mysore, Pooja puja services, Remedies parihara, Jyotish services, Nadi astrology, Marriage compatibility, Vastu consultation, Numerology services, Graha shanti pooja, Nakshatra analysis, Dasha predictions, Rashi phal, Best jyotishi Mysuru, Famous astrologer Karnataka, Telephone astrology, Mysuru jyotish kendra, ‡≤Æ‡≥à‡≤∏‡≥Ç‡≤∞‡≥Å ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø‡≤∞‡≥Å, ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤∂‡≤æ‡≤∏‡≥ç‡≤§‡≥ç‡≤∞, ‡≤ï‡≥Å‡≤Ç‡≤°‡≤≤‡≤ø ‡≤ó‡≥Å‡≤∞‡≥Å, ‡≤™‡≤∞‡≤ø‡≤π‡≤æ‡≤∞ ‡≤™‡≥Ç‡≤ú‡≥Ü, ‡≤µ‡≥á‡≤¶‡≤ø‡≤ï‡≥ç ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø, ‡≤π‡≥ä‡≤∞‡≥ä‡≤∏‡≥ç‡≤ï‡≥ã‡≤™‡≥ç ‡≤∞‡≥Ä‡≤°‡≤ø‡≤Ç‡≤ó‡≥ç, ‡≤®‡≤µ‡≤ó‡≥ç‡≤∞‡≤π ‡≤∂‡≤æ‡≤Ç‡≤§‡≤ø ‡≤™‡≥Ç‡≤ú‡≥Ü, ‡≤µ‡≤æ‡≤∏‡≥ç‡≤§‡≥Å ‡≤∏‡≤≤‡≤π‡≥Ü, ‡≤Æ‡≥à‡≤∏‡≥Ç‡≤∞‡≥Å ‡≤Ö‡≤§‡≥ç‡≤Ø‡≥Å‡≤§‡≥ç‡≤§‡≤Æ ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø, ‡≤ï‡≤∞‡≥ç‡≤®‡≤æ‡≤ü‡≤ï ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤ï‡≥á‡≤Ç‡≤¶‡≥ç‡≤∞, ‡≤Ü‡≤®‡≥ç‡≤≤‡≥à‡≤®‡≥ç ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤∏‡≤≤‡≤π‡≥Ü, ‡≤ú‡≤®‡≥ç‡≤Æ ‡≤™‡≤§‡≥ç‡≤∞‡≤ø‡≤ï‡≥Ü ‡≤µ‡≤ø‡≤∂‡≥ç‡≤≤‡≥á‡≤∑‡≤£‡≥Ü, ‡≤Æ‡≤¶‡≥Å‡≤µ‡≥Ü ‡≤π‡≥ä‡≤Ç‡≤¶‡≤æ‡≤£‡≤ø‡≤ï‡≥Ü, ‡≤ó‡≥ç‡≤∞‡≤π ‡≤∂‡≤æ‡≤Ç‡≤§‡≤ø ‡≤™‡≥Ç‡≤ú‡≥Ü, ‡≤∞‡≤æ‡≤∂‡≤ø ‡≤´‡≤≤, ‡≤®‡≤ï‡≥ç‡≤∑‡≤§‡≥ç‡≤∞ ‡≤µ‡≤ø‡≤∂‡≥ç‡≤≤‡≥á‡≤∑‡≤£‡≥Ü, ‡≤¶‡≤∂‡≤æ ‡≤≠‡≤µ‡≤ø‡≤∑‡≥ç‡≤Ø, Mysore astrologer, Karnataka astrology center, South India astrologer, Temple pooja services">
    <meta name="author" content="Venkatanatha Kulakarni">
    <meta name="language" content="English, Kannada, Hindi">
    
    <!-- Fonts - Load First for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.15.4/css/all.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="/static/styles/main.css">
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>
    <script>
        // Suppress Tailwind CDN warning in production
        if (typeof tailwind !== 'undefined') {
            tailwind.config = { corePlugins: { preflight: true } };
        }
    </script>
    
    <!-- Critical Base Styles - Clean, No Animations -->
    <style>
        /* ...existing code... */
        
        /* Line clamp utility for descriptions */
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .line-clamp-4 {
            display: -webkit-box;
            -webkit-line-clamp: 4;
            line-clamp: 4;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* Reviews Section - Modern Clean Design */
        #reviews {
            overflow: hidden !important;
        }
        #reviews-track-wrapper {
            overflow: hidden !important;
        }
        #reviews-carousel {
            display: flex !important;
            flex-direction: row !important;
            flex-wrap: nowrap !important;
            overflow: visible !important;
            will-change: transform;
        }
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        /* Mobile responsive */
        @media (max-width: 768px) {
            .service-card {
                padding: 1rem !important;
                width: 200px !important;
                min-width: 200px !important;
                max-width: 200px !important;
                flex-shrink: 0 !important;
                flex-grow: 0 !important;
            
            .service-card h3 {
                height: 150px !important;
                line-height: 1.3 !important;
            }
            
            #astrological-services-grid {
                gap: 0.75rem !important;
                padding: 0 0.5rem;
            }
        }
        
        /* Tablet responsive design */
        @media (min-width: 768px) and (max-width: 1023px) {
            #astrological-services-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 1.5rem;
            }
            
            .service-card h3 {
                font-size: 1.125rem !important;
            }
        }
        
        /* Desktop responsive design */
        @media (min-width: 1024px) {
            .service-card {
                padding: 2rem !important;
            }
            
            .service-card:hover {
                transform: translateY(-20px) scale(1.1);
            }
            
            #astrological-services-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 2rem;
                max-width: 1400px;
            }
        }
        
        /* Large desktop */
        @media (min-width: 1440px) {
            #astrological-services-grid {
                grid-template-columns: repeat(5, 1fr);
                gap: 2.5rem;
            }
        }
        
        /* Extra large screens */
        @media (min-width: 1920px) {
            #astrological-services-grid {
                grid-template-columns: repeat(6, 1fr);
                gap: 3rem;
            }
        }
        
        /* Logo styles - Direct display (no round shape) - Responsive */
        .logo-container img, .navbar-logo {
            border-radius: 0 !important;
            object-fit: contain !important;
            border: none !important;
            background: transparent !important;
            transition: transform 0.3s ease !important;
        }
        
        .logo-container img:hover, .navbar-logo:hover {
            transform: scale(1.05) !important;
        }
        
        /* Responsive Logo Sizes */
        @media (max-width: 480px) {
            .logo-container img, #navbar-logo {
                max-width: 120px !important;
                max-height: 80px !important;
                height: auto !important;
            }
            #website-name {
                font-size: 0.875rem !important;
                line-height: 1.2 !important;
            }
        }
        @media (min-width: 481px) and (max-width: 640px) {
            .logo-container img, #navbar-logo {
                max-width: 150px !important;
                max-height: 100px !important;
                height: auto !important;
            }
            #website-name {
                font-size: 1rem !important;
            }
        }
        @media (min-width: 641px) and (max-width: 768px) {
            .logo-container img, #navbar-logo {
                max-width: 180px !important;
                max-height: 120px !important;
                height: auto !important;
            }
            #website-name {
                font-size: 1.25rem !important;
            }
        }
        @media (min-width: 769px) and (max-width: 1024px) {
            .logo-container img, #navbar-logo {
                max-width: 220px !important;
                max-height: 140px !important;
                max-width: 240px !important;
                flex-shrink: 0 !important;
                flex-grow: 0 !important;
            }
            #website-name {
                font-size: 1.5rem !important;
            }
        }
        @media (min-width: 1025px) {
            .logo-container img, #navbar-logo {
                max-width: 280px !important;
                max-height: 180px !important;
                height: auto !important;
            }
            #website-name {
                font-size: 2rem !important;
            }
        }
        
        /* Animation classes - disabled for static layout */
        .fade-in, .slide-in-left, .slide-in-right, .scale-in {
            opacity: 1;
        }
        
        /* Hover Effects */
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        /* Image container - no zoom effects */
        .image-zoom {
            overflow: hidden;
        }
        .image-zoom img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .about-visual {
            overflow: hidden;
        }
        
        /* Smooth Transitions */
        * {
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        /* Service Card Enhancement */
        .service-card {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(147, 51, 234, 0.1), transparent);
            transition: left 0.5s ease;
        }
        
        .service-card:hover::before {
            left: 100%;
        }
        
        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(147, 51, 234, 0.2);
        }
        
        /* Button Hover Effects */
        .btn-hover {
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .btn-hover::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
            z-index: -1;
        }
        
        .btn-hover:hover::before {
            width: 300px;
            height: 300px;
        }
        
        /* Comprehensive Responsive Utilities */
        @media (max-width: 640px) {
            .container { padding-left: 1rem; padding-right: 1rem; }
            h1 { font-size: 1.875rem !important; line-height: 1.2 !important; }
            h2 { font-size: 1.5rem !important; line-height: 1.3 !important; }
            h3 { font-size: 1.25rem !important; line-height: 1.3 !important; }
            
            /* Navbar mobile improvements */
            #main-navbar { padding-top: 0.5rem; padding-bottom: 0.5rem; }
            #mobile-menu { max-height: calc(100vh - 5rem); overflow-y: auto; }
            #mobile-menu-items a { font-size: 0.95rem; padding: 0.75rem 1rem; }
            
            /* Reviews carousel mobile */
            #reviews-carousel .review-card { 
                margin-bottom: 1rem; 
                padding: 0.5rem !important;
            }
            #reviews-carousel .review-card .bg-white { 
                padding: 1rem !important; 
            }
            #reviews-carousel .review-card img {
                width: 3rem !important;
                height: 3rem !important;
            }
            #reviews-carousel .review-card h4 {
                font-size: 1rem !important;
            }
            #reviews-carousel .review-card p {
                font-size: 0.875rem !important;
                line-height: 1.4 !important;
            }
            #review-dots {
                gap: 0.5rem !important;
                padding: 0.5rem 0 !important;
            }
            
            /* Gallery mobile */
            #gallery-slides-container { gap: 0.75rem !important; }
            
            /* Service cards mobile */
            .service-card { 
                margin-bottom: 1rem !important;
                padding: 1rem !important;
            }
            .service-card h3 { font-size: 1.1rem !important; }
            .service-card p { font-size: 0.875rem !important; }
            
            /* FAQ mobile */
            .faq-item, .faq-question { 
                padding: 0.875rem !important; 
                font-size: 0.95rem !important;
            }
            
            /* Footer mobile */
            footer { padding: 2rem 0 !important; }
            footer .grid { 
                grid-template-columns: 1fr !important; 
                gap: 1.5rem !important; 
            }
            footer h3, footer h4 { 
                font-size: 1.125rem !important; 
                margin-bottom: 0.75rem !important;
            }
            footer p, footer a, footer li { 
                font-size: 0.875rem !important; 
            }
            footer .text-center p { 
                font-size: 0.75rem !important; 
            }
            
            /* Contact section mobile */
            .contact-info p, .contact-info a {
                font-size: 0.875rem !important;
            }
            
            /* Button sizes mobile */
            .btn, button {
                padding: 0.625rem 1.25rem !important;
                font-size: 0.875rem !important;
            }
        }
        
        /* Extra small devices */
        @media (max-width: 375px) {
            h1 { font-size: 1.5rem !important; }
            h2 { font-size: 1.25rem !important; }
            h3 { font-size: 1.1rem !important; }
            
            #reviews-carousel .review-card img {
                width: 2.5rem !important;
                height: 2.5rem !important;
            }
            
            #review-dots button {
                width: 0.5rem !important;
                height: 0.5rem !important;
            }
        }
        
        /* Tablet responsive */
        @media (min-width: 641px) and (max-width: 1024px) {
            .container { padding-left: 1.5rem; padding-right: 1.5rem; }
            h1 { font-size: 2.25rem !important; }
            h2 { font-size: 1.875rem !important; }
            h3 { font-size: 1.5rem !important; }
            
            #reviews-carousel { padding: 0 1.5rem; }
            #reviews-carousel .review-card img {
                width: 4rem !important;
                height: 4rem !important;
            }
            
            footer .grid { 
                grid-template-columns: repeat(2, 1fr) !important; 
                gap: 2rem !important;
            }
            
            .service-card {
                padding: 1.5rem !important;
            }
        }
        
        /* Large screens */
        @media (min-width: 1025px) {
            .container { max-width: 1280px; }
            h1 { font-size: 2.5rem !important; }
            h2 { font-size: 2rem !important; }
            h3 { font-size: 1.75rem !important; }
            
            footer .grid { 
                grid-template-columns: repeat(3, 1fr) !important; 
            }
            
            #reviews-carousel .review-card img {
                width: 5rem !important;
                height: 5rem !important;
            }
        }
        
        /* Very small mobile devices */
        @media (max-width: 480px) {
            #hero-slider { height: 60vh !important; min-height: 400px !important; }
            .hero-slide h1 { font-size: 1.5rem !important; padding: 0 1rem !important; }
            .hero-slide p { font-size: 0.875rem !important; padding: 0 1rem !important; }
            
            /* Enhanced mobile hero slider buttons - Fully Responsive */
            #prev-slide, #next-slide {
                min-width: 36px !important;
                min-height: 36px !important;
                width: 36px !important;
                height: 36px !important;
                padding: 0.5rem !important;
                font-size: 0.875rem !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }
            
            @media (min-width: 640px) {
                #prev-slide, #next-slide {
                    min-width: 48px !important;
                    min-height: 48px !important;
                    width: 48px !important;
                    height: 48px !important;
                    padding: 12px !important;
                }
            }
            
            @media (min-width: 768px) {
                #prev-slide, #next-slide {
                    min-width: 52px !important;
                    min-height: 52px !important;
                    width: 52px !important;
                    height: 52px !important;
                    padding: 14px !important;
                }
            }
            
            @media (min-width: 1024px) {
                #prev-slide, #next-slide {
                    min-width: 56px !important;
                    min-height: 56px !important;
                    width: 56px !important;
                    height: 56px !important;
                    padding: 16px !important;
                }
            }
            
            /* Original styles */
            #prev-slide, #next-slide {
                min-width: 48px !important;
                min-height: 48px !important;
                padding: 12px !important;
                margin: 8px !important;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;
            }
            
            #prev-slide {
                left: 4px !important;
            }
            
            #next-slide {
                right: 4px !important;
            }
        }
        
        /* Touch interaction improvements */
        .touch-manipulation {
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
        }
        
        /* Hero slider button enhancements */
        #prev-slide:active, #next-slide:active {
            transform: translate(-50%, -50%) scale(0.95);
        }
        
        @media (hover: none) and (pointer: coarse) {
            /* Mobile/touch devices */
            #prev-slide, #next-slide {
                opacity: 0.8 !important;
            }
        }
        
        /* Scroll Animation Classes */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .slide-in-left {
            opacity: 0;
            transform: translateX(-50px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .slide-in-left.visible {
            opacity: 1;
            transform: translateX(0);
        }
        .slide-in-right {
            opacity: 0;
            transform: translateX(50px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .slide-in-right.visible {
            opacity: 1;
            transform: translateX(0);
        }
        
        /* Service Card Hover Animation */
        .service-card {
            transition: all 0.3s ease;
        }
        .service-card:hover {
            transform: translateY(-10px);
        }
        
        /* Pooja Circle Glow Effect */
        .pooja-circle {
            position: relative;
            transition: all 0.3s ease;
        }
        .pooja-circle::before {
            content: '';
            position: absolute;
            inset: -5px;
            border-radius: 50%;
            background: linear-gradient(45deg, #f59e0b, #ef4444);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
            filter: blur(15px);
        }
        .pooja-circle:hover::before {
            opacity: 0.6;
        }
        .pooja-circle:hover {
            transform: scale(1.05);
        }
        
        /* Touch-friendly buttons - iOS and Android */
        .touch-manipulation {
            touch-action: manipulation !important;
            -webkit-tap-highlight-color: transparent !important;
            user-select: none !important;
        }
        
        /* Review navigation buttons - Mobile responsive */
        @media (max-width: 640px) {
            #reviews-prev, #reviews-next {
                width: 36px !important;
                height: 36px !important;
                min-width: 36px !important;
                min-height: 36px !important;
                padding: 0.5rem !important;
            }
            #reviews-prev {
                left: 4px !important;
                transform: translateY(-50%) !important;
            }
            #reviews-next {
                right: 4px !important;
                transform: translateY(-50%) !important;
            }
        }
    </style>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/styles/main.css">
    <script type="text/javascript">
        // Google Translate initialization
        function googleTranslateElementInit() {
            console.log('üåê Initializing Google Translate...');
            try {
                // Desktop translate element
                new google.translate.TranslateElement({
                    pageLanguage: 'en',
                    includedLanguages: 'en,hi,kn,mr,ta,te,gu,ml,pa,bn,or,as,ur,sa',
                    layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                    autoDisplay: false
                }, 'google_translate_element');
                
                // Mobile translate element
                new google.translate.TranslateElement({
                    pageLanguage: 'en',
                    includedLanguages: 'en,hi,kn,mr,ta,te,gu,ml,pa,bn,or,as,ur,sa',
                    layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                    autoDisplay: false
                }, 'google_translate_element_mobile');
                
                console.log('‚úÖ Google Translate initialized for desktop and mobile');
            } catch (error) {
                console.error('Google Translate initialization error:', error);
            }
        }
        // Expose to global scope so Google callback works on all devices
        window.googleTranslateElementInit = googleTranslateElementInit;
        
        // Language change function with current language display
        function changeLanguage(langCode, langName) {
            console.log('Changing language to:', langCode, langName);
            
            var attempts = 0;
            var maxAttempts = 50;
            
            var waitForGoogleTranslate = setInterval(function() {
                attempts++;
                var translateElement = document.querySelector('.goog-te-combo');
                
                if (translateElement) {
                    console.log('Found translate element, changing to:', langCode);
                    clearInterval(waitForGoogleTranslate);
                    
                    translateElement.value = langCode;
                    var event = new Event('change', { bubbles: true });
                    translateElement.dispatchEvent(event);
                    
                    setTimeout(function() {
                        translateElement.dispatchEvent(new Event('click'));
                    }, 100);
                    
                    // Update current language display
                    var currentLangDisplay = document.getElementById('current-lang-display');
                    if (currentLangDisplay) {
                        // Get short code for display
                        var langMap = {
                            'en': 'EN', 'hi': 'HI', 'kn': 'KN', 'mr': 'MR',
                            'ta': 'TA', 'te': 'TE', 'gu': 'GU', 'ml': 'ML'
                        };
                        currentLangDisplay.textContent = langMap[langCode] || 'EN';
                    }
                    
                    // Close settings dropdown
                    var dropdown = document.getElementById('settings-dropdown');
                    if (dropdown) {
                        dropdown.classList.add('hidden');
                    }
                    
                    console.log('Language changed successfully to', langName);
                } else if (attempts >= maxAttempts) {
                    clearInterval(waitForGoogleTranslate);
                    console.error('Google Translate element not found');
                    alert('Translation not ready yet. Please wait a moment and try again.');
                }
            }, 100);
        }
    </script>
    
    <!-- Custom Styles for Google Translate and Navbar -->
    <style>
        /* Enhanced Google Translate Styling */
        .goog-te-banner-frame { 
            display: none !important; 
        }
        
        .goog-te-menu-value { 
            padding: 8px !important; 
            margin: 0 !important;
        }
        
        .goog-te-gadget-simple { 
            background-color: transparent !important; 
            border: none !important; 
            font-size: 14px !important;
            padding: 8px !important;
            width: 100% !important;
        }
        
        .goog-te-combo { 
            background-color: rgba(255, 255, 255, 0.95) !important; 
            border: 2px solid rgba(139, 69, 19, 0.2) !important; 
            border-radius: 8px !important; 
            padding: 8px 12px !important;
            font-size: 14px !important;
            color: #6B46C1 !important;
            font-weight: 600 !important;
            backdrop-filter: blur(8px);
            min-width: 140px !important;
            height: auto !important;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important;
            transition: all 0.3s ease !important;
        }
        .goog-te-combo:hover {
            background-color: white !important;
            border-color: #6B46C1 !important;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15) !important;
            transform: translateY(-1px);
        }
        
        .goog-te-combo:focus {
            outline: none !important;
            border-color: #6B46C1 !important;
            box-shadow: 0 0 0 3px rgba(107, 70, 193, 0.2) !important;
        }
        
        /* Language dropdown overlay below navbar */
        #lang-dropdown {
            scrollbar-width: none !important;
            -ms-overflow-style: none !important;
        }
        #lang-dropdown::-webkit-scrollbar {
            display: none !important;
        }
        
        #lang-dropdown.hidden {
            display: none !important;
        }
        
        /* Translate elements in navbar */
        .translate-element .goog-te-gadget-simple {
            background: transparent !important;
            border: none !important;
        }
        .translate-element-mobile .goog-te-gadget-simple {
            background: transparent !important;
            border: none !important;
        }
        /* Quick action buttons responsiveness */
        .quick-action-btn {
            min-width: 140px;
            justify-content: center;
        }
        @media (max-width: 640px) {
            .quick-action-btn {
                width: 100%;
                font-size: 0.9rem !important;
                padding: 0.55rem 0.75rem !important;
            }
        }
        @media (min-width: 641px) and (max-width: 1024px) {
            .quick-action-btn {
                padding: 0.6rem 1.25rem !important;
                font-size: 0.95rem !important;
            }
        }
        
        /* Remove Google Translate top bar */
        body { top: 0 !important; }
        
        /* Navbar Animation */
        /* Mobile Menu overlay below navbar */
        #mobile-menu { 
            position: fixed !important;
            z-index: 40 !important;
            top: 56px !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            transition: all 0.3s ease;
            scrollbar-width: none !important;
        }
        #mobile-menu::-webkit-scrollbar { 
            display: none !important;
        }
    </style>


    <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    
    <script>
        function convertToLocalUrl(url) {
            if (!url) {
                return '';
            }
            // Already-local or data URI
            if (url.startsWith('/uploads/') || url.startsWith('data:')) {
                return url;
            }
            try {
                const urlObj = new URL(url, window.location.origin);
                let filePath = urlObj.pathname;
                // Handle Supabase public bucket path: /storage/v1/object/public/<bucket>/<folder>/filename
                const storageMarker = '/storage/v1/object/public/';
                const markerIndex = filePath.indexOf(storageMarker);
                if (markerIndex !== -1) {
                    filePath = filePath.substring(markerIndex + storageMarker.length);
                }
                // Take only the last segment (filename) to map into /uploads
                const parts = filePath.split('/').filter(Boolean);
                const filename = (parts.pop() || '').split('?')[0];
                return filename ? `/uploads/${filename}` : '';
            } catch (error) {
                console.error('Invalid URL for convertToLocalUrl:', url);
                // Fallback simple extraction
                try {
                    const parts = url.split('/');
                    const filename = (parts.pop() || '').split('?')[0];
                    return filename ? `/uploads/${filename}` : '';
                } catch (_) {
                    return '';
                }
            }
        }
    </script>
    
    <!-- Global Responsive Styles - Prevent all scroll issues -->
    <style>
        /* Universal overflow control */
        html, body {
            overflow-x: hidden !important;
            max-width: 100vw !important;
            width: 100% !important;
        }
        
        /* Ensure all sections fit within viewport */
        section, .container, main, header, footer, nav {
            overflow-x: hidden !important;
            max-width: 100vw !important;
        }
        
        /* Image responsiveness */
        img, video, iframe {
            max-width: 100% !important;
        }
        
        /* Review card fixed width */
        .review-card {
            width: 280px !important;
            min-width: 280px !important;
            flex-shrink: 0 !important;
        }
        
        @media (min-width: 768px) {
            .review-card {
                width: 300px !important;
                min-width: 300px !important;
            }
        }
    </style>
</head>
<body class="font-sans bg-gray-50">

    <!-- Main Content Wrapper - Show immediately -->
    <div id="main-content">
<!-- Clean Header Section (HEIGHT INCREASED) -->
<header class="bg-white border-b-2 border-gray-200 shadow-md" 
        style="min-height: 100px; overflow: visible;">

    <div class="container mx-auto px-2 sm:px-4 h-full flex items-center py-2 sm:py-3">

        <!-- LEFT SIDE (Logo + Name + Subtitle) -->
        <div class="flex items-center space-x-2 sm:space-x-4 md:space-x-6 flex-1 min-w-0">

            <!-- Logo -->
            <div class="flex-shrink-0">
                <img 
                    id="navbar-logo" 
                    src="" 
                    alt="Logo" 
                    class="h-16 sm:h-20 md:h-24 lg:h-28 xl:h-32 w-auto object-contain"
                    style="max-height: 90px;"
                    loading="eager"
                >
            </div>

            <!-- Name + Subtitle -->
            <div class="flex flex-col justify-center min-w-0 flex-1">
                <h1 id="website-name"
                    class="text-sm sm:text-lg md:text-xl lg:text-2xl xl:text-3xl font-bold text-gray-800 leading-tight break-words"
                    style="font-size: clamp(0.875rem, 3vw, 2rem); line-height: 1.2; word-wrap: break-word; overflow-wrap: break-word;">
                    Loading...
                </h1>

                <p id="website-subtitle"
                    class="text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl text-gray-600 font-medium mt-0.5 sm:mt-1 break-words"
                    style="font-size: clamp(0.75rem, 2vw, 1.125rem); line-height: 1.2; word-wrap: break-word; overflow-wrap: break-word;">
                    Loading...
                </p>
            </div>

        </div>

       
</header>


<!-- MAIN NAVIGATION BAR -->
<nav id="main-navbar" class="bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 text-white sticky top-0 z-50 shadow-xl">
    <div class="container mx-auto px-4">
        <div class="flex items-center justify-between" style="min-height: 64px;">

            <!-- Hamburger Menu Button (Mobile/Tablet) -->
            <button 
                id="hamburger-btn" 
                class="lg:hidden flex flex-col items-center justify-center w-12 h-12 space-y-1.5 rounded-lg hover:bg-white/20 transition-all focus:outline-none focus:ring-2 focus:ring-white/50" 
                aria-label="Toggle navigation menu"
                aria-expanded="false"
                aria-controls="mobile-nav-menu"
                role="button"
            >
                <span class="hamburger-line w-6 h-0.5 bg-white transition-all duration-300 ease-in-out"></span>
                <span class="hamburger-line w-6 h-0.5 bg-white transition-all duration-300 ease-in-out"></span>
                <span class="hamburger-line w-6 h-0.5 bg-white transition-all duration-300 ease-in-out"></span>
            </button>

            <!-- Desktop Menu - Shows ALL items horizontally -->
            <nav id="desktop-menu" class="hidden lg:flex items-center justify-center flex-1 space-x-2 xl:space-x-3" role="navigation" aria-label="Main navigation">
                <!-- Dynamic Items will be loaded here -->
            </nav>

            <!-- Language Button -->
            <div class="relative flex-shrink-0">
                <button id="settings-menu-btn" class="flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-white/20 transition-all text-sm bg-white/10" aria-label="Language settings">
                    <i class="fas fa-globe text-lg"></i>
                    <span class="text-sm font-semibold hidden sm:inline" id="nav-lang-display">Lang</span>
                    <i class="fas fa-chevron-down text-xs"></i>
                </button>
            </div>
        </div>
    </div>
</nav>

<!-- Announcement Bar with Auto-Scrolling Marquee (Below Navbar) -->
<div id="announcement-bar" class="announcement-bar" style="display: none;" role="banner" aria-label="Announcement">
    <div class="marquee-container">
        <div class="marquee-content" id="marquee-content">
            <!-- Announcements will be dynamically loaded and duplicated for seamless scroll -->
        </div>
    </div>
</div>

<!-- Mobile Slide-Out Menu -->
<div id="mobile-nav-backdrop" class="fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300 ease-in-out opacity-0 invisible z-[60] lg:hidden" aria-hidden="true"></div>
<aside 
    id="mobile-nav-menu" 
    class="fixed top-0 left-0 max-h-screen w-80 max-w-[85vw] bg-gradient-to-br from-purple-700 via-purple-600 to-indigo-700 shadow-2xl transform -translate-x-full transition-transform duration-300 ease-in-out z-[70] lg:hidden overflow-y-auto"
    role="menu"
    aria-label="Mobile navigation menu"
    style="height: auto; max-height: 100vh;"
>
    <!-- Mobile Menu Header -->
    <div class="flex items-center justify-between p-4 border-b border-white/20">
        <h2 class="text-xl font-bold text-white">Menu</h2>
        <button 
            id="mobile-menu-close" 
            class="flex items-center justify-center w-10 h-10 rounded-lg hover:bg-white/20 transition-all focus:outline-none focus:ring-2 focus:ring-white/50"
            aria-label="Close menu"
        >
            <i class="fas fa-times text-2xl text-white"></i>
        </button>
    </div>
    
    <!-- Mobile Menu Items -->
    <nav id="mobile-menu-items" class="flex flex-col p-2" role="navigation">
        <!-- Dynamic mobile menu items will be loaded here -->
    </nav>
</aside>

<!-- Settings Menu Dropdown - Modern design with translate options -->
<div id="settings-dropdown" class="hidden fixed bg-white rounded-2xl shadow-2xl border border-gray-100" style="z-index: 99999; width: 320px; max-width: calc(100vw - 30px); max-height: 85vh; overflow-y: auto; overflow-x: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.3), 0 8px 20px rgba(0,0,0,0.2);">
    <!-- Header -->
    <div class="sticky top-0 px-5 py-4 border-b border-gray-100 bg-gradient-to-r from-purple-600 to-pink-600 rounded-t-2xl z-10">
        <div class="flex items-center justify-between">
            <h3 class="text-base font-bold text-white flex items-center gap-2">
                <i class="fas fa-cog"></i>
                Settings & Language
            </h3>
            <button id="settings-close-btn" class="text-white hover:bg-white/20 rounded-lg p-1.5 transition">
                <i class="fas fa-times text-lg"></i>
            </button>
        </div>
    </div>
    
    <!-- Language Selection -->
    <div class="px-5 py-4 border-b border-gray-100">
        <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3 flex items-center justify-between">
            <span class="flex items-center gap-2">
                <i class="fas fa-globe text-purple-600"></i>
                Choose Language
            </span>
            <span id="current-lang-display" class="text-purple-600 font-bold text-sm">EN</span>
        </h4>
        
        <!-- Google Translate Selector Only -->
        <div class="p-3 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200">
            <p class="text-xs text-gray-500 mb-2">Select your preferred language:</p>
            <div id="google_translate_element" class="translate-selector"></div>
        </div>
    </div>
    
</div>

<style>
    /* Settings Dropdown Styling */
    #settings-dropdown {
        scrollbar-width: thin;
        scrollbar-color: rgba(147, 51, 234, 0.3) transparent;
        transition: opacity 0.2s ease, transform 0.2s ease;
    }
    #settings-dropdown::-webkit-scrollbar {
        width: 6px;
    }
    #settings-dropdown::-webkit-scrollbar-track {
        background: transparent;
    }
    #settings-dropdown::-webkit-scrollbar-thumb {
        background-color: rgba(147, 51, 234, 0.3);
        border-radius: 10px;
    }
    #settings-dropdown.hidden {
        display: none !important;
        opacity: 0;
        transform: translateY(-10px) scale(0.95);
    }
    #settings-dropdown:not(.hidden) {
        display: block !important;
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    .lang-btn:active {
        transform: scale(0.95);
    }
    
    /* Google Translate Selector in Settings */
    .translate-selector .goog-te-combo {
        width: 100% !important;
        padding: 10px 14px !important;
        border: 2px solid #c084fc !important;
        border-radius: 10px !important;
        font-size: 14px !important;
        font-weight: 600 !important;
        color: #6b21a8 !important;
        background: white !important;
        cursor: pointer !important;
        transition: all 0.2s ease !important;
    }
    .translate-selector .goog-te-combo:hover {
        border-color: #9333ea !important;
        box-shadow: 0 0 0 3px rgba(147, 51, 234, 0.1) !important;
    }
    .translate-selector .goog-te-combo:focus {
        outline: none !important;
        border-color: #9333ea !important;
        box-shadow: 0 0 0 4px rgba(147, 51, 234, 0.2) !important;
    }
</style>

<style>
    /* Mobile Menu - Proper positioning and scrolling */
    #mobile-menu {
        scrollbar-width: none !important;
        -ms-overflow-style: none !important;
    }
    #mobile-menu::-webkit-scrollbar {
        display: none !important;
    }
    /* When menu is open, don't block body scroll permanently */
    body.menu-open {
        overflow: hidden;
    }
    /* Responsive top position based on navbar height */
    @media (max-width: 640px) {
        #mobile-menu {
            top: 56px !important;
        }
    }
    @media (min-width: 641px) {
        #mobile-menu {
            top: 64px !important;
        }
    }
    
    /* Mobile Menu Show States */
    #mobile-nav-menu {
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
    }
    
    #mobile-nav-menu.show {
        transform: translateX(0) !important;
        display: block !important;
        visibility: visible !important;
    }
    
    #mobile-nav-backdrop {
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
    }
    
    #mobile-nav-backdrop.show {
        opacity: 1 !important;
        visibility: visible !important;
        display: block !important;
    }
    
    /* Hamburger button active state */
    #hamburger-btn.active .hamburger-line:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
    }
    
    #hamburger-btn.active .hamburger-line:nth-child(2) {
        opacity: 0;
    }
    
    #hamburger-btn.active .hamburger-line:nth-child(3) {
        transform: rotate(-45deg) translate(7px, -6px);
    }
</style>
<!-- Note: Mobile nav toggle, language select, and review slider functionality is handled in the main DOMContentLoaded script below -->


<style>
    /* ...existing code... */
    
    /* ========================================
       ANNOUNCEMENT BAR - AUTO-SCROLLING MARQUEE
       ======================================== */
    .announcement-bar {
        position: relative;
        width: 100%;
        background: linear-gradient(90deg, #dc2626 0%, #ea580c 50%, #dc2626 100%);
        background-size: 200% 100%;
        color: white;
        overflow: hidden;
        z-index: 50 !important; /* Below mobile menu (z-70), above content */
        animation: gradientShift 5s ease infinite;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        /* Ensure no horizontal scroll */
        max-width: 100vw;
        box-sizing: border-box;
    }
    
    /* When mobile menu is open, announcement bar should be below it */
    #mobile-nav-menu.show ~ #announcement-bar,
    body.menu-open #announcement-bar {
        z-index: 40 !important;
    }
    
    /* Ensure announcement bar doesn't overlap with chatbot */
    #announcement-bar {
        position: relative;
    }
    
    /* Prevent horizontal scroll on mobile */
    @media (max-width: 640px) {
        .announcement-bar {
            overflow-x: hidden !important;
            overflow-y: hidden !important;
        }
        .marquee-container {
            overflow-x: hidden !important;
            overflow-y: hidden !important;
        }
    }
    
    @keyframes gradientShift {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
    }
    
    .marquee-container {
        width: 100%;
        overflow: hidden;
        padding: 12px 0;
        position: relative;
    }
    
    .marquee-content {
        display: flex;
        white-space: nowrap;
        animation: marqueeScroll 18s linear infinite; /* Medium speed */
        will-change: transform;
    }
    
    .marquee-content span {
        padding: 0 100px;
        font-size: 16px;
        font-weight: 600;
        letter-spacing: 0.5px;
        display: inline-flex;
        align-items: center;
        gap: 12px;
        margin-right: 80px !important;
        white-space: nowrap;
    }
    
    .marquee-content i {
        margin-right: 10px;
        font-size: 18px;
        flex-shrink: 0;
    }
    
    @keyframes marqueeScroll {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }
    
    /* Pause animation on hover (desktop) */
    .announcement-bar:hover .marquee-content {
        animation-play-state: paused;
    }
    
    /* Touch & hold to pause on mobile */
    .announcement-bar:active .marquee-content {
        animation-play-state: paused;
    }
    
    /* Mobile Responsive - Ensure all announcements loop properly */
    @media (max-width: 640px) {
        .marquee-container {
            padding: 8px 0;
            overflow-x: hidden !important;
            overflow-y: hidden !important;
        }
        .marquee-content {
            animation-duration: 20s !important; /* Medium speed for mobile */
            animation-timing-function: linear !important;
            animation-iteration-count: infinite !important;
            will-change: transform !important;
            display: flex !important; /* Ensure flex display */
        }
        .marquee-content span {
            font-size: 13px;
            padding: 0 80px !important; /* Increased spacing */
            gap: 10px;
            white-space: nowrap !important;
            margin-right: 80px !important; /* Increased margin for better separation */
            display: inline-flex !important;
            align-items: center !important;
        }
        .marquee-content i {
            font-size: 14px;
            margin-right: 8px;
            flex-shrink: 0;
        }
        /* Ensure no text clipping */
        .announcement-bar {
            overflow: hidden !important;
            text-overflow: ellipsis !important;
        }
    }
    
    /* Tablet Responsive */
    @media (min-width: 641px) and (max-width: 1024px) {
        .marquee-content {
            animation-duration: 18s !important; /* Faster for tablet */
        }
        .marquee-content span {
            font-size: 15px;
            padding: 0 80px;
        }
    }
    
    @media (max-width: 375px) {
        .marquee-content span {
            font-size: 12px;
            padding: 0 65px;
            gap: 6px;
            margin-right: 50px !important;
        }
        .marquee-content i {
            font-size: 13px;
            margin-right: 5px;
        }
    }
    
    /* Tablet */
    @media (min-width: 641px) and (max-width: 1024px) {
        .marquee-content span {
            font-size: 15px;
            padding: 0 75px;
            gap: 10px;
            margin-right: 60px !important;
        }
        .marquee-content i {
            margin-right: 8px;
        }
    }
    
    /* Desktop */
    @media (min-width: 1025px) {
        .marquee-container {
            padding: 14px 0;
        }
        .marquee-content span {
            font-size: 17px;
            padding: 0 100px;
            gap: 12px;
            margin-right: 80px !important;
        }
        .marquee-content i {
            margin-right: 10px;
        }
    }
    
    /* Mobile Menu Scrollbar */
    #mobile-nav-menu {
        scrollbar-width: thin;
        scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
    }
    #mobile-nav-menu::-webkit-scrollbar {
        width: 6px;
    }
    #mobile-nav-menu::-webkit-scrollbar-track {
        background: transparent;
    }
    #mobile-nav-menu::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 3px;
    }
    
    /* Responsive adjustments for very small screens */
    @media (max-width: 320px) {
        #mobile-menu-items a {
            font-size: 0.95rem;
            padding: 0.875rem 1rem;
        }
    }
    @media (min-width: 321px) and (max-width: 375px) {
        #mobile-menu-items a {
            font-size: 1rem;
        }
    }
    @media (min-width: 376px) and (max-width: 414px) {
        #mobile-menu-items a {
            font-size: 1.05rem;
        }
    }
    @media (min-width: 415px) and (max-width: 768px) {
        #mobile-menu-items a {
            font-size: 1.1rem;
            padding: 1.125rem 1.5rem;
        }
    }
    /* Language dropdown - NO SCROLLBARS */
    #lang-dropdown {
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    #lang-dropdown::-webkit-scrollbar {
        display: none;
    }
    /* About section - NO SCROLLBARS, show full image */
    #about {
        overflow: visible !important;
    }
    #about .bg-white {
        overflow: visible !important;
    }
    #about .space-y-3 {
        overflow: visible !important;
    }
    #about-details {
        overflow: visible !important;
        max-height: none !important;
    }
    /* Translate widget styling */
    .translate-widget .goog-te-gadget-simple,
    .translate-widget-mobile .goog-te-gadget-simple {
        background: transparent !important;
        border: none !important;
        padding: 0 !important;
    }
    .goog-te-combo {
        padding: 8px 12px !important;
        border-radius: 8px !important;
        border: 2px solid #e5e7eb !important;
        width: 100% !important;
        font-size: 14px !important;
    }
    /* Language dropdown proper positioning */
    #lang-dropdown {
        z-index: 9999;
    }
    /* Gallery Responsive Card Sizing - FULL CARD DISPLAY, proper image loading */
    @media (max-width: 640px) {
        .gallery-item {
            width: 220px !important;
            min-width: 220px !important;
            max-width: 220px !important;
            flex-shrink: 0 !important;
            flex-grow: 0 !important;
            display: inline-block !important;
        }
        .gallery-item > div:first-child,
        .gallery-img-container {
            height: 180px !important;
            width: 100% !important;
            overflow: hidden !important;
        }
        .gallery-item img {
            width: 100% !important;
            height: 100% !important;
            object-fit: cover !important;
            object-position: center !important;
        }
    }
    @media (min-width: 641px) and (max-width: 1024px) {
        .gallery-item {
            width: 260px !important;
            min-width: 260px !important;
            max-width: 260px !important;
            flex-shrink: 0 !important;
            flex-grow: 0 !important;
            display: inline-block !important;
        }
        .gallery-item > div:first-child,
        .gallery-img-container {
            height: 220px !important;
            width: 100% !important;
            overflow: hidden !important;
        }
        .gallery-item img {
            width: 100% !important;
            height: 100% !important;
            object-fit: cover !important;
            object-position: center !important;
        }
    }
    @media (min-width: 1025px) {
        .gallery-item {
            width: 320px !important;
            min-width: 320px !important;
            max-width: 320px !important;
            flex-shrink: 0 !important;
            flex-grow: 0 !important;
            display: inline-block !important;
        }
        .gallery-item > div:first-child,
        .gallery-img-container {
            height: 260px !important;
            width: 100% !important;
            overflow: hidden !important;
        }
        .gallery-item img {
            width: 100% !important;
            height: 100% !important;
            object-fit: cover !important;
            object-position: center !important;
        }
    }
    /* Gallery Container - Fully Responsive - NO SCROLLBAR */
    #gallery-slides-container {
        display: flex !important;
        flex-wrap: nowrap !important;
        overflow-x: hidden !important;
        overflow-y: hidden !important;
        scrollbar-width: none !important;
        -ms-overflow-style: none !important;
        gap: 1rem !important;
        will-change: transform;
        align-items: stretch !important;
        scroll-snap-type: x mandatory;
        padding-bottom: 4px;
        scroll-behavior: smooth !important;
    }
    #gallery-slides-container::-webkit-scrollbar {
        display: none !important;
        width: 0 !important;
        height: 0 !important;
    }
    #gallery-slides-container::-webkit-scrollbar-thumb {
        background: rgba(124, 58, 237, 0.45);
        border-radius: 999px;
    }
    #gallery-slides-container::-webkit-scrollbar-track {
        background: transparent;
    }
    
    /* Gallery Items - Responsive sizing with proper image loading */
    .gallery-item {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        opacity: 1 !important;
        visibility: visible !important;
    }
    
    .gallery-item img {
        width: 100% !important;
        height: 100% !important;
        object-fit: cover !important;
        object-position: center !important;
        display: block !important;
        background-color: #f3f4f6;
    }
    
    .gallery-img-container {
        width: 100% !important;
        overflow: hidden !important;
        background: linear-gradient(135deg, #f3f4f6, #e5e7eb) !important;
    }
    
    @media (max-width: 640px) {
        #gallery-slides-container {
            gap: 0.75rem !important;
            scroll-snap-type: x mandatory;
        }
        .gallery-item {
            width: 200px !important;
            min-width: 200px !important;
            max-width: 200px !important;
        }
        .gallery-img-container {
            height: 160px !important;
        }
    }
    
    @media (min-width: 641px) and (max-width: 1024px) {
        #gallery-slides-container {
            gap: 1rem !important;
            scroll-snap-type: x mandatory;
        }
        .gallery-item {
            width: 240px !important;
            min-width: 240px !important;
            max-width: 240px !important;
        }
        .gallery-img-container {
            height: 200px !important;
        }
    }
    
    @media (min-width: 1025px) {
        #gallery-slides-container {
            gap: 1.25rem !important;
            scroll-snap-type: x mandatory;
        }
        .gallery-item {
            width: 280px !important;
            min-width: 280px !important;
            max-width: 280px !important;
        }
        .gallery-img-container {
            height: 240px !important;
        }
    }
</style>
    
    <!-- Hero Auto Image Slider - Full Image Display Without Cropping -->
    <section id="hero-banner-slider" class="relative w-full overflow-hidden" style="background: transparent;">
        <div class="hero-slider-wrapper">
            <div id="hero-slides-track" class="hero-slides-track">
                <!-- Slides will be loaded dynamically -->
                <div class="hero-slide-item active flex items-center justify-center bg-gradient-to-br from-purple-900 to-indigo-900">
                    <div class="text-center text-white p-8">
                        <div class="animate-pulse mb-4">
                            <i class="fas fa-spinner fa-spin text-5xl text-purple-300"></i>
                        </div>
                        <p class="text-xl">Loading banner images...</p>
                    </div>
                </div>
            </div>
            
            <!-- Navigation Controls -->
            <button id="hero-slider-prev" class="hero-nav-btn hero-nav-prev" aria-label="Previous slide">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button id="hero-slider-next" class="hero-nav-btn hero-nav-next" aria-label="Next slide">
                <i class="fas fa-chevron-right"></i>
            </button>
            
            <!-- Slide Indicators -->
            <div id="hero-slide-dots" class="hero-slide-dots">
                <!-- Dots will be added dynamically -->
            </div>
        </div>
    </section>

    <style>
        /* Hero Slider - Full Image Display with Dynamic Height */
        #hero-banner-slider {
            width: 100%;
            position: relative;
            min-height: 300px;
            background: transparent !important;
        }
        
        .hero-slider-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            background: transparent !important;
        }
        
        .hero-slides-track {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            transition: opacity 0.6s ease-in-out;
            background: transparent !important;
        }
        
        .hero-slide-item {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.8s ease-in-out, visibility 0s linear 0.8s;
            display: flex !important;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: transparent;
            z-index: 1;
            pointer-events: none;
        }
        
        .hero-slide-item.active {
            opacity: 1 !important;
            visibility: visible !important;
            transition: opacity 0.8s ease-in-out, visibility 0s linear 0s;
            z-index: 10 !important;
            pointer-events: auto;
        }
        
        .hero-slide-item.exiting {
            opacity: 0 !important;
            visibility: hidden !important;
            z-index: 1 !important;
        }
        
        /* Image Container - Dynamic Height, Full Image Display */
        .hero-slide-image-container {
            position: relative;
            width: 100%;
            height: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
        }
        
        .hero-slide-image {
            width: 100%;
            height: auto;
            max-width: 100%;
            object-fit: contain !important;
            object-position: center !important;
            display: block !important;
            transition: transform 0.3s ease;
        }
        
        /* Content Overlay - REMOVED - No text on slider images */
        
        /* Navigation Buttons */
        .hero-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 20;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .hero-nav-btn:hover {
            background: white;
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .hero-nav-btn i {
            color: #6B21A8;
            font-size: 1.25rem;
        }
        
        .hero-nav-prev {
            left: 1rem;
        }
        
        .hero-nav-next {
            right: 1rem;
        }
        
        /* Slide Dots */
        .hero-slide-dots {
            position: absolute;
            bottom: 1.5rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 0.75rem;
            z-index: 20;
        }
        
        .hero-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .hero-dot:hover {
            background: rgba(255, 255, 255, 0.8);
            transform: scale(1.2);
        }
        
        .hero-dot.active {
            background: white;
            transform: scale(1.3);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
            border-color: rgba(147, 51, 234, 0.5);
        }
        
        /* Responsive Adjustments - Mobile First Approach */
        
        /* Tablet and below */
        @media (max-width: 768px) {
            #hero-banner-slider {
                min-height: 250px;
            }
            
            .hero-slide-content {
                padding: 1.5rem 1rem;
                border-radius: 15px;
                width: 92%;
            }
            
            .hero-slide-title {
                font-size: clamp(1.4rem, 4.5vw, 2.5rem);
                margin-bottom: 0.75rem;
                line-height: 1.25;
            }
            
            .hero-slide-subtitle {
                font-size: clamp(0.9rem, 2.5vw, 1.2rem);
                margin-bottom: 1.25rem;
                line-height: 1.35;
            }
            
            .hero-nav-btn {
                width: 42px;
                height: 42px;
            }
            
            .hero-nav-btn i {
                font-size: 1.1rem;
            }
            
            .hero-nav-prev {
                left: 0.5rem;
            }
            
            .hero-nav-next {
                right: 0.5rem;
            }
            
            .hero-slide-dots {
                bottom: 1.25rem;
                gap: 0.6rem;
            }
            
            .hero-dot {
                width: 10px;
                height: 10px;
            }
            
            .hero-slide-cta {
                padding: 0.75rem 1.75rem;
                font-size: clamp(0.85rem, 2.2vw, 1rem);
            }
        }
        
        /* Large Mobile - 414px (iPhone Plus, Pixel, etc.) */
        @media (max-width: 480px) {
            #hero-banner-slider {
                min-height: 220px;
            }
            
            .hero-slide-content {
                padding: 1.25rem 0.875rem;
                width: 94%;
                border-radius: 12px;
            }
            
            .hero-slide-title {
                font-size: clamp(1.3rem, 4.2vw, 2rem);
                margin-bottom: 0.65rem;
            }
            
            .hero-slide-subtitle {
                font-size: clamp(0.85rem, 2.3vw, 1.1rem);
                margin-bottom: 1rem;
            }
            
            .hero-nav-btn {
                width: 38px;
                height: 38px;
            }
            
            .hero-nav-btn i {
                font-size: 1rem;
            }
            
            .hero-slide-cta {
                padding: 0.65rem 1.5rem;
                font-size: clamp(0.8rem, 2vw, 0.95rem);
                max-width: 85%;
            }
            
            .hero-slide-dots {
                bottom: 1rem;
                gap: 0.55rem;
            }
        }
        
        /* Standard Mobile - 390px (iPhone 12/13/14, etc.) */
        @media (max-width: 414px) {
            #hero-banner-slider {
                min-height: 200px;
            }
            
            .hero-slide-content {
                padding: 1.1rem 0.75rem;
                width: 95%;
            }
            
            .hero-slide-title {
                font-size: clamp(1.2rem, 4vw, 1.85rem);
                margin-bottom: 0.6rem;
                word-wrap: break-word;
                overflow-wrap: break-word;
                hyphens: auto;
            }
            
            .hero-slide-subtitle {
                font-size: clamp(0.8rem, 2.2vw, 1rem);
                margin-bottom: 0.9rem;
            }
            
            .hero-nav-btn {
                width: 36px;
                height: 36px;
            }
            
            .hero-nav-btn i {
                font-size: 0.95rem;
            }
            
            .hero-nav-prev {
                left: 0.4rem;
            }
            
            .hero-nav-next {
                right: 0.4rem;
            }
            
            .hero-slide-cta {
                padding: 0.6rem 1.3rem;
                font-size: clamp(0.78rem, 1.9vw, 0.9rem);
                max-width: 90%;
            }
        }
        
        /* Mid Mobile - 375px (iPhone SE, iPhone X/11, etc.) */
        @media (max-width: 390px) {
            #hero-banner-slider {
                min-height: 190px;
            }
            
            .hero-slide-content {
                padding: 1rem 0.7rem;
                width: 96%;
            }
            
            .hero-slide-title {
                font-size: clamp(1.15rem, 3.8vw, 1.75rem);
                margin-bottom: 0.55rem;
                letter-spacing: -0.02em;
            }
            
            .hero-slide-subtitle {
                font-size: clamp(0.78rem, 2.1vw, 0.95rem);
                margin-bottom: 0.85rem;
            }
            
            .hero-nav-btn {
                width: 34px;
                height: 34px;
            }
            
            .hero-nav-btn i {
                font-size: 0.9rem;
            }
            
            .hero-slide-cta {
                padding: 0.55rem 1.2rem;
                font-size: clamp(0.75rem, 1.85vw, 0.88rem);
            }
            
            .hero-slide-dots {
                bottom: 0.9rem;
                gap: 0.5rem;
            }
            
            .hero-dot {
                width: 9px;
                height: 9px;
            }
        }
        
        /* Small Mobile - 360px (Galaxy, Pixel, etc.) */
        @media (max-width: 375px) {
            #hero-banner-slider {
                min-height: 180px;
            }
            
            .hero-slide-content {
                padding: 0.9rem 0.65rem;
                width: 96%;
            }
            
            .hero-slide-title {
                font-size: clamp(1.1rem, 3.6vw, 1.65rem);
                margin-bottom: 0.5rem;
                letter-spacing: -0.03em;
                max-width: 100%;
            }
            
            .hero-slide-subtitle {
                font-size: clamp(0.75rem, 2vw, 0.9rem);
                margin-bottom: 0.8rem;
                line-height: 1.3;
            }
            
            .hero-nav-btn {
                width: 32px;
                height: 32px;
            }
            
            .hero-nav-btn i {
                font-size: 0.85rem;
            }
            
            .hero-nav-prev {
                left: 0.35rem;
            }
            
            .hero-nav-next {
                right: 0.35rem;
            }
            
            .hero-slide-cta {
                padding: 0.5rem 1.1rem;
                font-size: clamp(0.72rem, 1.8vw, 0.85rem);
                max-width: 92%;
            }
        }
        
        /* Extra Small Mobile - 320px and below */
        @media (max-width: 360px) {
            #hero-banner-slider {
                min-height: 170px;
            }
            
            .hero-slide-content {
                padding: 0.8rem 0.6rem;
                width: 97%;
                border-radius: 10px;
            }
            
            .hero-slide-title {
                font-size: clamp(1rem, 3.4vw, 1.5rem);
                margin-bottom: 0.45rem;
                letter-spacing: -0.04em;
                word-break: break-word;
            }
            
            .hero-slide-subtitle {
                font-size: clamp(0.72rem, 1.9vw, 0.85rem);
                margin-bottom: 0.75rem;
                line-height: 1.28;
            }
            
            .hero-nav-btn {
                width: 30px;
                height: 30px;
            }
            
            .hero-nav-btn i {
                font-size: 0.8rem;
            }
            
            .hero-nav-prev {
                left: 0.3rem;
            }
            
            .hero-nav-next {
                right: 0.3rem;
            }
            
            .hero-slide-cta {
                padding: 0.48rem 1rem;
                font-size: clamp(0.7rem, 1.75vw, 0.82rem);
                max-width: 94%;
                border-radius: 40px;
            }
            
            .hero-slide-dots {
                bottom: 0.8rem;
                gap: 0.45rem;
            }
            
            .hero-dot {
                width: 8px;
                height: 8px;
            }
        }
        
        @media (max-width: 320px) {
            #hero-banner-slider {
                min-height: 160px;
            }
            
            .hero-slide-content {
                padding: 0.7rem 0.5rem;
                width: 98%;
            }
            
            .hero-slide-title {
                font-size: clamp(0.95rem, 3.2vw, 1.4rem);
                margin-bottom: 0.4rem;
                letter-spacing: -0.05em;
            }
            
            .hero-slide-subtitle {
                font-size: clamp(0.68rem, 1.85vw, 0.8rem);
                margin-bottom: 0.7rem;
            }
            
            .hero-nav-btn {
                width: 28px;
                height: 28px;
            }
            
            .hero-nav-btn i {
                font-size: 0.75rem;
            }
            
            .hero-slide-cta {
                padding: 0.45rem 0.9rem;
                font-size: clamp(0.68rem, 1.7vw, 0.78rem);
            }
        }
        
        /* Landscape Mobile Optimization */
        @media (max-height: 500px) and (orientation: landscape) {
            #hero-banner-slider {
                min-height: 100vh;
                height: 100vh;
            }
            
            .hero-slide-content {
                padding: 0.75rem 1rem;
                max-width: 70%;
                transform: translate(-50%, -50%) scale(0.9);
            }
            
            .hero-slide-title {
                font-size: clamp(1.2rem, 3.5vw, 1.8rem);
                margin-bottom: 0.4rem;
            }
            
            .hero-slide-subtitle {
                font-size: clamp(0.75rem, 1.8vw, 0.95rem);
                margin-bottom: 0.6rem;
            }
            
            .hero-slide-cta {
                padding: 0.5rem 1.2rem;
                font-size: clamp(0.72rem, 1.6vw, 0.85rem);
            }
            
            .hero-nav-btn {
                width: 32px;
                height: 32px;
            }
            
            .hero-slide-dots {
                bottom: 0.75rem;
            }
            
            .hero-dot {
                width: 8px;
                height: 8px;
            }
        }
        
        /* Ensure no empty space in slider container */
        @media (max-width: 768px) {
            .hero-slide-item {
                background-size: cover;
                background-position: center;
            }
            
            .hero-slide-image-container {
                min-height: 200px;
            }
            
            .hero-slide-image {
                width: 100%;
                height: auto;
                min-height: 200px;
            }
        }
        
        /* Accessibility */
        .hero-nav-btn:focus,
        .hero-dot:focus {
            outline: 3px solid rgba(147, 51, 234, 0.6);
            outline-offset: 2px;
        }
        
        /* Loading State */
        .hero-slider-loading {
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
    
    <!-- Section 1: Astrological Services -->
    <section id="services" class="py-10 md:py-14 bg-gradient-to-br from-white to-purple-50">
        <div class="container mx-auto px-4 sm:px-6">
            <!-- Section Header -->
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 mb-2 font-serif">
                    Astrological Services
                </h2>
                <p class="text-sm sm:text-base text-gray-600 max-w-2xl mx-auto">
                    Discover ancient wisdom through our comprehensive astrological services
                </p>
                <div class="w-20 h-1 bg-gradient-to-r from-purple-600 to-pink-600 mx-auto mt-4 rounded-full"></div>
            </div>
            
            <!-- Services Grid -->
            <div id="astrological-services-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 sm:gap-6 max-w-6xl mx-auto">
                <!-- Services will be dynamically loaded -->
            </div>
        </div>
    </section>

     <!-- Gallery Section - SINGLE HORIZONTAL ROW ON ALL DEVICES -->
    <section id="gallery" class="py-10 md:py-14 bg-gradient-to-r from-purple-100 to-pink-100" style="overflow: hidden;">
        <div class="container mx-auto px-4" style="overflow: hidden;">
            <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-center mb-2 font-serif text-purple-800">Our Gallery</h2>
            <p class="text-center text-gray-600 mb-8 text-sm sm:text-base">Glimpses of cosmic connections</p>
                <div class="relative" style="overflow: visible;">
                <!-- Navigation Arrows - Aligned to card height -->
                <button id="gallery-prev" class="absolute top-1/2 -translate-y-1/2 z-10 bg-white text-purple-800 rounded-full p-3 shadow-lg hover:bg-purple-50" style="left: -1.25rem;">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <button id="gallery-next" class="absolute top-1/2 -translate-y-1/2 z-10 bg-white text-purple-800 rounded-full p-3 shadow-lg hover:bg-purple-50" style="right: -1.25rem;">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
                
                <!-- Horizontal Slider Container - NO SCROLLBARS, single row always, auto-moving -->
                <div style="overflow: hidden; padding: 0 1.25rem;">
                    <div id="gallery-slides-container" style="display: flex !important; flex-wrap: nowrap !important; gap: 1rem; overflow: hidden !important; scroll-behavior: smooth;">
                        <!-- Gallery slides will be loaded from API -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 2: Pooja & Ritual Services -->
    <section id="pooja" class="py-10 md:py-14 bg-gradient-to-br from-amber-50 via-orange-50 to-red-50">
        <div class="container mx-auto px-4">
            <!-- Section Header -->
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 mb-2 font-serif">
                    Pooja & Ritual Services
                </h2>
                <p class="text-sm sm:text-base text-gray-600 max-w-2xl mx-auto">
                    Experience divine blessings through traditional poojas performed with devotion
                </p>
                <div class="w-20 h-1 bg-gradient-to-r from-amber-500 to-red-500 mx-auto mt-4 rounded-full"></div>
            </div>
            
            <!-- Pooja Grid -->
            <div id="pooja-services-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 sm:gap-6 max-w-6xl mx-auto">
                <!-- Poojas will be dynamically loaded -->
            </div>
        </div>
    </section>

    <!-- Section 3: Expert Solutions -->
    <section id="expert-solutions" class="py-10 md:py-14 bg-white">
        <div class="container mx-auto px-4">
            <!-- Section Header -->
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 mb-2 font-serif">
                    Expert Solutions
                </h2>
                <p class="text-sm sm:text-base text-gray-600 max-w-2xl mx-auto">
                    Personalized guidance for life's most challenging situations
                </p>
                <div class="w-20 h-1 bg-gradient-to-r from-purple-600 to-pink-600 mx-auto mt-4 rounded-full"></div>
            </div>
            
            <!-- Solutions Cards -->
            <div id="expert-solutions-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
                <!-- Solutions will be dynamically loaded -->
            </div>
        </div>
    </section>

    <!-- Client Reviews Section - NEW MODERN DYNAMIC DESIGN -->
    <section id="reviews" class="py-12 md:py-16 lg:py-20 bg-gradient-to-br from-purple-50 via-white to-pink-50 relative overflow-hidden">
        <!-- Decorative Background Elements -->
        <div class="absolute top-0 left-0 w-64 h-64 bg-purple-200 rounded-full filter blur-3xl opacity-20 -translate-x-1/2 -translate-y-1/2"></div>
        <div class="absolute bottom-0 right-0 w-96 h-96 bg-pink-200 rounded-full filter blur-3xl opacity-20 translate-x-1/2 translate-y-1/2"></div>
        
        <div class="container mx-auto px-4 sm:px-6 relative z-10">
            <!-- Modern Section Header -->
            <div class="text-center mb-10 md:mb-14">
                <div class="inline-block">
                    <span class="text-purple-600 font-semibold text-sm md:text-base uppercase tracking-wider mb-2 block">Testimonials</span>
                    <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-700 to-pink-600 bg-clip-text text-transparent mb-3 font-serif">What Our Clients Say</h2>
                    <div class="flex items-center justify-center gap-2 mt-4">
                        <div class="h-1 w-12 bg-gradient-to-r from-purple-600 to-transparent rounded-full"></div>
                        <i class="fas fa-star text-yellow-400 text-xl"></i>
                        <div class="h-1 w-12 bg-gradient-to-l from-pink-600 to-transparent rounded-full"></div>
                    </div>
                </div>
                <p class="text-gray-600 mt-4 max-w-2xl mx-auto text-sm sm:text-base">Discover the transformative experiences of our valued clients</p>
            </div>

            <!-- Reviews Grid - Auto-scrolling Carousel -->
            <div class="relative">
                <div class="overflow-hidden" id="reviews-track-wrapper">
                    <div id="reviews-carousel" class="flex gap-6 transition-transform duration-500 ease-linear" style="will-change: transform;">
                        <!-- Dynamic review cards will be injected here -->
                    </div>
                </div>
                
                <!-- Navigation Arrows - Visible on ALL devices -->
                <button id="reviews-prev" class="absolute left-0 sm:left-2 top-1/2 -translate-y-1/2 -translate-x-2 sm:-translate-x-4 bg-white hover:bg-purple-50 text-purple-600 rounded-full p-2 sm:p-3 shadow-lg hover:shadow-xl transition-all duration-300 z-20 flex items-center justify-center group touch-manipulation">
                    <i class="fas fa-chevron-left text-base sm:text-lg group-hover:scale-110 transition-transform"></i>
                </button>
                <button id="reviews-next" class="absolute right-0 sm:right-2 top-1/2 -translate-y-1/2 translate-x-2 sm:translate-x-4 bg-white hover:bg-purple-50 text-purple-600 rounded-full p-2 sm:p-3 shadow-lg hover:shadow-xl transition-all duration-300 z-20 flex items-center justify-center group touch-manipulation">
                    <i class="fas fa-chevron-right text-base sm:text-lg group-hover:scale-110 transition-transform"></i>
                </button>
            </div>
            
            <!-- Review Stats -->
            <div class="mt-10 md:mt-14 grid grid-cols-3 gap-4 md:gap-6 max-w-3xl mx-auto">
                <div class="text-center p-4 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow">
                    <div class="text-2xl md:text-3xl font-bold text-purple-600 mb-1">500+</div>
                    <div class="text-xs md:text-sm text-gray-600">Happy Clients</div>
                </div>
                <div class="text-center p-4 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow">
                    <div class="text-2xl md:text-3xl font-bold text-pink-600 mb-1">4.9/5</div>
                    <div class="text-xs md:text-sm text-gray-600">Average Rating</div>
                </div>
                <div class="text-center p-4 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow">
                    <div class="text-2xl md:text-3xl font-bold text-purple-600 mb-1">98%</div>
                    <div class="text-xs md:text-sm text-gray-600">Satisfaction</div>
                </div>
            </div>
        </div>
    </section>
    
    <style>
    /* Modern Review Cards Styling - Fully Responsive */
    .review-card-modern {
        flex: 0 0 auto;
        width: 90vw;
        max-width: 360px;
        background: white;
        border-radius: 20px;
        padding: 1.5rem;
        box-shadow: 0 4px 20px rgba(147, 51, 234, 0.08);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border: 1px solid rgba(147, 51, 234, 0.1);
        position: relative;
        overflow: hidden;
    }
    
    .review-card-modern::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(90deg, #9333EA, #EC4899);
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.4s ease;
    }
    
    .review-card-modern:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 12px 35px rgba(147, 51, 234, 0.15);
    }
    
    .review-card-modern:hover::before {
        transform: scaleX(1);
    }
    
    .review-quote-icon {
        font-size: 2rem;
        color: rgba(147, 51, 234, 0.15);
        position: absolute;
        top: 1rem;
        right: 1rem;
    }
    
    @media (max-width: 640px) {
        .review-card-modern {
            width: 85vw;
            max-width: 320px;
            padding: 1.25rem;
        }
        .review-quote-icon {
            font-size: 1.5rem;
        }
    }
    
    @media (min-width: 641px) and (max-width: 1024px) {
        .review-card-modern {
            width: 45vw;
            max-width: 340px;
            padding: 1.5rem;
        }
    }
    
    @media (min-width: 1025px) {
        .review-card-modern {
            width: 360px;
            padding: 2rem;
        }
    }
    </style>

    <!-- About Section -->
    <section id="about" class="py-10 md:py-14 bg-gradient-to-br from-purple-50 via-pink-50 to-purple-50" style="overflow: visible;">
        </style>
        <!-- Hide scrollbars for About Our Astrologer section -->
        <style>
        #about, #about * {
            overflow: visible !important;
            scrollbar-width: none !important;
        }
        #about::-webkit-scrollbar, #about *::-webkit-scrollbar {
            display: none !important;
        }
        </style>
        <div class="container mx-auto px-4">
            <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-center mb-6 font-serif text-purple-800">About Our Astrologer</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12 items-center max-w-6xl mx-auto">
                <div class="order-2 md:order-1 slide-in-left">
                    <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl">
                        <h3 id="about-title" class="text-xl md:text-2xl font-bold mb-3 md:mb-4 text-purple-800">Loading...</h3>
                        <p id="about-description" class="text-sm md:text-base text-gray-700 leading-relaxed mb-4 md:mb-6">Loading...</p>
                        <div id="about-details" class="space-y-3">
                            <!-- Details will be loaded from API -->
                        </div>
                    </div>
                </div>
                <div class="order-1 md:order-2 slide-in-right">
                    <div class="relative about-visual">
                        <div class="absolute inset-0 bg-gradient-to-br from-purple-400 to-pink-400 rounded-2xl md:rounded-3xl transform rotate-3"></div>
                        <div class="relative rounded-2xl md:rounded-3xl shadow-2xl overflow-hidden image-zoom" style="height: auto; max-height: none;">
                            <img id="about-image" 
                                 src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='600' height='400'%3E%3Crect fill='%23e5e7eb' width='600' height='400'/%3E%3C/svg%3E" 
                                 alt="Astrologer" 
                                 class="w-full h-auto object-cover"
                                 style="max-height: 600px; height: auto;"
                                 loading="lazy">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Form Section - Modern Two-Column Layout -->
    <section id="contact" class="py-12 md:py-16 bg-gradient-to-br from-gray-50 to-purple-50">
        <div class="container mx-auto px-4 sm:px-6">
            <!-- Section Header -->
            <div class="text-center mb-8 md:mb-10">
                <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold text-purple-600 font-serif italic">Contact Us</h2>
                <p class="text-gray-600 text-base sm:text-lg mt-2">Get in touch with our experts</p>
            </div>
            
            <!-- Two Column Layout -->
            <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8">
                
                <!-- Left Column - Contact Form -->
                <div class="bg-white rounded-2xl shadow-lg p-6 sm:p-8 border border-gray-100">
                    <form id="contact-form-home" class="space-y-4">
                        <div>
                            <input type="text" id="contact-name" name="name" required placeholder="Your Name"
                                   class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none text-gray-700 placeholder-gray-400 transition">
                        </div>
                        <div>
                            <input type="email" id="contact-email" name="email" placeholder="Your Email"
                                   class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none text-gray-700 placeholder-gray-400 transition">
                        </div>
                        <div>
                            <input type="tel" id="contact-phone" name="phone" required placeholder="Phone Number"
                                   class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none text-gray-700 placeholder-gray-400 transition">
                        </div>
                        <div>
                            <select id="contact-topic" name="topic" required
                                   class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none text-gray-700 transition appearance-none bg-white cursor-pointer" style="background-image: url('data:image/svg+xml;utf8,<svg fill=\'gray\' height=\'24\' viewBox=\'0 0 24 24\' width=\'24\' xmlns=\'http://www.w3.org/2000/svg\'><path d=\'M7 10l5 5 5-5z\'/></svg>'); background-repeat: no-repeat; background-position: right 12px center;">
                                <option value="" disabled selected>Select Subject</option>
                                <option value="Astrology Consultation">üåü Astrology Consultation</option>
                                <option value="Horoscope Reading">üìú Horoscope Reading</option>
                                <option value="Marriage Compatibility">üíë Marriage Compatibility</option>
                                <option value="Career Guidance">üíº Career Guidance</option>
                                <option value="Pooja Services">üôè Pooja Services</option>
                                <option value="Vastu Consultation">üè† Vastu Consultation</option>
                                <option value="Gemstone Recommendation">üíé Gemstone Recommendation</option>
                                <option value="Numerology">üî¢ Numerology</option>
                                <option value="Palm Reading">‚úã Palm Reading</option>
                                <option value="General Inquiry">‚ùì General Inquiry</option>
                                <option value="Other">üìù Other</option>
                            </select>
                        </div>
                        <div>
                            <textarea id="contact-message" name="message" rows="4" required placeholder="Your Message"
                                      class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 focus:outline-none text-gray-700 placeholder-gray-400 transition resize-none"></textarea>
                        </div>
                        <div>
                            <button type="submit" 
                                    class="w-full bg-gradient-to-r from-purple-600 to-purple-700 text-white px-4 sm:px-6 py-3 sm:py-3.5 rounded-xl font-semibold text-sm sm:text-base hover:shadow-xl hover:from-purple-700 hover:to-purple-800 transition-all flex items-center justify-center gap-2 min-h-[44px]">
                                <i class="fas fa-paper-plane"></i>
                                <span>Send Message</span>
                            </button>
                        </div>
                        <div id="contact-form-message" class="hidden mt-3"></div>
                    </form>
                </div>
                
                <!-- Right Column - Contact Info Cards -->
                <div class="space-y-4">
                    <!-- Phone Card -->
                    <div class="bg-white rounded-2xl shadow-lg p-5 sm:p-6 border border-gray-100 flex items-center gap-4 hover:shadow-xl transition">
                        <div class="w-12 h-12 sm:w-14 sm:h-14 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-phone-alt text-purple-600 text-xl sm:text-2xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-lg">Phone</h3>
                            <p id="contact-phone-display" class="text-gray-600">+91 98765 43210</p>
                        </div>
                    </div>
                    
                    <!-- Email Card -->
                    <div class="bg-white rounded-2xl shadow-lg p-5 sm:p-6 border border-gray-100 flex items-center gap-4 hover:shadow-xl transition">
                        <div class="w-12 h-12 sm:w-14 sm:h-14 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-envelope text-purple-600 text-xl sm:text-2xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-lg">Email</h3>
                            <p id="contact-email-display" class="text-gray-600">info@omsrimahakali.com</p>
                        </div>
                    </div>
                    
                    <!-- Address Card with Location Button -->
                    <div class="bg-white rounded-2xl shadow-lg p-5 sm:p-6 border border-gray-100 hover:shadow-xl transition">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 sm:w-14 sm:h-14 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-map-marker-alt text-purple-600 text-xl sm:text-2xl"></i>
                            </div>
                            <div class="flex-1">
                                <h3 class="font-bold text-gray-800 text-lg">Address</h3>
                                <p id="contact-address-display" class="text-gray-600">Bangalore, Karnataka, India</p>
                            </div>
                        </div>
                        <a href="https://maps.app.goo.gl/BW9z2nUJvtkrYfVy8" id="location-map-btn" target="_blank" rel="noopener noreferrer" class="mt-3 inline-flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2.5 rounded-lg font-semibold text-sm sm:text-base shadow-md transition-all hover:shadow-lg min-h-[44px] w-full sm:w-auto">
                            <i class="fas fa-map-marker-alt text-base"></i>
                            <span> Live Location</span>
                        </a>
                    </div>
                    
                    <!-- Business Hours Card -->
                    <div class="bg-white rounded-2xl shadow-lg p-5 sm:p-6 border border-gray-100 flex items-center gap-4 hover:shadow-xl transition">
                        <div class="w-12 h-12 sm:w-14 sm:h-14 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-clock text-purple-600 text-xl sm:text-2xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-lg">Hours</h3>
                            <p id="contact-hours-display" class="text-gray-600">Mon-Sun: 9AM - 8PM</p>
                        </div>
                    </div>
                    
                    <!-- Quick Action Buttons -->
                    <div class="flex flex-wrap gap-3 pt-2">
                        <a href="tel:+919876543210" id="quick-call-btn" class="flex-1 min-w-[140px] inline-flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-xl font-semibold text-sm sm:text-base shadow-lg transition min-h-[44px]">
                            <i class="fas fa-phone-alt"></i>
                            <span>Call Now</span>
                        </a>
                        <a href="https://wa.me/919876543210?text=%F0%9F%99%8F%20Namaste!%20I%20am%20interested%20in%20your%20astrology%20services.%20Please%20guide%20me%20with%20consultation%20details%2C%20timings%2C%20and%20pricing.%20Thank%20you!" id="quick-whatsapp-btn" target="_blank" class="flex-1 min-w-[140px] inline-flex items-center justify-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-3 rounded-xl font-semibold text-sm sm:text-base shadow-lg transition min-h-[44px]">
                            <i class="fab fa-whatsapp"></i>
                            <span>WhatsApp</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="py-10 md:py-14 bg-gradient-to-r from-purple-100 to-pink-100">
        <div class="container mx-auto px-4 max-w-4xl">
            <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-center mb-2 font-serif text-purple-800">Frequently Asked Questions</h2>
            <p class="text-center text-gray-600 mb-6 text-sm sm:text-base">Your cosmic queries answered</p>
            
            <!-- Language Toggle -->
            <div class="flex justify-center mb-6">
                <div class="bg-white rounded-full p-1 shadow-md">
                    <button onclick="showFAQLang('english')" id="faq-en-btn" class="px-4 sm:px-6 py-1.5 sm:py-2 rounded-full font-semibold text-sm sm:text-base bg-purple-600 text-white">
                        English
                    </button>
                    <button onclick="showFAQLang('kannada')" id="faq-kn-btn" class="px-4 sm:px-6 py-1.5 sm:py-2 rounded-full font-semibold text-sm sm:text-base text-gray-700 hover:bg-gray-100">
                        ‡≤ï‡≤®‡≥ç‡≤®‡≤°
                    </button>
                </div>
            </div>
            
            <!-- English FAQs -->
            <div id="faq-english" class="space-y-3">
                <div class="bg-white rounded-lg shadow-md">
                    <button class="faq-question w-full text-left p-3 sm:p-4 font-bold text-purple-800 flex justify-between items-center text-sm sm:text-base">
                        What is astrology and how does it work?
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="faq-answer hidden p-4 text-gray-700">
                        Astrology is an ancient science that studies the influence of celestial bodies on human affairs and terrestrial events. It analyzes planetary positions at your birth time to provide insights into your personality, relationships, career, and life path.
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-md">
                    <button class="faq-question w-full text-left p-4 font-bold text-purple-800 flex justify-between items-center">
                        How accurate are astrological predictions?
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="faq-answer hidden p-4 text-gray-700">
                        Accuracy depends on the astrologer's expertise and the precision of birth data. Our experienced practitioners provide highly accurate readings based on Vedic astrology principles with years of study and practice.
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-md">
                    <button class="faq-question w-full text-left p-4 font-bold text-purple-800 flex justify-between items-center">
                        What information do I need for a kundali reading?
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="faq-answer hidden p-4 text-gray-700">
                        You need your exact date of birth, time of birth (as accurate as possible), and place of birth for an accurate kundali analysis. If birth time is unknown, we can work with date and location for a basic reading.
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-md">
                    <button class="faq-question w-full text-left p-4 font-bold text-purple-800 flex justify-between items-center">
                        How long does a consultation typically take?
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="faq-answer hidden p-4 text-gray-700">
                        Most consultations last 45-60 minutes, allowing time for detailed analysis, answering your specific questions, and providing remedies or guidance.
                    </div>
                </div>
            </div>
            
            <!-- Kannada FAQs -->
            <div id="faq-kannada" class="space-y-4 hidden">
                <div class="bg-white rounded-lg shadow-md">
                    <button class="faq-question w-full text-left p-4 font-bold text-purple-800 flex justify-between items-center">
                        ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤é‡≤Ç‡≤¶‡≤∞‡≥á‡≤®‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Ö‡≤¶‡≥Å ‡≤π‡≥á‡≤ó‡≥Ü ‡≤ï‡≥Ü‡≤≤‡≤∏ ‡≤Æ‡≤æ‡≤°‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü?
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="faq-answer hidden p-4 text-gray-700">
                        ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø‡≤µ‡≥Å ‡≤Æ‡≤æ‡≤®‡≤µ ‡≤µ‡≥ç‡≤Ø‡≤µ‡≤π‡≤æ‡≤∞‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤≠‡≥Ç‡≤Æ‡≤ø‡≤Ø ‡≤ò‡≤ü‡≤®‡≥Ü‡≤ó‡≤≥ ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤Ü‡≤ï‡≤æ‡≤∂ ‡≤ï‡≤æ‡≤Ø‡≤ó‡≤≥ ‡≤™‡≥ç‡≤∞‡≤≠‡≤æ‡≤µ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤Ö‡≤ß‡≥ç‡≤Ø‡≤Ø‡≤® ‡≤Æ‡≤æ‡≤°‡≥Å‡≤µ ‡≤™‡≥ç‡≤∞‡≤æ‡≤ö‡≥Ä‡≤® ‡≤µ‡≤ø‡≤ú‡≥ç‡≤û‡≤æ‡≤®‡≤µ‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü. ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤µ‡≥ç‡≤Ø‡≤ï‡≥ç‡≤§‡≤ø‡≤§‡≥ç‡≤µ, ‡≤∏‡≤Ç‡≤¨‡≤Ç‡≤ß‡≤ó‡≤≥‡≥Å, ‡≤µ‡≥É‡≤§‡≥ç‡≤§‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤ú‡≥Ä‡≤µ‡≤® ‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ó‡≤¶ ‡≤¨‡≤ó‡≥ç‡≤ó‡≥Ü ‡≤í‡≤≥‡≤®‡≥ã‡≤ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≥Ä‡≤°‡≤≤‡≥Å ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤ú‡≤®‡≤® ‡≤∏‡≤Æ‡≤Ø‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ó‡≥ç‡≤∞‡≤π‡≤ó‡≤≥ ‡≤∏‡≥ç‡≤•‡≤æ‡≤®‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤µ‡≤ø‡≤∂‡≥ç‡≤≤‡≥á‡≤∑‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-md">
                    <button class="faq-question w-full text-left p-4 font-bold text-purple-800 flex justify-between items-center">
                        ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤≠‡≤µ‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤é‡≤∑‡≥ç‡≤ü‡≥Å ‡≤®‡≤ø‡≤ñ‡≤∞‡≤µ‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü?
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="faq-answer hidden p-4 text-gray-700">
                        ‡≤®‡≤ø‡≤ñ‡≤∞‡≤§‡≥Ü‡≤Ø‡≥Å ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≤ø‡≤Ø ‡≤™‡≤∞‡≤ø‡≤£‡≤§‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤ú‡≤®‡≤® ‡≤¶‡≤§‡≥ç‡≤§‡≤æ‡≤Ç‡≤∂‡≤¶ ‡≤®‡≤ø‡≤ñ‡≤∞‡≤§‡≥Ü‡≤Ø ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤Ö‡≤µ‡≤≤‡≤Ç‡≤¨‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü. ‡≤®‡≤Æ‡≥ç‡≤Æ ‡≤Ö‡≤®‡≥Å‡≤≠‡≤µ‡≤ø ‡≤µ‡≥É‡≤§‡≥ç‡≤§‡≤ø‡≤™‡≤∞‡≤∞‡≥Å ‡≤µ‡≥á‡≤¶ ‡≤ú‡≥ç‡≤Ø‡≥ã‡≤§‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤§‡≤§‡≥ç‡≤µ‡≤ó‡≤≥ ‡≤Ü‡≤ß‡≤æ‡≤∞‡≤¶ ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤Ö‡≤§‡≥ç‡≤Ø‡≤Ç‡≤§ ‡≤®‡≤ø‡≤ñ‡≤∞‡≤µ‡≤æ‡≤¶ ‡≤µ‡≤æ‡≤ö‡≤®‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤í‡≤¶‡≤ó‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤æ‡≤∞‡≥Ü.
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-md">
                    <button class="faq-question w-full text-left p-4 font-bold text-purple-800 flex justify-between items-center">
                        ‡≤ï‡≥Å‡≤Ç‡≤°‡≤≤‡≤ø ‡≤ì‡≤¶‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü‡≤ó‡≥Ü ‡≤®‡≤®‡≤ó‡≥Ü ‡≤Ø‡≤æ‡≤µ ‡≤Æ‡≤æ‡≤π‡≤ø‡≤§‡≤ø ‡≤¨‡≥á‡≤ï‡≥Å?
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="faq-answer hidden p-4 text-gray-700">
                        ‡≤®‡≤ø‡≤ñ‡≤∞‡≤µ‡≤æ‡≤¶ ‡≤ï‡≥Å‡≤Ç‡≤°‡≤ø ‡≤µ‡≤ø‡≤∂‡≥ç‡≤≤‡≥á‡≤∑‡≤£‡≥Ü‡≤ó‡≤æ‡≤ó‡≤ø ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤®‡≤ø‡≤ñ‡≤∞ ‡≤ú‡≤®‡≥ç‡≤Æ ‡≤¶‡≤ø‡≤®‡≤æ‡≤Ç‡≤ï, ‡≤ú‡≤®‡≤® ‡≤∏‡≤Æ‡≤Ø (‡≤∏‡≤æ‡≤ß‡≥ç‡≤Ø‡≤µ‡≤æ‡≤¶‡≤∑‡≥ç‡≤ü‡≥Å ‡≤®‡≤ø‡≤ñ‡≤∞), ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤ú‡≤®‡≤® ‡≤∏‡≥ç‡≤•‡≤≥ ‡≤¨‡≥á‡≤ï‡≥Å. ‡≤ú‡≤®‡≤® ‡≤∏‡≤Æ‡≤Ø ‡≤§‡≤ø‡≤≥‡≤ø‡≤¶‡≤ø‡≤≤‡≥ç‡≤≤‡≤¶‡≤ø‡≤¶‡≥ç‡≤¶‡≤∞‡≥Ü, ‡≤Æ‡≥Ç‡≤≤‡≤≠‡≥Ç‡≤§ ‡≤ì‡≤¶‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü‡≤ó‡≤æ‡≤ó‡≤ø ‡≤®‡≤æ‡≤µ‡≥Å ‡≤¶‡≤ø‡≤®‡≤æ‡≤Ç‡≤ï ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∏‡≥ç‡≤•‡≤≥‡≤¶‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤ï‡≥Ü‡≤≤‡≤∏ ‡≤Æ‡≤æ‡≤°‡≤¨‡≤π‡≥Å‡≤¶‡≥Å.
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-md">
                    <button class="faq-question w-full text-left p-4 font-bold text-purple-800 flex justify-between items-center">
                        ‡≤∏‡≤Æ‡≤æ‡≤≤‡≥ã‡≤ö‡≤®‡≥Ü ‡≤∏‡≤æ‡≤Æ‡≤æ‡≤®‡≥ç‡≤Ø‡≤µ‡≤æ‡≤ó‡≤ø ‡≤é‡≤∑‡≥ç‡≤ü‡≥Å ‡≤∏‡≤Æ‡≤Ø ‡≤§‡≥Ü‡≤ó‡≥Ü‡≤¶‡≥Å‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü?
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="faq-answer hidden p-4 text-gray-700">
                        ‡≤π‡≥Ü‡≤ö‡≥ç‡≤ö‡≤ø‡≤® ‡≤∏‡≤Æ‡≤æ‡≤≤‡≥ã‡≤ö‡≤®‡≥Ü‡≤ó‡≤≥‡≥Å 45-60 ‡≤®‡≤ø‡≤Æ‡≤ø‡≤∑‡≤ó‡≤≥ ‡≤ï‡≤æ‡≤≤ ‡≤®‡≤°‡≥Ü‡≤Ø‡≥Å‡≤§‡≥ç‡≤§‡≤µ‡≥Ü, ‡≤µ‡≤ø‡≤µ‡≤∞‡≤µ‡≤æ‡≤¶ ‡≤µ‡≤ø‡≤∂‡≥ç‡≤≤‡≥á‡≤∑‡≤£‡≥Ü, ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤®‡≤ø‡≤∞‡≥ç‡≤¶‡≤ø‡≤∑‡≥ç‡≤ü ‡≤™‡≥ç‡≤∞‡≤∂‡≥ç‡≤®‡≥Ü‡≤ó‡≤≥‡≤ø‡≤ó‡≥Ü ‡≤â‡≤§‡≥ç‡≤§‡≤∞‡≤ø‡≤∏‡≤≤‡≥Å, ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤™‡≤∞‡≤ø‡≤π‡≤æ‡≤∞‡≤ó‡≤≥‡≥Å ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ó‡≤¶‡≤∞‡≥ç‡≤∂‡≤®‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≥Ä‡≤°‡≤≤‡≥Å ‡≤∏‡≤Æ‡≤Ø ‡≤®‡≥Ä‡≤°‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Chatbot Widget - Floating Icon + Chat Window -->
    <div id="chatbot-backdrop" class="chatbot-backdrop"></div>
    <div id="chatbot-widget" class="chatbot-widget">
        <button id="chatbot-toggle" class="chatbot-icon" aria-label="Open chat">
            <i class="fas fa-comments"></i>
        </button>
        <div id="chatbot-window" class="chatbot-window hidden">
            <div class="chatbot-header">
                <div class="flex items-center gap-3">
                    <i class="fas fa-robot text-2xl"></i>
                    <div>
                        <h3 class="font-bold text-lg">Astrology Assistant</h3>
                        <p class="text-xs opacity-90">Ask me anything!</p>
                    </div>
                </div>
                <button id="chatbot-close" class="chatbot-close-btn" aria-label="Close chat">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="chatbot-messages" class="chatbot-messages">
                <div class="message bot-message">
                    <i class="fas fa-robot message-icon"></i>
                    <div class="message-content">
                        <p>üôè Namaste! Welcome to our Astrology Center. How can I help you today?</p>
                    </div>
                </div>
            </div>
            <!-- Menu Options - Above Input Field with Scrolling -->
            <div id="chatbot-menu-options" class="chatbot-menu-options" style="border-top: 1px solid #e5e7eb; padding: 12px; background: #f9fafb; overflow-x: auto; overflow-y: hidden; max-height: 120px;">
                <div style="display: flex; gap: 8px; flex-wrap: nowrap; min-width: max-content;">
                    <button onclick="sendMenuOption('services')" class="chatbot-menu-btn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 10px 16px; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 12px; white-space: nowrap; min-width: 100px; flex-shrink: 0;">
                        üåü Services
                    </button>
                    <button onclick="sendMenuOption('book')" class="chatbot-menu-btn" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 10px 16px; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 12px; white-space: nowrap; min-width: 100px; flex-shrink: 0;">
                        üìÖ Book Now
                    </button>
                    <button onclick="sendMenuOption('hours')" class="chatbot-menu-btn" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 10px 16px; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 12px; white-space: nowrap; min-width: 100px; flex-shrink: 0;">
                        ‚è∞ Hours
                    </button>
                    <button onclick="sendMenuOption('location')" class="chatbot-menu-btn" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; padding: 10px 16px; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 12px; white-space: nowrap; min-width: 100px; flex-shrink: 0;">
                        üìç Location
                    </button>
                    <button onclick="sendMenuOption('contact')" class="chatbot-menu-btn" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white; padding: 10px 16px; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 12px; white-space: nowrap; min-width: 100px; flex-shrink: 0;">
                        üìû Contact
                    </button>
                    <button onclick="sendMenuOption('social')" class="chatbot-menu-btn" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); color: white; padding: 10px 16px; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 12px; white-space: nowrap; min-width: 100px; flex-shrink: 0;">
                        üì± Social
                    </button>
                    <button onclick="sendMenuOption('qa')" class="chatbot-menu-btn" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #333; padding: 10px 16px; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 12px; white-space: nowrap; min-width: 100px; flex-shrink: 0;">
                        ‚ùì FAQ
                    </button>
                    <button onclick="contactViaWhatsApp()" class="chatbot-menu-btn" style="background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); color: white; padding: 10px 16px; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 12px; white-space: nowrap; min-width: 100px; flex-shrink: 0;">
                        üí¨ WhatsApp
                    </button>
                    <button onclick="contactViaCall()" class="chatbot-menu-btn" style="background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%); color: white; padding: 10px 16px; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 12px; white-space: nowrap; min-width: 100px; flex-shrink: 0;">
                        üìû Call
                    </button>
                </div>
            </div>
            <div class="chatbot-input-area">
                <input type="text" id="chatbot-input" placeholder="Type your message..." />
                <button id="chatbot-send" aria-label="Send message">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

     <footer class="bg-gradient-to-br from-gray-900 via-purple-900 to-black text-white py-3 md:py-4" style="margin-bottom: 0; padding-bottom: 0; position: relative; clear: both;">
        <div class="container mx-auto px-4 sm:px-6">
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 md:gap-4">
                <div>
                    <h3 class="text-sm md:text-base font-bold mb-1.5 font-serif text-yellow-300">Sri Mahakali Bhairavi Astrology Center</h3>
                    <p class="text-gray-300 text-xs md:text-sm leading-relaxed">Your trusted guide to cosmic wisdom and spiritual enlightenment.</p>
                </div>
                <div>
                    <h4 class="text-xs md:text-sm font-bold mb-1.5 text-yellow-300">Quick Links</h4>
                    <ul class="space-y-0.5">
                        <li><a href="/" class="hover:text-yellow-300 transition text-xs md:text-sm"><i class="fas fa-home mr-2"></i>Home</a></li>
                        <li><a href="#services" class="hover:text-yellow-300 transition text-xs md:text-sm"><i class="fas fa-star mr-2"></i>Services</a></li>
                        <li><a href="#contact" class="hover:text-yellow-300 transition text-xs md:text-sm"><i class="fas fa-envelope mr-2"></i>Contact</a></li>
                        <li><a href="#reviews" class="hover:text-yellow-300 transition text-xs md:text-sm"><i class="fas fa-comments mr-2"></i>Reviews</a></li>
                        <li><a href="/privacy" class="hover:text-yellow-300 transition text-xs md:text-sm"><i class="fas fa-shield-alt mr-2"></i>Privacy Policy</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-xs md:text-sm font-bold mb-1.5 text-yellow-300">Contact Us</h4>
                    <div id="footer-contact-info" class="space-y-1">
                        <p class="text-xs md:text-sm"><i class="fas fa-phone mr-2 text-yellow-300"></i><span id="footer-phone">Loading...</span></p>
                        <p class="text-xs md:text-sm"><i class="fas fa-envelope mr-2 text-yellow-300"></i><span id="footer-email">Loading...</span></p>
                        <div id="footer-socials" class="flex space-x-2 mt-1.5">
                            <!-- Social links loaded from API -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="border-t border-purple-600 mt-3 pt-2 text-center text-purple-200">
                <p class="text-xs md:text-sm">&copy; 2025 Sri Mahakali Bhairavi Astrology Center. All rights reserved.</p>
                <p class="mt-0.5 text-xs">
                    Developed by <a href="https://omkargouda.netlify.app/" target="_blank" class="text-yellow-300 hover:text-yellow-400 transition inline-flex items-center gap-1">
                        <i class="fas fa-briefcase"></i>
                        Omkar Gouda
                    </a>
                </p>
            </div>
        </div>
    </footer>
<script>

    
        // Page initialization - Load all data
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('Page loaded successfully');
            console.log('Backend ready');
            
            // Initialize chatbot
            initChatbot();
            
            // Initialize mobile menu controls
            const hamburgerBtn = document.getElementById('hamburger-btn');
            const mobileMenuClose = document.getElementById('mobile-menu-close');
            const mobileBackdrop = document.getElementById('mobile-nav-backdrop');
            
            if (hamburgerBtn) {
                hamburgerBtn.addEventListener('click', toggleMobileMenu);
            }
            
            if (mobileMenuClose) {
                mobileMenuClose.addEventListener('click', closeMobileMenu);
            }
            
            if (mobileBackdrop) {
                mobileBackdrop.addEventListener('click', closeMobileMenu);
            }
            
            // Keyboard navigation - ESC to close menu
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    const menu = document.getElementById('mobile-nav-menu');
                    if (menu && menu.classList.contains('show')) {
                        closeMobileMenu();
                    }
                }
            });
            
            // Close menu on window resize to desktop
            window.addEventListener('resize', () => {
                if (window.innerWidth >= 1024) {
                    closeMobileMenu();
                }
            });
            
            // Load navbar first
            await loadNavbar();
            await loadAnnouncementBar();
            
            // Load all sections
            await loadHeroBannerSlider();
            await loadGallerySlides();
            await loadAboutSection();
            await loadAstrologicalServices();
            await loadPoojaServices();
            await loadExpertSolutions();
            await loadContactInfo();
            
            // All content loaded successfully
            console.log('‚úÖ All content loaded successfully');
            
            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href === '#' || href === '') return;
                    
                    e.preventDefault();
                    const target = document.querySelector(href);
                    if (target) {
                        // Close mobile menu if open
                        const mobileMenu = document.getElementById('mobile-menu');
                        if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                            mobileMenu.classList.add('hidden');
                        }
                        
                        // Smooth scroll to section
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
            
            // Highlight active nav link on scroll
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link');
            
            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    if (scrollY >= (sectionTop - 100)) {
                        current = section.getAttribute('id');
                    }
                });
                
                navLinks.forEach(link => {
                    link.classList.remove('text-yellow-300');
                    if (link.getAttribute('href') === '#' + current) {
                        link.classList.add('text-yellow-300');
                    }
                });
            });
        });

    
    
        // Header, Navbar, Footer, and related functions (toggleMobileLangDropdown, loadAnnouncementBar) are loaded from base.html
        // Declare globals early to avoid ReferenceError/TDZ issues
        let currentSlide = 0;
        let heroSlides = [];
        let totalSlides = 0;
        let globalBusinessInfo = null;

        // FAQ Language Toggle
        function showFAQLang(lang) {
            const enFAQ = document.getElementById('faq-english');
            const knFAQ = document.getElementById('faq-kannada');
            const enBtn = document.getElementById('faq-en-btn');
            const knBtn = document.getElementById('faq-kn-btn');
            
            if (lang === 'english') {
                enFAQ.classList.remove('hidden');
                knFAQ.classList.add('hidden');
                enBtn.classList.add('bg-purple-600', 'text-white');
                enBtn.classList.remove('text-gray-700', 'hover:bg-gray-100');
                knBtn.classList.remove('bg-purple-600', 'text-white');
                knBtn.classList.add('text-gray-700', 'hover:bg-gray-100');
            } else {
                knFAQ.classList.remove('hidden');
                enFAQ.classList.add('hidden');
                knBtn.classList.add('bg-purple-600', 'text-white');
                knBtn.classList.remove('text-gray-700', 'hover:bg-gray-100');
                enBtn.classList.remove('bg-purple-600', 'text-white');
                enBtn.classList.add('text-gray-700', 'hover:bg-gray-100');
            }
        }
        
        // Make function globally available
        window.showFAQLang = showFAQLang;
        
        // FAQ Accordion
        document.querySelectorAll('.faq-question').forEach(button => {
            button.addEventListener('click', function() {
                const answer = this.nextElementSibling;
                const icon = this.querySelector('i');
                answer.classList.toggle('hidden');
                icon.classList.toggle('fa-chevron-down');
                icon.classList.toggle('fa-chevron-up');
            });
        });




        // ========================================
        // NAVBAR & ANNOUNCEMENT BAR FUNCTIONALITY
        // ========================================
        
        // Load navbar settings - ONLY from navbar_settings table
        async function loadNavbar() {
            try {
                // Load ONLY from navbar_settings table
                const settingsResponse = await fetch('/api/navbar-settings');
                if (settingsResponse.ok) {
                    const settings = await settingsResponse.json();
                    console.log('Loading navbar from navbar_settings:', settings);
                    
                    // Enhanced logo loading with responsive sizing
                    if (settings.logo_url) {
                        console.log('Loading logo from:', settings.logo_url);
                        const logoSrc = convertToLocalUrl(settings.logo_url) || settings.logo_url;
                        
                        const logoEl = document.getElementById('navbar-logo');
                        if (logoEl) {
                            logoEl.src = logoSrc;
                            logoEl.alt = settings.name || 'Astrology Center';
                            logoEl.className = 'h-20 w-auto sm:h-24 md:h-28 lg:h-32 xl:h-36 object-contain transition-transform duration-300 hover:scale-105';
                            logoEl.style.display = 'block';
                            logoEl.style.maxWidth = '250px';
                            logoEl.style.background = 'transparent';
                        }
                        
                        // Also update mobile logo if exists
                        const mobileLogoEl = document.getElementById('mobile-navbar-logo');
                        if (mobileLogoEl) {
                            mobileLogoEl.src = logoSrc;
                            mobileLogoEl.alt = settings.name || 'Astrology Center';
                            mobileLogoEl.className = 'h-16 w-auto object-contain';
                        }
                    }
                    
                    // Update website name and make it responsive
                    if (settings.name) {
                        const nameEl = document.getElementById('website-name');
                        if (nameEl) {
                            nameEl.textContent = settings.name;
                            nameEl.classList.add('animate-fade-in');
                        }
                    }
                    
                    // Update website subtitle and make it responsive - FIX for Website Subtitle 1 (Main)
                    if (settings.subtitle1) {
                        const subtitleEl = document.getElementById('website-subtitle');
                        if (subtitleEl) {
                            subtitleEl.textContent = settings.subtitle1;
                            subtitleEl.classList.add('animate-fade-in-delay');
                            subtitleEl.classList.remove('hidden');
                        }
                    }
                    
                    // Update additional subtitles if they exist
                    if (settings.subtitle2) {
                        const subtitle2El = document.getElementById('website-subtitle2');
                        if (subtitle2El) {
                            subtitle2El.textContent = settings.subtitle2;
                            subtitle2El.classList.remove('hidden');
                        }
                    }
                    
                    if (settings.subtitle3) {
                        const subtitle3El = document.getElementById('website-subtitle3');
                        if (subtitle3El) {
                            subtitle3El.textContent = settings.subtitle3;
                            subtitle3El.classList.remove('hidden');
                        }
                    }
                    
                    // Apply navbar colors and layout from navbar_settings
                    if (settings.primary_color && settings.secondary_color) {
                        updateNavbarColors(settings.primary_color, settings.secondary_color, settings.navbar_style);
                    }
                    
                    // Apply navbar layout settings
                    applyNavbarLayout(settings);
                }}
            catch (error) {
                console.error('Error loading navbar settings:', error);
            }
        }
             // Apply navbar layout settings from navbar_settings
        function applyNavbarLayout(settings) {
            const navbar = document.getElementById('main-navbar');
            const logoEl = document.getElementById('navbar-logo');
            
            // Apply navbar height
            if (settings.navbar_height) {
                const heights = {
                    'small': 'h-14',
                    'medium': 'h-16 md:h-20',
                    'large': 'h-20 md:h-24'
                };
                const currentClasses = navbar.className;
                const newClasses = currentClasses.replace(/h-\d+(?:\s+md:h-\d+)?/g, heights[settings.navbar_height] || 'h-16 md:h-20');
                navbar.className = newClasses;
            }
            
            // Apply logo position
            if (settings.logo_position === 'center') {
                logoEl.parentElement.classList.add('mx-auto');
            } else if (settings.logo_position === 'right') {
                logoEl.parentElement.classList.add('ml-auto');
            }
        }
        
        // Update navbar colors from navbar_settings
        function updateNavbarColors(primaryColor, secondaryColor, navbarStyle) {
            const navbar = document.getElementById('main-navbar');
            
            if (navbarStyle === 'solid') {
                navbar.style.background = primaryColor;
            } else if (navbarStyle === 'transparent') {
                navbar.style.background = 'rgba(255, 255, 255, 0.1)';
                navbar.style.backdropFilter = 'blur(10px)';
            } else {
                // Default gradient
                navbar.style.background = `linear-gradient(to right, ${primaryColor}, ${secondaryColor})`;
            }
        }
        
        // ========================================
        // NAVBAR FUNCTIONALITY
        // ========================================
        
        // Load Navbar
        async function loadNavbar() {
            try {
                // Check session storage first for cached data
                let navbarSettings = null;
                const cachedNavbar = sessionStorage.getItem('navbarSettings');
                
                if (cachedNavbar) {
                    navbarSettings = JSON.parse(cachedNavbar);
                    console.log('‚úÖ Loaded navbar from session storage (cached)');
                } else {
                    // Load navbar settings from database
                    const navbarResponse = await fetch('/api/navbar-settings');
                    if (navbarResponse.ok) {
                        navbarSettings = await navbarResponse.json();
                        // Save to session storage for faster subsequent loads
                        sessionStorage.setItem('navbarSettings', JSON.stringify(navbarSettings));
                        console.log('‚úÖ Navbar settings loaded from database and cached');
                    }
                }
                
                if (navbarSettings) {
                    // Update website name from database (CRITICAL - MUST WORK)
                    const nameEl = document.getElementById('website-name');
                    const businessName = navbarSettings.name || navbarSettings.business_name || 'Astrology Center';
                    if (nameEl) {
                        nameEl.textContent = businessName;
                        console.log('‚úÖ Website name updated:', businessName);
                    }
                    
                    // Update subtitle from database (CRITICAL - MUST WORK)
                    const subtitleEl = document.getElementById('website-subtitle');
                    const subtitle = navbarSettings.subtitle1 || navbarSettings.tagline || 'Divine Guidance';
                    if (subtitleEl) {
                        subtitleEl.textContent = subtitle;
                        console.log('‚úÖ Website subtitle updated:', subtitle);
                    }
                    
                    // Update logo - ALWAYS use local /uploads/ URL for faster loading
                    const logoEl = document.getElementById('navbar-logo');
                    if (logoEl && navbarSettings.logo_url) {
                        // Handle different URL formats
                        let logoUrl = navbarSettings.logo_url;
                        
                        // If it's already a local path, use it as-is
                        if (logoUrl.startsWith('/static/uploads/') || logoUrl.startsWith('/uploads/')) {
                            // Use as-is
                        } else if (logoUrl.includes('supabase')) {
                            // Extract filename from Supabase URL
                            const filename = logoUrl.split('/').pop().split('?')[0];
                            logoUrl = `/uploads/${filename}`;
                        } else if (!logoUrl.startsWith('http')) {
                            // Relative path - add /uploads/
                            const filename = logoUrl.split('/').pop();
                            logoUrl = `/uploads/${filename}`;
                        }
                        
                        console.log('üñºÔ∏è Loading logo:', logoUrl);
                        logoEl.src = logoUrl;
                        logoEl.alt = navbarSettings.logo_alt || 'Logo';
                        logoEl.style.display = 'block';
                        logoEl.style.visibility = 'visible';
                        logoEl.style.opacity = '1';
                        logoEl.loading = 'eager'; // Load immediately
                        
                        logoEl.onerror = function() {
                            console.error('‚ùå Logo failed to load:', logoUrl);
                            // Try without /static/ prefix
                            if (logoUrl.startsWith('/static/')) {
                                const newUrl = logoUrl.replace('/static/', '/');
                                console.log('Trying alternative URL:', newUrl);
                                logoEl.src = newUrl;
                            } else {
                                console.log('Using fallback placeholder');
                                logoEl.style.display = 'none';
                            }
                        };
                        logoEl.onload = function() {
                            console.log('‚úÖ Logo loaded successfully:', logoUrl);
                        };
                    } else if (logoEl) {
                        console.warn('‚ö†Ô∏è No logo URL found in navbar settings');
                        logoEl.style.display = 'none';
                    }
                    
                }
                
                // Load menu items - with fallback to manual menu
                try {
                    const menuResponse = await fetch('/api/menu-items');
                    if (menuResponse.ok) {
                        const menuItems = await menuResponse.json();
                        if (menuItems && menuItems.length > 0) {
                            renderMenuItems(menuItems);
                        } else {
                            renderDefaultMenuItems();
                        }
                    } else {
                        renderDefaultMenuItems();
                    }
                } catch (error) {
                    console.warn('Failed to load menu from database, using default menu');
                    renderDefaultMenuItems();
                }
            } catch (error) {
                console.error('Error loading navbar:', error);
            }
        }
        
        // Default menu items as fallback
        function renderDefaultMenuItems() {
            const defaultItems = [
                { title: 'Home', url: '#services', target: '_self' },
                { title: 'Services', url: '#services', target: '_self' },
                { title: 'Gallery', url: '#gallery', target: '_self' },
                { title: 'Pooja', url: '#pooja', target: '_self' },
                { title: 'Solutions', url: '#solutions', target: '_self' },
                { title: 'About', url: '#about', target: '_self' },
                { title: 'Reviews', url: '#reviews', target: '_self' },
                { title: 'FAQ', url: '#faq', target: '_self' },
                { title: 'Contact', url: '/contact', target: '_self' }
            ];
            renderMenuItems(defaultItems);
        }

        // Keep menu items ordered the same as admin drag/drop and remove duplicates
        function normalizeMenuItems(items = []) {
            const seen = new Set();
            const sorted = [...items].sort((a, b) => (a.display_order ?? 999) - (b.display_order ?? 999));
            const cleaned = [];
            sorted.forEach(item => {
                if (!item) return;
                const key = `${item.title || ''}-${item.url || ''}`;
                if (seen.has(key)) return;
                seen.add(key);
                cleaned.push(item);
            });
            return cleaned;
        }

        function renderMenuItems(items) {
            console.log('üçî Rendering menu items:', items.length);
            const desktopMenu = document.getElementById('desktop-menu');
            const mobileMenuItems = document.getElementById('mobile-menu-items');
            
            if (!desktopMenu) {
                console.error('‚ùå Desktop menu container not found');
                return;
            }
            
            // Clear both menus
            desktopMenu.innerHTML = '';
            if (mobileMenuItems) mobileMenuItems.innerHTML = '';
            console.log('‚úÖ Menu containers cleared');
            
            normalizeMenuItems(items).forEach((item, index) => {
                // Fix: Convert /contact to #contact automatically
                let itemUrl = item.url;
                if (itemUrl === '/contact' || itemUrl === '/contact.html') {
                    itemUrl = '#contact';
                }
                
                // Desktop menu item
                const desktopLink = document.createElement('a');
                desktopLink.href = itemUrl;
                desktopLink.target = item.target || '_self';
                desktopLink.className = 'px-4 lg:px-6 py-2 lg:py-3 text-white hover:bg-white hover:bg-opacity-20 rounded-lg transition-all duration-300 font-semibold text-sm md:text-base lg:text-lg relative group whitespace-nowrap';
                desktopLink.setAttribute('role', 'menuitem');
                desktopLink.setAttribute('tabindex', '0');
                desktopLink.innerHTML = `
                    ${item.title}
                    <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-white group-hover:w-full transition-all duration-300"></span>
                `;
                desktopLink.addEventListener('click', function(e) {
                    if (itemUrl.startsWith('#')) {
                        e.preventDefault();
                        const target = document.querySelector(itemUrl);
                        if (target) {
                            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    }
                });
                desktopMenu.appendChild(desktopLink);
                
                // Mobile menu item
                if (mobileMenuItems) {
                    const mobileLink = document.createElement('a');
                    mobileLink.href = itemUrl;
                    mobileLink.target = item.target || '_self';
                    mobileLink.setAttribute('role', 'menuitem');
                    mobileLink.setAttribute('tabindex', '0');
                    mobileLink.textContent = item.title;
                    mobileLink.addEventListener('click', function(e) {
                        if (itemUrl.startsWith('#')) {
                            e.preventDefault();
                            closeMobileMenu();
                            setTimeout(() => {
                                const target = document.querySelector(itemUrl);
                                if (target) {
                                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                }
                            }, 300);
                        } else {
                            closeMobileMenu();
                        }
                    });
                    mobileMenuItems.appendChild(mobileLink);
                }
            });
            
            console.log('‚úÖ Menu items rendered');
        }
        
        // ========================================
        // ANNOUNCEMENT BAR FUNCTIONALITY
        // ========================================
        async function loadAnnouncementBar() {
            try {
                const response = await fetch('/api/announcements');
                if (!response.ok) {
                    console.log('No announcements available');
                    return;
                }
                
                const announcements = await response.json();
                if (!announcements || announcements.length === 0) {
                    console.log('No active announcements');
                    return;
                }
                
                const announcementBar = document.getElementById('announcement-bar');
                const marqueeContent = document.getElementById('marquee-content');
                
                if (!announcementBar || !marqueeContent) {
                    console.log('Announcement bar elements not found');
                    return;
                }
                
                // Get active announcements
                const activeAnnouncements = announcements.filter(a => a.active !== false);
                if (activeAnnouncements.length === 0) {
                    console.log('No active announcements');
                    return;
                }
                
                // Build marquee content - duplicate for seamless loop with proper spacing
                let contentHTML = '';
                activeAnnouncements.forEach(announcement => {
                    const icon = announcement.icon ? `<i class="fas fa-${announcement.icon}"></i>` : 'üîî';
                    // Add proper spacing between announcements - responsive spacing
                    const spacing = window.innerWidth <= 640 ? '80px' : window.innerWidth <= 1024 ? '80px' : '80px';
                    contentHTML += `<span style="margin-right: ${spacing} !important; padding: 0 ${window.innerWidth <= 640 ? '80px' : window.innerWidth <= 1024 ? '80px' : '100px'}; white-space: nowrap; display: inline-flex; align-items: center;">${icon} ${announcement.message || announcement.text}</span>`;
                });
                
                // Duplicate content MULTIPLE times for seamless infinite scroll (looping) - CRITICAL for mobile
                // Duplicate 4 times to ensure smooth looping on all devices
                marqueeContent.innerHTML = contentHTML + contentHTML + contentHTML + contentHTML;
                
                // Show the announcement bar
                announcementBar.style.display = 'block';
                announcementBar.style.visibility = 'visible';
                
                // Force layout recalculation to ensure all announcements are visible
                setTimeout(() => {
                    marqueeContent.style.display = 'flex';
                    marqueeContent.style.whiteSpace = 'nowrap';
                    marqueeContent.style.overflow = 'visible';
                    marqueeContent.style.width = 'auto';
                    marqueeContent.style.minWidth = 'max-content';
                    
                    // Ensure all spans are visible and properly styled
                    const spans = marqueeContent.querySelectorAll('span');
                    spans.forEach((span, index) => {
                        span.style.display = 'inline-flex';
                        span.style.visibility = 'visible';
                        span.style.opacity = '1';
                        span.style.flexShrink = '0';
                        span.style.whiteSpace = 'nowrap';
                        // Force reflow
                        span.offsetHeight;
                    });
                    
                    console.log('‚úÖ All announcements rendered:', spans.length, 'spans,', activeAnnouncements.length, 'unique announcements');
                }, 200);
                
                // Calculate animation duration - MEDIUM SPEED (slower on mobile)
                // Wait for layout to calculate proper width
                setTimeout(() => {
                    const contentLength = marqueeContent.scrollWidth;
                    const isMobile = window.innerWidth <= 768;
                    // Medium speeds: mobile 20s (slower), desktop 18s
                    const duration = isMobile ? Math.max(20, contentLength / 30) : Math.max(18, contentLength / 40);
                    
                    // Ensure animation works on mobile - CRITICAL FIX
                    marqueeContent.style.willChange = 'transform';
                    marqueeContent.style.transform = 'translateX(0)';
                    marqueeContent.style.display = 'flex';
                    marqueeContent.style.whiteSpace = 'nowrap';
                    marqueeContent.style.animation = `marqueeScroll ${duration}s linear infinite`;
                    marqueeContent.style.animationPlayState = 'running';
                    
                    // Force reflow to ensure animation starts
                    marqueeContent.offsetHeight;
                    
                    console.log('‚úÖ Announcement animation set:', duration, 's, content length:', contentLength, 'px');
                }, 300);
                
                // Add touch events for mobile pause/resume
                let touchStartTime = 0;
                let isPaused = false;
                
                // Touch start - pause animation
                announcementBar.addEventListener('touchstart', (e) => {
                    touchStartTime = Date.now();
                    isPaused = true;
                    marqueeContent.style.animationPlayState = 'paused';
                }, { passive: true });
                
                // Touch end - resume animation
                announcementBar.addEventListener('touchend', () => {
                    setTimeout(() => {
                        if (isPaused) {
                            isPaused = false;
                            marqueeContent.style.animationPlayState = 'running';
                        }
                    }, 100);
                }, { passive: true });
                
                // Touch cancel - resume animation
                announcementBar.addEventListener('touchcancel', () => {
                    isPaused = false;
                    marqueeContent.style.animationPlayState = 'running';
                }, { passive: true });
                
                // Ensure animation is running on load
                marqueeContent.style.animationPlayState = 'running';
                
                // Fix animation on orientation change
                window.addEventListener('orientationchange', () => {
                    setTimeout(() => {
                        marqueeContent.style.animationPlayState = 'running';
                        // Restart animation
                        const currentDuration = marqueeContent.style.animationDuration || '15s';
                        marqueeContent.style.animation = 'none';
                        setTimeout(() => {
                            marqueeContent.style.animation = `marqueeScroll ${currentDuration} linear infinite`;
                        }, 10);
                    }, 100);
                });
                
                console.log('‚úÖ Announcement bar loaded with', activeAnnouncements.length, 'announcements');
            } catch (error) {
                console.error('Error loading announcement bar:', error);
            }
        }

        
        // Mobile Menu Toggle Functions
        function openMobileMenu() {
            const menu = document.getElementById('mobile-nav-menu');
            const backdrop = document.getElementById('mobile-nav-backdrop');
            const hamburger = document.getElementById('hamburger-btn');
            
            if (!menu) {
                console.error('Mobile menu element not found');
                return;
            }
            
            menu.classList.add('show');
            menu.style.display = 'block';
            menu.style.visibility = 'visible';
            menu.style.transform = 'translateX(0)';
            
            if (backdrop) {
                backdrop.classList.add('show');
                backdrop.style.display = 'block';
                backdrop.style.visibility = 'visible';
                backdrop.style.opacity = '1';
            }
            
            if (hamburger) {
                hamburger.classList.add('active');
                hamburger.setAttribute('aria-expanded', 'true');
            }
            
            document.body.classList.add('menu-open');
            document.body.style.overflow = 'hidden';
            
            // Focus first menu item for accessibility
            const firstMenuItem = menu.querySelector('a');
            if (firstMenuItem) {
                setTimeout(() => firstMenuItem.focus(), 300);
            }
            
            console.log('‚úÖ Mobile menu opened');
        }
        
        function closeMobileMenu() {
            const menu = document.getElementById('mobile-nav-menu');
            const backdrop = document.getElementById('mobile-nav-backdrop');
            const hamburger = document.getElementById('hamburger-btn');
            
            if (menu) {
                menu.classList.remove('show');
                setTimeout(() => {
                    if (!menu.classList.contains('show')) {
                        menu.style.display = 'none';
                        menu.style.visibility = 'hidden';
                        menu.style.transform = 'translateX(-100%)';
                    }
                }, 300);
            }
            
            if (backdrop) {
                backdrop.classList.remove('show');
                setTimeout(() => {
                    if (!backdrop.classList.contains('show')) {
                        backdrop.style.display = 'none';
                        backdrop.style.visibility = 'hidden';
                        backdrop.style.opacity = '0';
                    }
                }, 300);
            }
            
            if (hamburger) {
                hamburger.classList.remove('active');
                hamburger.setAttribute('aria-expanded', 'false');
            }
            
            document.body.classList.remove('menu-open');
            document.body.style.overflow = '';
            
            console.log('‚úÖ Mobile menu closed');
        }
        
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-nav-menu');
            if (menu && menu.classList.contains('show')) {
                closeMobileMenu();
            } else {
                openMobileMenu();
            }
        }
        
        
        
        // ========================================
        // NEW SECTIONS: Services, Pooja, Solutions
        // ========================================
        
        // Load Astrological Services
        async function loadAstrologicalServices() {
            try {
                const response = await fetch('/api/astrological-services');
                if (response.ok) {
                    const services = await response.json();
                    renderAstrologicalServices(services);
                }
            } catch (error) {
                console.error('Error loading astrological services:', error);
            }
        }
        
        // Generate random watercolor backgrounds like in the image
        function getRandomWatercolorBackground() {
            const watercolors = [
                'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
                'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',
                'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',
                'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
                'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)',
                'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)',
                'linear-gradient(135deg, #ff8177 0%, #ff867a 0%, #ff8c7f 21%, #f99185 52%, #cf556c 78%, #b12a5b 100%)',
                'linear-gradient(135deg, #3b41c5 0%, #a981bb 49%, #ffc649 100%)'
            ];
            return watercolors[Math.floor(Math.random() * watercolors.length)];
        }
        
        function renderAstrologicalServices(services) {
            const grid = document.getElementById('astrological-services-grid');
            if (!grid) {
                console.error('Astrological services grid not found!');
                return;
            }
            
            console.log('Rendering astrological services:', services);
            grid.innerHTML = '';
            
            if (!services || services.length === 0) {
                grid.innerHTML = '<div class="col-span-full text-center py-12 text-gray-500 text-lg">No services available at the moment</div>';
                return;
            }
            
            services.forEach((service, index) => {
                const serviceItem = document.createElement('div');
                serviceItem.className = 'text-center cursor-pointer group transition-all duration-300 hover:scale-105';
                serviceItem.style.animationDelay = `${index * 0.1}s`;
                
                // Use global helper to convert URLs
                let serviceImageUrl = convertToLocalUrl(service.icon_url || service.image_url);
                console.log('Service image URL:', service.title, serviceImageUrl);
                
                serviceItem.innerHTML = `
                    <div class="service-item">
                        <!-- Service Image - Increased Size and Responsive -->
                        <div class="mb-4">
                            ${serviceImageUrl ? 
                                `<img src="${serviceImageUrl}" alt="${service.title}" 
                                     class="w-40 h-40 sm:w-48 sm:h-48 md:w-56 md:h-56 lg:w-64 lg:h-64 mx-auto object-contain transition-transform duration-300 group-hover:scale-110" 
                                     style="background: transparent !important; display: block !important; visibility: visible !important; opacity: 1 !important; max-width: 100% !important; height: auto !important;"
                                     loading="lazy"
                                     onload="this.style.display='block'; this.style.visibility='visible'; this.style.opacity='1';"
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` :
                                `<div class="w-40 h-40 sm:w-48 sm:h-48 md:w-56 md:h-56 lg:w-64 lg:h-64 mx-auto flex items-center justify-center">
                                    <i class="fas fa-star text-purple-600 text-5xl sm:text-6xl md:text-7xl"></i>
                                </div>`
                            }
                            ${serviceImageUrl ? `<div class="w-40 h-40 sm:w-48 sm:h-48 md:w-56 md:h-56 lg:w-64 lg:h-64 mx-auto flex items-center justify-center" style="display: none;">
                                <i class="fas fa-star text-purple-600 text-5xl sm:text-6xl md:text-7xl"></i>
                            </div>` : ''}
                        </div>
                        
                        <!-- Service Title Below Image -->
                        <h3 class="text-sm sm:text-base md:text-lg font-semibold text-gray-800 group-hover:text-purple-600 transition-colors duration-300 px-2">
                            ${service.title}
                        </h3>
                    </div>
                `;
                
                grid.appendChild(serviceItem);
            });
            
            console.log(`‚úÖ Successfully rendered ${services.length} astrological services (simple display)`);
        }
        
        // Load Pooja Services with session storage
        async function loadPoojaServices() {
            try {
                // Check session storage first
                const cachedPooja = sessionStorage.getItem('poojaServices');
                if (cachedPooja) {
                    const poojas = JSON.parse(cachedPooja);
                    console.log('‚úÖ Loaded pooja services from session storage (cached):', poojas.length);
                    renderPoojaServices(poojas, false); // false = from cache, don't show defaults
                    return;
                }
                
                const response = await fetch('/api/content/pooja-services');
                if (response.ok) {
                    const poojas = await response.json();
                    console.log('üìä Pooja services API response:', poojas);
                    // Save to session storage
                    sessionStorage.setItem('poojaServices', JSON.stringify(poojas));
                    console.log('‚úÖ Pooja services loaded from database:', poojas.length, 'items');
                    renderPoojaServices(poojas, true); // true = from DB, can show defaults if empty
                } else {
                    console.warn('‚ö†Ô∏è Failed to load pooja services from database');
                    renderPoojaServices([], true);
                }
            } catch (error) {
                console.error('Error loading pooja services:', error);
                renderPoojaServices([], true);
            }
        }
        
        function renderPoojaServices(poojas, showDefaults = false) {
            const grid = document.getElementById('pooja-services-grid');
            grid.innerHTML = '';
            
            // Only show defaults if database is empty AND showDefaults is true
            if (showDefaults && (!poojas || poojas.length === 0)) {
                console.log('üì¶ No pooja services in database, showing placeholder content');
                poojas = [
                    { title: 'Ganesh Puja', description: 'Remove obstacles and bring success' },
                    { title: 'Navagraha Puja', description: 'Planetary harmony and balance' },
                    { title: 'Lakshmi Puja', description: 'Wealth and prosperity' },
                    { title: 'Shani Puja', description: 'Saturn remedies and blessings' },
                    { title: 'Hanuman Puja', description: 'Strength and courage' },
                    { title: 'Saraswati Puja', description: 'Knowledge and wisdom' }
                ];
            } else if (!poojas || poojas.length === 0) {
                console.log('‚ö†Ô∏è No pooja services available');
                return;
            }
            
            // Add default content if no poojas exist
            if (!poojas || poojas.length === 0) {
                poojas = [
                    { title: 'Ganesh Puja', description: 'Remove obstacles', image_url: 'https://images.unsplash.com/photo-1604608672516-e1e8e1389f1c?w=400' },
                    { title: 'Navagraha Puja', description: 'Planetary harmony', image_url: 'https://images.unsplash.com/photo-1582555172866-f73bb12a2ab3?w=400' },
                    { title: 'Lakshmi Puja', description: 'Wealth & prosperity', image_url: 'https://images.unsplash.com/photo-1545241047-6083a3684587?w=400' },
                    { title: 'Shani Puja', description: 'Saturn remedies', image_url: 'https://images.unsplash.com/photo-1518709268805-4e9042af9f23?w=400' }
                ];
            }
            
            poojas.forEach((pooja, index) => {
                const card = document.createElement('div');
                card.className = 'text-center scale-in cursor-pointer';
                card.style.animationDelay = `${index * 0.1}s`;
                card.style.opacity = '0';
                
                // Use global helper to convert URLs
                let poojaImageUrl = convertToLocalUrl(pooja.image_url);
                console.log('Pooja image URL:', pooja.title, poojaImageUrl);
                
                card.innerHTML = `
                    <div class="pooja-circle image-zoom w-24 h-24 sm:w-32 sm:h-32 md:w-36 md:h-36 lg:w-40 lg:h-40 mx-auto mb-3 sm:mb-4 rounded-full overflow-hidden border-2 sm:border-4 border-white shadow-xl hover:shadow-2xl transition-shadow duration-300">
                        ${poojaImageUrl ? 
                            `<img src="${poojaImageUrl}" alt="${pooja.title}" 
                                 class="w-full h-full" 
                                 style="display: block !important; visibility: visible !important; opacity: 1 !important; object-fit: cover !important; object-position: center !important;"
                                 loading="lazy"
                                 onload="this.style.display='block'; this.style.visibility='visible'; this.style.opacity='1'; console.log('Pooja image loaded:', '${pooja.title}');"
                                 onerror="if(!this.dataset.retryAttempt) { this.dataset.retryAttempt='true'; const filename='${poojaImageUrl}'.split('/').pop().split('?')[0]; this.src='/static/uploads/'+filename; } else { console.error('Pooja image failed:', '${pooja.title}'); this.parentElement.innerHTML='<div class=\\'w-full h-full bg-gradient-to-br from-amber-400 to-red-500 flex items-center justify-center rounded-full\\'><i class=\\'fas fa-om text-white text-2xl sm:text-3xl md:text-4xl\\'></i></div>'; }">` :
                            `<div class="w-full h-full bg-gradient-to-br from-amber-400 to-red-500 flex items-center justify-center rounded-full">
                                <i class="fas fa-om text-white text-2xl sm:text-3xl md:text-4xl"></i>
                            </div>`
                        }
                    </div>
                    <h3 class="text-sm sm:text-base md:text-lg font-bold text-gray-800 px-2 transition-colors hover:text-orange-600">${pooja.title}</h3>
                    ${pooja.description ? `<p class="text-xs text-gray-600 mt-1 px-2 line-clamp-2">${pooja.description}</p>` : ''}
                `;
                
                grid.appendChild(card);
                setTimeout(() => card.style.opacity = '1', 50);
            });
        }
        
        // Load Expert Solutions with session storage
        async function loadExpertSolutions() {
            try {
                // Check session storage first
                const cachedSolutions = sessionStorage.getItem('expertSolutions');
                if (cachedSolutions) {
                    const solutions = JSON.parse(cachedSolutions);
                    console.log('‚úÖ Loaded expert solutions from session storage (cached):', solutions.length);
                    renderExpertSolutions(solutions, false); // false = from cache
                    return;
                }
                
                const response = await fetch('/api/content/expert-solutions');
                if (response.ok) {
                    const solutions = await response.json();
                    console.log('üìä Expert solutions API response:', solutions);
                    // Save to session storage
                    sessionStorage.setItem('expertSolutions', JSON.stringify(solutions));
                    console.log('‚úÖ Expert solutions loaded from database:', solutions.length, 'items');
                    renderExpertSolutions(solutions, true); // true = from DB, can show defaults if empty
                } else {
                    console.warn('‚ö†Ô∏è Failed to load expert solutions from database');
                    renderExpertSolutions([], true);
                }
            } catch (error) {
                console.error('Error loading expert solutions:', error);
                renderExpertSolutions([], true);
            }
        }
        
        function renderExpertSolutions(solutions, showDefaults = false) {
            const grid = document.getElementById('expert-solutions-grid');
            if (!grid) {
                console.error('‚ùå Expert solutions grid not found');
                return;
            }
            if (!Array.isArray(solutions)) {
                console.error('‚ùå Expert solutions data invalid:', solutions);
                return;
            }

            // Only show defaults if database is empty AND showDefaults is true
            if (showDefaults && solutions.length === 0) {
                console.log('üì¶ No expert solutions in database, showing placeholder content');
                solutions = [
                    { title: 'Marriage Problems', description: 'Expert guidance for marital harmony and relationship issues' },
                    { title: 'Career Guidance', description: 'Find the right career path through astrological insights' },
                    { title: 'Business Problems', description: 'Overcome business challenges with astrological remedies' }
                ];
            } else if (solutions.length === 0) {
                console.log('‚ö†Ô∏è No expert solutions available');
                return;
            }

            console.log('üîß Rendering expert solutions:', solutions.length);
            grid.innerHTML = '';

            solutions.forEach(item => {
                const original = item.image || item.image_url || '';
                const local = original ? convertToLocalUrl(original) : '';
                const title = item.title || 'Solution';
                const desc = item.description || '';

                const card = document.createElement('div');
                card.className = 'bg-white rounded-xl md:rounded-2xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-2';

                card.innerHTML = `
            <div class="relative overflow-hidden" style="padding-top: 75%;">
                ${local ? `<img src="${local}" alt="${title}" class="absolute inset-0 w-full h-full object-cover object-center" 
                           loading="lazy" crossorigin="anonymous"
                           onload="this.style.opacity=1;"
                           onerror="console.error('Expert image failed from uploads:', '${local}'); this.onerror=null; this.src='${original}'; this.onload=null; this.onerror=function(){ this.style.display='none'; const fb=this.nextElementSibling; if(fb) fb.style.display='flex'; };" style="opacity:0; transition: opacity 0.3s;">`
                         : ''}
                <div class="absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 flex items-center justify-center" style="${local ? 'display:none;' : ''}">
                    <i class="fas fa-image text-purple-500 text-3xl"></i>
                </div>
            </div>
            <div class="p-4 md:p-5">
                <h4 class="text-lg md:text-xl font-bold text-purple-900 mb-1">${title}</h4>
                <p class="text-gray-700 text-sm md:text-base line-clamp-3">${desc}</p>
            </div>
        `;
                grid.appendChild(card);
            });
        }
        
        // Scroll Animation Observer
        function initScrollAnimations() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, observerOptions);
            
            // Observe all animated elements
            document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right').forEach(el => {
                observer.observe(el);
            });
        }
        
        // Load all new sections with error handling
        async function initializeServices() {
            try {
                console.log('üîÑ Initializing astrological services...');
                await loadAstrologicalServices();
                console.log('‚úÖ Astrological services initialized successfully');
            } catch (error) {
                console.error('‚ùå Failed to initialize astrological services:', error);
            }
        }
        
        // Lazy load with intersection observer for better performance
        function initLazyLoading() {
            const observerOptions = {
                root: null,
                rootMargin: '150px',
                threshold: 0.1
            };
            
            const sectionObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const sectionId = entry.target.id;
                        if (sectionId === 'expert-solutions' && !window.expertSolutionsLoaded) {
                            loadExpertSolutions();
                            window.expertSolutionsLoaded = true;
                        } else if (sectionId === 'pooja' && !window.poojaServicesLoaded) {
                            loadPoojaServices();
                            window.poojaServicesLoaded = true;
                        }
                        sectionObserver.unobserve(entry.target);
                    }
                });
            }, observerOptions);
            
            // Observe sections for lazy loading
            const expertSection = document.getElementById('expert-solutions');
            const poojaSection = document.getElementById('pooja');
            if (expertSection) sectionObserver.observe(expertSection);
            if (poojaSection) sectionObserver.observe(poojaSection);
        }
        
        // Initialize scroll animations after a short delay to ensure DOM is ready
        setTimeout(initScrollAnimations, 500);

        // ==========================================
        // HERO AUTO IMAGE SLIDER - FULL IMAGE DISPLAY
        // ==========================================
        let heroSliderData = [];
        let currentHeroSlideIndex = 0;
        let heroSliderInterval = null;
        let heroSliderInitialized = false;

        async function loadHeroBannerSlider() {
            try {
                console.log('üì∏ Loading hero banner slider...');
                const response = await fetch(`/api/content/hero-slides?t=${Date.now()}`);
                
                if (!response.ok) {
                    console.warn('Hero slides API not available, using placeholder');
                    renderHeroSliderPlaceholder();
                    return;
                }
                
                const data = await response.json();
                console.log('üì∏ Raw hero slides data from API:', data);
                
                if (Array.isArray(data) && data.length > 0) {
                    heroSliderData = data.map((slide, index) => {
                        const imageUrl = convertToLocalUrl(slide.image || slide.image_url || '');
                        console.log(`üì∏ Slide ${index + 1} image URL:`, imageUrl);
                        return {
                            ...slide,
                            imageUrl: imageUrl,
                            title: slide.title || '',
                            subtitle: slide.subtitle || slide.description || '',
                            ctaText: slide.cta_text || slide.button_text || '',
                            ctaUrl: slide.cta_url || slide.button_url || '#contact',
                            altText: slide.alt_text || slide.title || 'Astrology Banner'
                        };
                    });
                    
                    console.log(`‚úÖ Loaded ${heroSliderData.length} hero banner slides`);
                    console.log('üì∏ All slider data:', heroSliderData);
                    renderHeroSlider();
                    initHeroSliderControls();
                } else {
                    console.warn('No hero slides found, using placeholder');
                    renderHeroSliderPlaceholder();
                }
            } catch (error) {
                console.error('Error loading hero banner slider:', error);
                renderHeroSliderPlaceholder();
            }
        }

        function renderHeroSlider() {
            const track = document.getElementById('hero-slides-track');
            const dotsContainer = document.getElementById('hero-slide-dots');
            
            if (!track || !dotsContainer) return;
            
            track.innerHTML = '';
            dotsContainer.innerHTML = '';
            
            // Reset current index to 0 when re-rendering
            currentHeroSlideIndex = 0;
            
            console.log('üé® Rendering', heroSliderData.length, 'hero slides');
            
            heroSliderData.forEach((slide, index) => {
                // Create slide element - no black background
                const slideEl = document.createElement('div');
                slideEl.className = `hero-slide-item ${index === 0 ? 'active' : ''}`;
                slideEl.setAttribute('data-slide-index', index);
                slideEl.style.background = 'transparent';
                slideEl.style.display = 'flex';
                slideEl.style.position = 'absolute';
                slideEl.style.width = '100%';
                slideEl.style.height = '100%';
                
                // Explicitly set visibility based on index
                if (index === 0) {
                    slideEl.style.opacity = '1';
                    slideEl.style.visibility = 'visible';
                    slideEl.style.zIndex = '10';
                } else {
                    slideEl.style.opacity = '0';
                    slideEl.style.visibility = 'hidden';
                    slideEl.style.zIndex = '1';
                }
                
                console.log(`üé® Creating slide ${index + 1}/${heroSliderData.length}:`, slide.imageUrl);
                
                // Create image container with dynamic sizing
                const imageContainer = document.createElement('div');
                imageContainer.className = 'hero-slide-image-container';
                imageContainer.style.background = 'transparent';
                
                // Create image element
                const img = document.createElement('img');
                img.src = slide.imageUrl;
                img.alt = slide.altText;
                img.className = 'hero-slide-image';
                img.loading = index === 0 ? 'eager' : 'lazy';
                
                // Handle image load to adjust container height
                img.onload = function() {
                    console.log(`‚úÖ Image ${index + 1} loaded:`, slide.imageUrl);
                    adjustSliderHeight(this);
                    // Ensure image is visible
                    this.style.display = 'block';
                    this.style.opacity = '1';
                    // Ensure first slide is visible after load
                    if (index === 0) {
                        slideEl.style.opacity = '1';
                        slideEl.style.visibility = 'visible';
                        slideEl.style.zIndex = '10';
                        slideEl.classList.add('active');
                    } else {
                        // Ensure other slides are properly hidden but images are loaded
                        slideEl.style.opacity = '0';
                        slideEl.style.visibility = 'hidden';
                        slideEl.style.zIndex = '1';
                    }
                };
                
                img.onerror = function() {
                    // Try Supabase fallback route
                    if (!this.dataset.retryAttempt) {
                        console.log(`üîÑ Retrying hero image ${index + 1} via backend fallback:`, slide.imageUrl);
                        this.dataset.retryAttempt = 'true';
                        const filename = slide.imageUrl.split('/').pop().split('?')[0];
                        this.src = `/static/uploads/${filename}`;
                    } else {
                        console.error(`‚ùå Failed to load image ${index + 1} after retry:`, slide.imageUrl);
                        // Keep the slide but show a placeholder
                        this.style.display = 'block';
                        this.style.opacity = '0.3';
                        this.alt = 'Image failed to load';
                    }
                };
                
                // Preload all images to ensure they're available
                if (index > 0) {
                    const preloadImg = new Image();
                    preloadImg.src = slide.imageUrl;
                    preloadImg.onload = function() {
                        console.log(`‚úÖ Preloaded image ${index + 1}:`, slide.imageUrl);
                    };
                }
                
                imageContainer.appendChild(img);
                
                slideEl.appendChild(imageContainer);
                track.appendChild(slideEl);
                
                // Create dot indicator
                const dot = document.createElement('div');
                dot.className = `hero-dot ${index === 0 ? 'active' : ''}`;
                dot.setAttribute('data-dot-index', index);
                dot.setAttribute('role', 'button');
                dot.setAttribute('aria-label', `Go to slide ${index + 1}`);
                dot.onclick = () => goToHeroSlide(index);
                dotsContainer.appendChild(dot);
            });
            
            // Force first slide to be active after rendering and ensure all images are loaded
            setTimeout(() => {
                const slides = track.querySelectorAll('.hero-slide-item');
                slides.forEach((slide, idx) => {
                    const img = slide.querySelector('img');
                    if (img) {
                        // Ensure all images are properly displayed
                        img.style.display = 'block';
                        img.style.width = '100%';
                        img.style.height = 'auto';
                        img.style.objectFit = 'contain';
                        
                        if (idx === 0) {
                            slide.classList.add('active');
                            slide.style.opacity = '1';
                            slide.style.visibility = 'visible';
                            slide.style.zIndex = '10';
                        } else {
                            slide.style.opacity = '0';
                            slide.style.visibility = 'hidden';
                            slide.style.zIndex = '1';
                        }
                    }
                });
                
                const firstDot = dotsContainer.querySelector('.hero-dot[data-dot-index="0"]');
                if (firstDot) {
                    firstDot.classList.add('active');
                }
                
                // Start autoplay after ensuring all slides are properly set up
                if (heroSliderData.length > 1) {
                    setTimeout(() => {
                        startHeroAutoPlay();
                    }, 500);
                }
            }, 200);
            
            console.log('‚úÖ Hero slider rendered with', heroSliderData.length, 'slides - all images should display');
        }

        function adjustSliderHeight(img) {
            // Get the natural aspect ratio of the image
            const aspectRatio = img.naturalHeight / img.naturalWidth;
            const viewportWidth = window.innerWidth;
            
            // Calculate ideal height based on viewport and image aspect ratio
            let idealHeight = viewportWidth * aspectRatio;
            
            // Set min and max constraints
            const minHeight = 300;
            const maxHeight = window.innerHeight * 0.85; // Max 85vh
            
            idealHeight = Math.max(minHeight, Math.min(idealHeight, maxHeight));
            
            // Apply height to slider container
            const sliderSection = document.getElementById('hero-banner-slider');
            if (sliderSection) {
                sliderSection.style.height = `${idealHeight}px`;
            }
        }

        function initHeroSliderControls() {
            if (heroSliderInitialized) return;
            
            const prevBtn = document.getElementById('hero-slider-prev');
            const nextBtn = document.getElementById('hero-slider-next');
            const track = document.getElementById('hero-slides-track');
            
            // Navigation buttons
            if (prevBtn) {
                prevBtn.onclick = () => {
                    stopHeroAutoPlay();
                    previousHeroSlide();
                    startHeroAutoPlay();
                };
            }
            
            if (nextBtn) {
                nextBtn.onclick = () => {
                    stopHeroAutoPlay();
                    nextHeroSlide();
                    startHeroAutoPlay();
                };
            }
            
            // Touch/swipe support
            if (track) {
                let touchStartX = 0;
                let touchEndX = 0;
                
                track.addEventListener('touchstart', (e) => {
                    touchStartX = e.changedTouches[0].screenX;
                    stopHeroAutoPlay();
                }, { passive: true });
                
                track.addEventListener('touchend', (e) => {
                    touchEndX = e.changedTouches[0].screenX;
                    handleHeroSwipe();
                    startHeroAutoPlay();
                }, { passive: true });
                
                function handleHeroSwipe() {
                    const swipeThreshold = 50;
                    const diff = touchStartX - touchEndX;
                    
                    if (Math.abs(diff) > swipeThreshold) {
                        if (diff > 0) {
                            nextHeroSlide();
                        } else {
                            previousHeroSlide();
                        }
                    }
                }
            }
            
            // Pause on hover
            const sliderSection = document.getElementById('hero-banner-slider');
            if (sliderSection) {
                sliderSection.addEventListener('mouseenter', stopHeroAutoPlay);
                sliderSection.addEventListener('mouseleave', startHeroAutoPlay);
            }
            
            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') {
                    stopHeroAutoPlay();
                    previousHeroSlide();
                    startHeroAutoPlay();
                } else if (e.key === 'ArrowRight') {
                    stopHeroAutoPlay();
                    nextHeroSlide();
                    startHeroAutoPlay();
                }
            });
            
            // Start autoplay
            startHeroAutoPlay();
            
            // Adjust height on window resize
            window.addEventListener('resize', () => {
                const activeSlide = document.querySelector('.hero-slide-item.active img');
                if (activeSlide && activeSlide.complete) {
                    adjustSliderHeight(activeSlide);
                }
            });
            
            heroSliderInitialized = true;
            console.log('‚úÖ Hero slider controls initialized');
        }

        function goToHeroSlide(index) {
            if (index === currentHeroSlideIndex || index < 0 || index >= heroSliderData.length) {
                return;
            }
            
            console.log(`üé¨ Transitioning slider from slide ${currentHeroSlideIndex} to slide ${index}`);
            
            const slides = document.querySelectorAll('.hero-slide-item');
            const dots = document.querySelectorAll('.hero-dot');
            
            console.log(`üìä Total slides: ${slides.length}, Total data: ${heroSliderData.length}`);
            
            // Hide ALL slides first
            slides.forEach((slide, i) => {
                slide.classList.remove('active', 'exiting');
                slide.style.opacity = '0';
                slide.style.visibility = 'hidden';
                slide.style.zIndex = '1';
            });
            
            // Remove active from all dots
            dots.forEach(dot => dot.classList.remove('active'));
            
            // Show only the target slide
            if (slides[index]) {
                slides[index].classList.add('active');
                slides[index].style.opacity = '1';
                slides[index].style.visibility = 'visible';
                slides[index].style.zIndex = '10';
                console.log(`‚úÖ Slide ${index} is now active and VISIBLE`);
            }
            
            if (dots[index]) {
                dots[index].classList.add('active');
            }
            
            // Adjust height for new slide
            const newImg = slides[index]?.querySelector('img');
            if (newImg && newImg.complete) {
                adjustSliderHeight(newImg);
            }
            
            currentHeroSlideIndex = index;
        }

        function nextHeroSlide() {
            const nextIndex = (currentHeroSlideIndex + 1) % heroSliderData.length;
            console.log(`‚û°Ô∏è Moving to next slide: ${nextIndex}`);
            goToHeroSlide(nextIndex);
        }

        function previousHeroSlide() {
            const prevIndex = (currentHeroSlideIndex - 1 + heroSliderData.length) % heroSliderData.length;
            console.log(`‚¨ÖÔ∏è Moving to previous slide: ${prevIndex}`);
            goToHeroSlide(prevIndex);
        }

        function startHeroAutoPlay() {
            stopHeroAutoPlay();
            if (heroSliderData.length > 1) {
                heroSliderInterval = setInterval(nextHeroSlide, 5000);
                console.log(`‚ñ∂Ô∏è Hero slider autoplay started - ${heroSliderData.length} slides, 5s interval`);
            } else {
                console.log(`‚è∏Ô∏è Hero slider autoplay disabled - only ${heroSliderData.length} slide(s)`);
            }
        }

        function stopHeroAutoPlay() {
            if (heroSliderInterval) {
                clearInterval(heroSliderInterval);
                heroSliderInterval = null;
            }
        }

        function renderHeroSliderPlaceholder() {
            const track = document.getElementById('hero-slides-track');
            if (!track) return;
            
            track.innerHTML = `
                <div class="hero-slide-item active flex items-center justify-center" style="min-height: 400px;">
                    <div class="text-center text-white p-8 max-w-3xl">
                        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-4 font-serif">
                            Welcome to Sri Mahakali Bhairavi Astrology Center
                        </h1>
                        <p class="text-xl md:text-2xl mb-6 opacity-90">
                            Discover Your Cosmic Path with Expert Vedic Astrology
                        </p>
                        <a href="#contact" class="inline-block px-8 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full font-semibold text-lg hover:shadow-lg transition">
                            Book Consultation
                        </a>
                    </div>
                </div>
            `;
        }

        // Load About Section from API
        async function loadAboutSection() {
            try {
                const response = await fetch(`/api/content/about-section?t=${Date.now()}`);
                if (!response.ok) throw new Error('Failed to load about section');
                const data = await response.json();
                
                if (data && Object.keys(data).length > 0) {
                    document.getElementById('about-title').textContent = data.name || 'Our Expert Astrologer';
                    document.getElementById('about-description').textContent = data.description || '';
                    const aboutImage = document.getElementById('about-image');
                    const fallback = aboutImage ? aboutImage.nextElementSibling : null;
                    
                    if (data.img && data.img.trim() !== '') {
                        // Convert to local URL for faster loading
                        let imgUrl = convertToLocalUrl(data.img);
                        console.log('‚úÖ About section using local image:', imgUrl);
                        
                        if (aboutImage) {
                            aboutImage.src = imgUrl;
                            aboutImage.className = 'w-full h-full object-cover rounded-2xl shadow-2xl';
                            aboutImage.loading = 'lazy';
                            aboutImage.style.display = 'block';
                            aboutImage.onload = function() {
                                console.log('‚úÖ About image loaded successfully from uploads:', imgUrl);
                                this.style.opacity = '1';
                                if (fallback) fallback.style.display = 'none';
                            };
                            aboutImage.onerror = function() {
                                // Try Supabase fallback route
                                if (!this.dataset.retryAttempt) {
                                    console.log('üîÑ Retrying about image via backend fallback:', imgUrl);
                                    this.dataset.retryAttempt = 'true';
                                    const filename = imgUrl.split('/').pop().split('?')[0];
                                    this.src = `/static/uploads/${filename}`;
                                } else {
                                    console.error('‚ùå About image failed after retry, showing fallback:', imgUrl);
                                    this.style.display = 'none';
                                    if (fallback) {
                                        fallback.style.display = 'flex';
                                        fallback.innerHTML = '<div class="w-full h-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center rounded-2xl"><i class="fas fa-user-astronaut text-white text-6xl md:text-8xl"></i></div>';
                                    }
                                }
                            };
                            if (fallback) fallback.style.display = 'none';
                        }
                    } else {
                        console.log('‚ÑπÔ∏è No about image URL provided');
                        if (aboutImage) aboutImage.style.display = 'none';
                        if (fallback) fallback.style.display = 'block';
                    }
                    
                    // Render additional details with new fields
                    const detailsContainer = document.getElementById('about-details');
                    const details = [];
                    
                    if (data.years_of_experience) {
                        details.push(`<div class="flex items-start"><i class="fas fa-calendar-alt text-purple-600 mt-1 mr-3"></i><p><strong>Experience:</strong> ${data.years_of_experience}</p></div>`);
                    }
                    if (data.expertise_areas) {
                        details.push(`<div class="flex items-start"><i class="fas fa-star text-purple-600 mt-1 mr-3"></i><p><strong>Expertise:</strong> ${data.expertise_areas}</p></div>`);
                    }
                    if (data.location) {
                        details.push(`<div class="flex items-start"><i class="fas fa-map-marker-alt text-purple-600 mt-1 mr-3"></i><p><strong>Location:</strong> ${data.location}</p></div>`);
                    }
                    if (data.accurate_predictions) {
                        details.push(`<div class="flex items-start"><i class="fas fa-check-circle text-purple-600 mt-1 mr-3"></i><p><strong>Predictions:</strong> ${data.accurate_predictions}</p></div>`);
                    }
                    
                    detailsContainer.innerHTML = details.join('');
                } else {
                    // Default content if no data
                    document.getElementById('about-title').textContent = 'Our Expert Astrologer';
                    document.getElementById('about-description').textContent = 'Welcome to our astrology consultation service. Our expert astrologer brings years of experience in Vedic astrology, tarot reading, and spiritual guidance.';
                    document.getElementById('about-details').innerHTML = `
                        <div class="flex items-start"><i class="fas fa-calendar-alt text-purple-600 mt-1 mr-3"></i><p><strong>Experience:</strong> 15+ Years</p></div>
                        <div class="flex items-start"><i class="fas fa-star text-purple-600 mt-1 mr-3"></i><p><strong>Expertise:</strong> Vedic Astrology, Tarot, Vastu</p></div>
                        <div class="flex items-start"><i class="fas fa-map-marker-alt text-purple-600 mt-1 mr-3"></i><p><strong>Location:</strong> Mumbai, India</p></div>
                        <div class="flex items-start"><i class="fas fa-check-circle text-purple-600 mt-1 mr-3"></i><p><strong>Predictions:</strong> 10,000+ Accurate Predictions</p></div>
                    `;
                }
            } catch (error) {
                console.error('Error loading about section:', error);
            }
        }
        
        // Load Gallery Slides from API
        async function loadGallerySlides() {
            try {
                // Check session storage first
                const cachedGallery = sessionStorage.getItem('gallerySlides');
                if (cachedGallery) {
                    const gallerySlides = JSON.parse(cachedGallery);
                    console.log('‚úÖ Loaded gallery slides from session storage (cached):', gallerySlides.length, 'slides');
                    renderGallerySlides(gallerySlides, false); // false = from cache
                    return;
                }
                
                console.log('Fetching gallery slides from API...');
                const response = await fetch(`/api/content/gallery-slides?t=${Date.now()}`);
                console.log('Gallery slides response status:', response.status);
                if (!response.ok) throw new Error('Failed to load gallery slides');
                const data = await response.json();
                console.log('Gallery slides data received:', data);
                
                // Handle API response format and convert to local URLs
                let gallerySlides = [];
                if (Array.isArray(data)) {
                    // Convert all image URLs to local for faster loading
                    gallerySlides = data.map(slide => ({
                        ...slide,
                        image: convertToLocalUrl(slide.image)
                    }));
                    // Save to session storage
                    sessionStorage.setItem('gallerySlides', JSON.stringify(gallerySlides));
                    console.log('‚úÖ Loaded', gallerySlides.length, 'gallery slides (using local URLs) and cached');
                    // Debug: Check first slide's image URL
                    if (gallerySlides.length > 0) {
                        console.log('First gallery slide local URL:', gallerySlides[0].image);
                    }
                } else {
                    console.error('Invalid gallery slides data format:', data);
                }
                
                renderGallerySlides(gallerySlides, true); // true = from DB, can show defaults
            } catch (error) {
                console.error('Error loading gallery slides:', error);
                renderGallerySlides([], true);
            }
        }

        function renderGallerySlides(slides, showDefaults = false) {
            const container = document.getElementById('gallery-slides-container');
            container.innerHTML = '';
            
            // Only show defaults if database is empty AND showDefaults is true
            if (showDefaults && (!slides || slides.length === 0)) {
                console.log('üì¶ No gallery slides in database, showing placeholder content');
                // No default images - let admin add them
                container.innerHTML = '<div class="w-full text-center py-12 text-gray-500"><p class="text-lg">No gallery images available. Please add images through the admin panel.</p></div>';
                return;
            } else if (!slides || slides.length === 0) {
                console.log('‚ö†Ô∏è No gallery slides available');
                return;
            }
            
            // Render all slides immediately without waiting for preload
            slides.forEach((slide, index) => {
                const slideDiv = document.createElement('div');
                slideDiv.className = 'flex-shrink-0 gallery-item bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition-all duration-300 hover:-translate-y-1';
                // Responsive sizing applied via CSS classes
                
                const cleanTitle = (slide.title || 'Gallery Moment').toString().trim();
                const localImageUrl = convertToLocalUrl(slide.image || slide.image_url || '');
                
                // Build HTML with immediate display
                slideDiv.innerHTML = `
                    <div class="relative overflow-hidden gallery-img-container bg-gradient-to-br from-purple-100 to-pink-100">
                        <img src="${localImageUrl}" 
                             alt="${cleanTitle}" 
                             loading="eager"
                             style="width: 100%; height: 100%; object-fit: cover; display: block;"
                             onerror="this.src='/static/assets/images/placeholder.jpg'; this.onerror=null;">
                    </div>
                    <div class="p-3 bg-white">
                        <h4 class="font-bold text-purple-800 text-center text-sm sm:text-base line-clamp-2">${cleanTitle}</h4>
                    </div>
                `;
                container.appendChild(slideDiv);
            });
            
            console.log('‚úÖ Gallery rendered with', slides.length, 'slides - all cards displayed immediately');
            
            // Initialize gallery slider immediately
            setTimeout(() => initGallerySlider(), 100);
        }
        
        // Gallery Slider Logic - AUTO-SCROLL with smooth infinite loop
        let galleryCurrentIndex = 0;
        let galleryAutoSlideInterval;
        let galleryRafId = null;
        let galleryTransform = 0;
        
        function initGallerySlider() {
            const container = document.getElementById('gallery-slides-container');
            const prevBtn = document.getElementById('gallery-prev');
            const nextBtn = document.getElementById('gallery-next');
            const slides = Array.from(container.querySelectorAll('.gallery-item'));
            if (!container || slides.length === 0) return;

            // Reset any previous animation state
            cancelAnimationFrame(galleryRafId);
            galleryRafId = null;
            galleryTransform = 0;
            container.style.overflow = 'hidden';
            container.scrollLeft = 0;

            // Ensure snap alignment on all slides
            slides.forEach((slide) => {
                slide.style.scrollSnapAlign = 'start';
            });

            const getSlideWidth = () => {
                const first = slides[0];
                const styles = window.getComputedStyle(container);
                const gap = parseInt(styles.columnGap || styles.gap || '16', 10);
                return first.getBoundingClientRect().width + gap;
            };

            // Manual navigation
            const scrollByOne = (direction = 1) => {
                const maxScroll = container.scrollWidth - container.clientWidth;
                const distance = getSlideWidth() * direction;
                let newScroll = container.scrollLeft + distance;
                
                // Loop back to start if at end
                if (newScroll >= maxScroll) {
                    newScroll = 0;
                } else if (newScroll < 0) {
                    newScroll = maxScroll;
                }
                
                container.scrollTo({ left: newScroll, behavior: 'smooth' });
            };

            // Arrows move exactly one card
            if (nextBtn) {
                nextBtn.removeEventListener('click', nextBtn._galleryHandler);
                nextBtn._galleryHandler = () => scrollByOne(1);
                nextBtn.addEventListener('click', nextBtn._galleryHandler);
            }
            if (prevBtn) {
                prevBtn.removeEventListener('click', prevBtn._galleryHandler);
                prevBtn._galleryHandler = () => scrollByOne(-1);
                prevBtn.addEventListener('click', prevBtn._galleryHandler);
            }

            // Auto-scroll implementation - Continuous smooth scroll
            const autoScroll = () => {
                const maxScroll = container.scrollWidth - container.clientWidth;
                const currentScroll = container.scrollLeft;
                
                // Check if we've reached the end
                if (currentScroll >= maxScroll - 5) {
                    // Loop back to start smoothly
                    container.scrollTo({ left: 0, behavior: 'smooth' });
                } else {
                    // Scroll one card forward
                    scrollByOne(1);
                }
            };

            const restartAutoScroll = () => {
                clearInterval(galleryAutoSlideInterval);
                if (slides.length > 1) {
                    // Auto-scroll every 4 seconds
                    galleryAutoSlideInterval = setInterval(() => {
                        autoScroll();
                    }, 4000);
                    console.log('‚úÖ Gallery auto-scroll started with', slides.length, 'items, interval: 4s');
                } else {
                    console.log('‚è∏ Gallery auto-scroll disabled - only', slides.length, 'item(s)');
                }
            };
            
            // Start auto-scroll after a short delay
            setTimeout(() => {
                restartAutoScroll();
            }, 500);

            const pauseAuto = () => {
                clearInterval(galleryAutoSlideInterval);
                console.log('‚è∏ Gallery auto-scroll paused');
            };
            const resumeAuto = () => {
                restartAutoScroll();
                console.log('‚ñ∂ Gallery auto-scroll resumed');
            };
            container.addEventListener('mouseenter', pauseAuto);
            container.addEventListener('mouseleave', resumeAuto);
            slides.forEach((slide) => {
                slide.addEventListener('mouseenter', pauseAuto);
                slide.addEventListener('mouseleave', resumeAuto);
            });

            // Keep widths correct on resize
            window.addEventListener('resize', () => {
                clearInterval(galleryAutoSlideInterval);
                container.scrollLeft = 0;
                restartAutoScroll();
            });
        }
        
        // Setup Contact Form Handler
        function setupContactFormHandler() {
            const contactForm = document.getElementById('contact-form-home');
            if (!contactForm) return;
            
            contactForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const formData = {
                    name: document.getElementById('contact-name').value,
                    phone: document.getElementById('contact-phone').value,
                    email: document.getElementById('contact-email').value || '',
                    topic: document.getElementById('contact-topic').value || 'General Inquiry',
                    message: document.getElementById('contact-message').value
                };
                
                const messageDiv = document.getElementById('contact-form-message');
                
                try {
                    messageDiv.className = 'mt-4 p-4 bg-blue-100 text-blue-700 rounded-lg block';
                    messageDiv.innerHTML = '<i class=\"fas fa-spinner fa-spin mr-2\"></i>Sending your message...';
                    
                    const response = await fetch('/api/contact-messages', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(formData)
                    });
                    
                    const result = await response.json();
                    
                    if (response.ok && result.success) {
                        messageDiv.className = 'mt-4 p-4 bg-green-100 text-green-700 rounded-lg block';
                        messageDiv.innerHTML = `
                            <i class=\"fas fa-check-circle mr-2\"></i>
                            Thank you ${formData.name}! We've received your message and will contact you soon.
                        `;
                        contactForm.reset();
                        
                        setTimeout(() => {
                            messageDiv.classList.add('hidden');
                        }, 5000);
                    } else {
                        throw new Error(result.error || 'Submission failed');
                    }
                } catch (error) {
                    console.error('Error submitting contact form:', error);
                    messageDiv.className = 'mt-4 p-4 bg-red-100 text-red-700 rounded-lg block';
                    messageDiv.innerHTML = '<i class=\"fas fa-exclamation-circle mr-2\"></i>Failed to send message. Please try again.';
                }
            });
        }
        
        // ============================================
        // CHATBOT FUNCTIONALITY
        // ============================================
        
        function initChatbot() {
            const chatbotToggle = document.getElementById('chatbot-toggle');
            const chatbotWindow = document.getElementById('chatbot-window');
            const chatbotClose = document.getElementById('chatbot-close');
            const chatbotBackdrop = document.getElementById('chatbot-backdrop');
            const chatbotInput = document.getElementById('chatbot-input');
            const chatbotSend = document.getElementById('chatbot-send');
            const chatbotMessages = document.getElementById('chatbot-messages');
            
            if (!chatbotToggle || !chatbotWindow) {
                console.error('Chatbot elements not found');
                return;
            }
            
            // Ensure chatbot is visible and properly positioned
            const chatbotWidget = document.getElementById('chatbot-widget');
            if (chatbotWidget) {
                chatbotWidget.style.display = 'block';
                chatbotWidget.style.visibility = 'visible';
                chatbotWidget.style.opacity = '1';
                console.log('‚úÖ Chatbot widget initialized and visible');
            }
            
            // Open chatbot
            chatbotToggle.addEventListener('click', () => {
                console.log('üîµ Chatbot toggle clicked');
                
                // Remove hidden class and set display styles
                chatbotWindow.classList.remove('hidden');
                chatbotWindow.style.display = 'flex';
                chatbotWindow.style.visibility = 'visible';
                chatbotWindow.style.opacity = '1';
                chatbotWindow.style.transform = 'translateY(0) scale(1)';
                chatbotWindow.style.pointerEvents = 'auto';
                
                // Hide the toggle button
                chatbotToggle.classList.add('hidden');
                chatbotToggle.style.display = 'none';
                chatbotToggle.style.opacity = '0';
                chatbotToggle.style.transform = 'scale(0)';
                
                // Lock body scroll
                document.body.classList.add('chatbot-open');
                
                // Show backdrop on mobile
                if (window.innerWidth <= 640 && chatbotBackdrop) {
                    chatbotBackdrop.classList.add('active');
                }
                
                // Focus input after animation
                setTimeout(() => {
                    if (chatbotInput) chatbotInput.focus();
                }, 300);
                
                console.log('‚úÖ Chatbot opened successfully');
            });
            
            // Close chatbot
            const closeChat = () => {
                console.log('üîµ Closing chatbot');
                
                // Add hidden class and reset display styles
                chatbotWindow.classList.add('hidden');
                chatbotWindow.style.display = 'none';
                chatbotWindow.style.visibility = 'hidden';
                chatbotWindow.style.opacity = '0';
                chatbotWindow.style.transform = 'translateY(20px) scale(0.95)';
                
                // Show the toggle button
                chatbotToggle.classList.remove('hidden');
                chatbotToggle.style.display = 'flex';
                chatbotToggle.style.opacity = '1';
                chatbotToggle.style.transform = 'scale(1)';
                
                // Unlock body scroll
                document.body.classList.remove('chatbot-open');
                
                // Hide backdrop
                if (chatbotBackdrop) {
                    chatbotBackdrop.classList.remove('active');
                }
                
                console.log('‚úÖ Chatbot closed successfully');
            };
            
            chatbotClose.addEventListener('click', closeChat);
            
            // Close on backdrop click (mobile)
            if (chatbotBackdrop) {
                chatbotBackdrop.addEventListener('click', closeChat);
            }
            
            // Send message
            const sendMessage = () => {
                const message = chatbotInput.value.trim();
                if (!message) return;
                
                // Add user message
                addMessage(message, 'user');
                chatbotInput.value = '';
                
                // Simulate bot response
                setTimeout(() => {
                    const response = generateBotResponse(message);
                    addMessage(response, 'bot');
                }, 800);
            };
            
            chatbotSend.addEventListener('click', sendMessage);
            
            chatbotInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Add message to chat
            function addMessage(text, type) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${type}-message`;
                
                const icon = document.createElement('i');
                icon.className = `fas ${type === 'bot' ? 'fa-robot' : 'fa-user'} message-icon`;
                
                const content = document.createElement('div');
                content.className = 'message-content';
                content.innerHTML = `<p>${text}</p>`;
                
                messageDiv.appendChild(icon);
                messageDiv.appendChild(content);
                
                chatbotMessages.appendChild(messageDiv);
                
                // Scroll to bottom
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
            }
            
            // Generate bot responses with 100+ comprehensive Q&A
            function generateBotResponse(userMessage) {
                const msg = userMessage.toLowerCase().trim();
                
                console.log('üîç User message:', msg);
                
                // === EXACT KEYWORD MATCHING (HIGHEST PRIORITY) ===
                if (msg === 'hours' || msg === 'hour') {
                    console.log('‚úÖ Matched: hours');
                    return 'üïê <strong>Our Business Hours</strong><br><br>üìÖ Monday - Saturday: 9:00 AM - 8:00 PM<br>üìÖ Sunday: 10:00 AM - 6:00 PM<br><br>Visit us or book phone/online consultation!';
                }
                
                if (msg === 'astrology') {
                    console.log('‚úÖ Matched: astrology');
                    return 'üåü <strong>What is Astrology?</strong><br><br>Astrology is the ancient science of studying the influence of celestial bodies on human affairs and earthly events. It analyzes planetary positions at your birth time to provide insights about personality, relationships, career, and life path.';
                }
                
                if (msg === 'kundali' || msg === 'kundli' || msg === 'horoscope') {
                    console.log('‚úÖ Matched: kundali/horoscope');
                    return 'üìä <strong>Kundali/Horoscope Reading</strong><br><br>A Kundali (birth chart) is a detailed astrological chart based on your birth date, time, and place. It reveals planetary positions and their influence on various life aspects. We provide accurate Kundali analysis for personal guidance.';
                }
                
                if (msg === 'services' || msg === 'service') {
                    console.log('‚úÖ Matched: services');
                    return 'üåü <strong>Our Services</strong><br><br>‚ú® Kundali Reading<br>üé¥ Tarot Reading<br>üíº Career Guidance<br>üíï Love & Relationships<br>üè• Health Astrology<br>üí∞ Financial Forecast<br>üè† Vastu Consultation<br>üíé Gemstone Therapy<br>üîÆ Numerology<br>üåô Palmistry<br><br>Which interests you?';
                }
                
                if (msg === 'price' || msg === 'pricing') {
                    console.log('‚úÖ Matched: price');
                    return 'üí∞ <strong>Pricing Information</strong><br><br>Our consultation fees vary by service type. Contact us at <strong>9591909552</strong> for detailed pricing, packages, and special offers!';
                }
                
                if (msg === 'book' || msg === 'booking') {
                    console.log('‚úÖ Matched: book');
                    return 'üìÖ <strong>Book Consultation</strong><br><br>To book your consultation:<br>üìû Call: <strong>9591909552</strong><br>üìß Email us<br>üåê Visit Contact section<br><br>We\'ll schedule at your convenience!';
                }
                
                // === GREETING RESPONSES ===
                if (msg.includes('hello') || msg.includes('hi ') || msg === 'hi' || msg.includes('namaste') || msg.includes('hey')) {
                    console.log('‚úÖ Matched: greeting');
                    return 'üôè <strong>Namaste!</strong> Welcome to our Astrology Center! How can I assist you today with your astrological queries?';
                }
                
                if (msg.includes('good morning')) {
                    return 'üåÖ <strong>Good Morning!</strong> May your day be filled with cosmic blessings! How can I help you today?';
                }
                
                if (msg.includes('good afternoon')) {
                    return '‚òÄÔ∏è <strong>Good Afternoon!</strong> How can I assist you with your astrological needs?';
                }
                
                if (msg.includes('good evening')) {
                    return 'üåÜ <strong>Good Evening!</strong> Welcome! What can I help you discover about your destiny?';
                }
                
                // === WHAT IS QUESTIONS (100+) ===
                if (msg.includes('what is astrology')) {
                    console.log('‚úÖ Matched: what is astrology');
                    return 'üåü <strong>What is Astrology?</strong><br><br>Astrology is the ancient science studying celestial bodies\' influence on human affairs. It analyzes planetary positions at birth to provide insights about personality, relationships, career, health, and life path.';
                }
                
                if (msg.includes('what is kundali') || msg.includes('what is kundli')) {
                    return 'üìä <strong>What is Kundali?</strong><br><br>A Kundali (birth chart) is your astrological blueprint created from exact birth date, time, and place. It shows planetary positions, houses, and their impacts on your life journey.';
                }
                
                if (msg.includes('what is tarot')) {
                    return 'üé¥ <strong>What is Tarot?</strong><br><br>Tarot is a divination system using 78 cards to gain insights into past, present, and future. Each card has symbolic meanings that provide guidance for life decisions.';
                }
                
                if (msg.includes('what is vastu')) {
                    return 'üè† <strong>What is Vastu?</strong><br><br>Vastu Shastra is the ancient Indian science of architecture and design. It harmonizes your living/working spaces with natural forces for prosperity, health, and happiness.';
                }
                
                if (msg.includes('what is numerology')) {
                    return 'üî¢ <strong>What is Numerology?</strong><br><br>Numerology studies numbers\' mystical significance in your life. Your birth date and name reveal personality traits, life path, and destiny numbers.';
                }
                
                if (msg.includes('what is palmistry') || msg.includes('what is palm reading')) {
                    return 'üñêÔ∏è <strong>What is Palmistry?</strong><br><br>Palmistry (chiromancy) reads lines, mounts, and shapes of your palm to reveal personality, life events, relationships, and potential future.';
                }
                
                if (msg.includes('what is gemstone')) {
                    return 'üíé <strong>What is Gemstone Therapy?</strong><br><br>Gemstone therapy uses precious stones\' energies to balance planetary influences. Each gemstone connects to specific planets and can enhance positive energies in your life.';
                }
                
                if (msg.includes('what is zodiac')) {
                    return '‚ôà <strong>What is Zodiac?</strong><br><br>The Zodiac is a band of 12 constellations through which the Sun, Moon, and planets travel. Your zodiac sign is determined by the Sun\'s position at your birth.';
                }
                
                if (msg.includes('what is rashi')) {
                    return 'üåô <strong>What is Rashi?</strong><br><br>Rashi is your Moon sign in Vedic astrology. It represents your emotional nature, mind, and subconscious patterns, determined by the Moon\'s position at birth.';
                }
                
                if (msg.includes('what is nakshatra')) {
                    return '‚≠ê <strong>What is Nakshatra?</strong><br><br>Nakshatras are 27 lunar mansions in Vedic astrology. Your birth nakshatra reveals deeper personality traits, life purpose, and spiritual path.';
                }
                
                // === HOW QUESTIONS ===
                if (msg.includes('how accurate') || msg.includes('accuracy')) {
                    console.log('‚úÖ Matched: accuracy');
                    return 'üéØ <strong>Accuracy in Astrology</strong><br><br>Accuracy depends on:<br>‚Ä¢ Astrologer\'s expertise<br>‚Ä¢ Precision of birth data<br>‚Ä¢ Interpretation quality<br><br>Our experienced professionals use Vedic principles for highly accurate readings!';
                }
                
                if (msg.includes('how long') || msg.includes('how much time') || msg.includes('duration')) {
                    console.log('‚úÖ Matched: duration');
                    return '‚è±Ô∏è <strong>Consultation Duration</strong><br><br>Most consultations: 45-60 minutes<br><br>This includes:<br>‚Ä¢ Detailed chart analysis<br>‚Ä¢ Your specific questions<br>‚Ä¢ Remedies & guidance<br>‚Ä¢ Future predictions';
                }
                
                if (msg.includes('how to book') || msg.includes('how do i book')) {
                    return 'üìû <strong>How to Book</strong><br><br>Easy booking process:<br>1. Call <strong>9591909552</strong><br>2. Choose your service<br>3. Pick convenient time<br>4. Confirm appointment<br><br>Or visit our Contact section!';
                }
                
                if (msg.includes('how does astrology work')) {
                    return '‚öôÔ∏è <strong>How Astrology Works</strong><br><br>Astrology works by:<br>‚Ä¢ Mapping planetary positions at birth<br>‚Ä¢ Analyzing their relationships<br>‚Ä¢ Interpreting cosmic influences<br>‚Ä¢ Providing life insights<br><br>It\'s based on 5000+ years of observation!';
                }
                
                if (msg.includes('how can astrology help')) {
                    return 'üí´ <strong>How Astrology Helps</strong><br><br>Astrology helps with:<br>‚Ä¢ Life direction & purpose<br>‚Ä¢ Career choices<br>‚Ä¢ Relationship compatibility<br>‚Ä¢ Health awareness<br>‚Ä¢ Timing major decisions<br>‚Ä¢ Understanding challenges<br>‚Ä¢ Personal growth';
                }
                
                // === INFORMATION & DETAILS QUESTIONS ===
                if (msg.includes('what information') || msg.includes('what details') || msg.includes('birth details') || msg.includes('what do you need')) {
                    console.log('‚úÖ Matched: information needed');
                    return 'üìù <strong>Information Required</strong><br><br>For accurate reading, we need:<br>‚úÖ Exact birth date<br>‚úÖ Birth time (as precise as possible)<br>‚úÖ Birth place/city<br><br>üí° If birth time unknown, we can still provide general reading!';
                }
                
                // === SERVICES INQUIRIES ===
                if (msg.includes('career guidance') || msg.includes('career astrology')) {
                    return 'üíº <strong>Career Guidance</strong><br><br>Our career astrology includes:<br>‚Ä¢ Best career paths<br>‚Ä¢ Job change timing<br>‚Ä¢ Business ventures<br>‚Ä¢ Promotion prospects<br>‚Ä¢ Professional growth<br><br>Call <strong>9591909552</strong> to discuss your career!';
                }
                
                if (msg.includes('love') || msg.includes('relationship') || msg.includes('marriage')) {
                    return 'üíï <strong>Love & Relationships</strong><br><br>We provide insights on:<br>‚Ä¢ Compatibility analysis<br>‚Ä¢ Marriage timing<br>‚Ä¢ Relationship problems<br>‚Ä¢ Partner matching<br>‚Ä¢ Love life forecast<br><br>Find your cosmic connection!';
                }
                
                if (msg.includes('health astrology') || msg.includes('health consultation')) {
                    return 'üè• <strong>Health Astrology</strong><br><br>Health readings cover:<br>‚Ä¢ Vulnerable health areas<br>‚Ä¢ Disease susceptibility<br>‚Ä¢ Recovery periods<br>‚Ä¢ Preventive measures<br>‚Ä¢ Wellness timing<br><br>Your health in the stars!';
                }
                
                if (msg.includes('financial') || msg.includes('money') || msg.includes('wealth')) {
                    return 'üí∞ <strong>Financial Astrology</strong><br><br>Financial guidance includes:<br>‚Ä¢ Income prospects<br>‚Ä¢ Investment timing<br>‚Ä¢ Business success<br>‚Ä¢ Wealth accumulation<br>‚Ä¢ Financial stability<br><br>Align finances with cosmos!';
                }
                
                // === TIMING & HOURS ===
                if (msg.includes('timing') || msg.includes('open') || msg.includes('when are you open') || msg.includes('business hours')) {
                    console.log('‚úÖ Matched: timings');
                    return 'üïê <strong>Our Business Hours</strong><br><br>üìÖ Monday - Saturday<br>‚è∞ 9:00 AM - 8:00 PM<br><br>üìÖ Sunday<br>‚è∞ 10:00 AM - 6:00 PM<br><br>Walk-ins welcome or book in advance!';
                }
                
                // === LOCATION & ADDRESS ===
                if (msg.includes('location') || msg.includes('address') || msg.includes('where are you') || msg.includes('where located')) {
                    console.log('‚úÖ Matched: location');
                    return 'üìç <strong>Our Location</strong><br><br>We are located in:<br>üèõÔ∏è Mysuru, Karnataka, India<br><br>Check our Contact section for:<br>‚Ä¢ Exact address<br>‚Ä¢ Google Maps link<br>‚Ä¢ Directions<br><br>Visit us today!';
                }
                
                // === PRICING & FEES ===
                if (msg.includes('cost') || msg.includes('fee') || msg.includes('charge') || msg.includes('how much')) {
                    console.log('‚úÖ Matched: pricing');
                    return 'üí∞ <strong>Pricing Information</strong><br><br>Consultation fees vary by:<br>‚Ä¢ Service type<br>‚Ä¢ Duration<br>‚Ä¢ Complexity<br><br>Contact <strong>9591909552</strong> for:<br>‚Ä¢ Detailed pricing<br>‚Ä¢ Package deals<br>‚Ä¢ Special offers';
                }
                
                // === SPECIFIC SERVICES (DETAILED) ===
                if (msg.includes('kundali reading') || msg.includes('birth chart')) {
                    return 'üìä <strong>Kundali Reading Service</strong><br><br>Comprehensive analysis of:<br>‚Ä¢ Planetary positions<br>‚Ä¢ House placements<br>‚Ä¢ Dasha periods<br>‚Ä¢ Life predictions<br>‚Ä¢ Remedies<br><br>Duration: 60 mins<br>Call <strong>9591909552</strong>!';
                }
                
                if (msg.includes('tarot reading')) {
                    return 'üé¥ <strong>Tarot Reading Service</strong><br><br>Discover guidance on:<br>‚Ä¢ Current situations<br>‚Ä¢ Future possibilities<br>‚Ä¢ Decision making<br>‚Ä¢ Relationship insights<br>‚Ä¢ Career paths<br><br>Book your tarot session today!';
                }
                
                if (msg.includes('vastu consultation')) {
                    return 'üè† <strong>Vastu Consultation</strong><br><br>Services include:<br>‚Ä¢ Home/office inspection<br>‚Ä¢ Space optimization<br>‚Ä¢ Direction analysis<br>‚Ä¢ Remedial measures<br>‚Ä¢ Prosperity enhancement<br><br>Harmonize your space!';
                }
                
                // === REMEDIES & SOLUTIONS ===
                if (msg.includes('remedy') || msg.includes('remedies') || msg.includes('solution')) {
                    return 'üîÆ <strong>Astrological Remedies</strong><br><br>We provide:<br>‚Ä¢ Gemstone recommendations<br>‚Ä¢ Mantra chanting<br>‚Ä¢ Yantra placement<br>‚Ä¢ Puja rituals<br>‚Ä¢ Charitable acts<br>‚Ä¢ Lifestyle changes<br><br>Positive cosmic alignment!';
                }
                
                if (msg.includes('gemstone recommendation')) {
                    return 'üíé <strong>Gemstone Recommendations</strong><br><br>We suggest gemstones for:<br>‚Ä¢ Strengthening weak planets<br>‚Ä¢ Balancing energies<br>‚Ä¢ Health improvement<br>‚Ä¢ Career boost<br>‚Ä¢ Relationship harmony<br><br>Personalized for your chart!';
                }
                
                // === CONSULTATION TYPES ===
                if (msg.includes('online consultation') || msg.includes('phone consultation')) {
                    return 'üíª <strong>Online/Phone Consultations</strong><br><br>We offer:<br>‚Ä¢ Video calls<br>‚Ä¢ Phone sessions<br>‚Ä¢ WhatsApp consultations<br>‚Ä¢ Email readings<br><br>Convenient from anywhere!<br>Call <strong>9591909552</strong> to schedule!';
                }
                
                if (msg.includes('walk-in') || msg.includes('visit')) {
                    return 'üö∂ <strong>Walk-in Consultations</strong><br><br>Welcome to visit us!<br>üìç Location: Mysuru, Karnataka<br>‚è∞ Mon-Sat: 9AM-8PM<br>‚è∞ Sunday: 10AM-6PM<br><br>üí° Booking recommended for priority!';
                }
                
                // === BOOKING & APPOINTMENT ===
                if (msg.includes('appointment') || msg.includes('schedule')) {
                    console.log('‚úÖ Matched: booking');
                    return 'üìÖ <strong>Schedule Appointment</strong><br><br>Quick steps:<br>1Ô∏è‚É£ Call <strong>9591909552</strong><br>2Ô∏è‚É£ Choose service<br>3Ô∏è‚É£ Pick date & time<br>4Ô∏è‚É£ Confirm details<br><br>We\'re ready to guide you!';
                }
                
                // === ZODIAC SIGNS ===
                if (msg.includes('aries') || msg.includes('mesh')) {
                    return '‚ôà <strong>Aries (Mesh)</strong><br><br>Traits: Bold, energetic, pioneering<br>Element: Fire<br>Ruling Planet: Mars<br><br>Get your personalized Aries reading!';
                }
                
                if (msg.includes('taurus') || msg.includes('vrishabh')) {
                    return '‚ôâ <strong>Taurus (Vrishabh)</strong><br><br>Traits: Stable, patient, practical<br>Element: Earth<br>Ruling Planet: Venus<br><br>Discover your Taurus potential!';
                }
                
                if (msg.includes('gemini') || msg.includes('mithun')) {
                    return '‚ôä <strong>Gemini (Mithun)</strong><br><br>Traits: Versatile, curious, communicative<br>Element: Air<br>Ruling Planet: Mercury<br><br>Explore your Gemini path!';
                }
                
                if (msg.includes('cancer') || msg.includes('kark')) {
                    return '‚ôã <strong>Cancer (Kark)</strong><br><br>Traits: Nurturing, emotional, intuitive<br>Element: Water<br>Ruling Planet: Moon<br><br>Uncover your Cancer wisdom!';
                }
                
                if (msg.includes('leo') || msg.includes('singh')) {
                    return '‚ôå <strong>Leo (Singh)</strong><br><br>Traits: Confident, generous, charismatic<br>Element: Fire<br>Ruling Planet: Sun<br><br>Shine with your Leo energy!';
                }
                
                if (msg.includes('virgo') || msg.includes('kanya')) {
                    return '‚ôç <strong>Virgo (Kanya)</strong><br><br>Traits: Analytical, practical, helpful<br>Element: Earth<br>Ruling Planet: Mercury<br><br>Perfect your Virgo strengths!';
                }
                
                if (msg.includes('libra') || msg.includes('tula')) {
                    return '‚ôé <strong>Libra (Tula)</strong><br><br>Traits: Balanced, diplomatic, charming<br>Element: Air<br>Ruling Planet: Venus<br><br>Harmonize with Libra insights!';
                }
                
                if (msg.includes('scorpio') || msg.includes('vrishchik')) {
                    return '‚ôè <strong>Scorpio (Vrishchik)</strong><br><br>Traits: Intense, passionate, transformative<br>Element: Water<br>Ruling Planet: Mars/Pluto<br><br>Embrace Scorpio power!';
                }
                
                if (msg.includes('sagittarius') || msg.includes('dhanu')) {
                    return '‚ôê <strong>Sagittarius (Dhanu)</strong><br><br>Traits: Optimistic, adventurous, philosophical<br>Element: Fire<br>Ruling Planet: Jupiter<br><br>Expand with Sagittarius!';
                }
                
                if (msg.includes('capricorn') || msg.includes('makar')) {
                    return '‚ôë <strong>Capricorn (Makar)</strong><br><br>Traits: Ambitious, disciplined, responsible<br>Element: Earth<br>Ruling Planet: Saturn<br><br>Achieve with Capricorn drive!';
                }
                
                if (msg.includes('aquarius') || msg.includes('kumbh')) {
                    return '‚ôí <strong>Aquarius (Kumbh)</strong><br><br>Traits: Innovative, humanitarian, independent<br>Element: Air<br>Ruling Planet: Saturn/Uranus<br><br>Revolutionize with Aquarius!';
                }
                
                if (msg.includes('pisces') || msg.includes('meen')) {
                    return '‚ôì <strong>Pisces (Meen)</strong><br><br>Traits: Compassionate, artistic, intuitive<br>Element: Water<br>Ruling Planet: Jupiter/Neptune<br><br>Dream with Pisces magic!';
                }
                
                // === PLANETS ===
                if (msg.includes('sun') || msg.includes('surya')) {
                    return '‚òÄÔ∏è <strong>Sun (Surya)</strong><br><br>Represents: Self, ego, vitality, father<br>Day: Sunday<br>Gemstone: Ruby<br><br>The soul of your chart!';
                }
                
                if (msg.includes('moon') || msg.includes('chandra')) {
                    return 'üåô <strong>Moon (Chandra)</strong><br><br>Represents: Mind, emotions, mother<br>Day: Monday<br>Gemstone: Pearl<br><br>Your emotional nature!';
                }
                
                if (msg.includes('mars') || msg.includes('mangal')) {
                    return 'üî¥ <strong>Mars (Mangal)</strong><br><br>Represents: Energy, courage, action<br>Day: Tuesday<br>Gemstone: Red Coral<br><br>Your drive & passion!';
                }
                
                if (msg.includes('mercury') || msg.includes('budh')) {
                    return 'üí¨ <strong>Mercury (Budh)</strong><br><br>Represents: Communication, intellect<br>Day: Wednesday<br>Gemstone: Emerald<br><br>Your mental abilities!';
                }
                
                if (msg.includes('jupiter') || msg.includes('guru') || msg.includes('brihaspati')) {
                    return 'üåü <strong>Jupiter (Guru)</strong><br><br>Represents: Wisdom, expansion, luck<br>Day: Thursday<br>Gemstone: Yellow Sapphire<br><br>Your fortune & growth!';
                }
                
                if (msg.includes('venus') || msg.includes('shukra')) {
                    return 'üíñ <strong>Venus (Shukra)</strong><br><br>Represents: Love, beauty, luxury<br>Day: Friday<br>Gemstone: Diamond<br><br>Your relationships & pleasures!';
                }
                
                if (msg.includes('saturn') || msg.includes('shani')) {
                    return '‚è≥ <strong>Saturn (Shani)</strong><br><br>Represents: Discipline, karma, challenges<br>Day: Saturday<br>Gemstone: Blue Sapphire<br><br>Your lessons & growth!';
                }
                
                if (msg.includes('rahu')) {
                    return 'üêâ <strong>Rahu (North Node)</strong><br><br>Represents: Illusions, desires, materialism<br>Gemstone: Hessonite<br><br>Your worldly ambitions!';
                }
                
                if (msg.includes('ketu')) {
                    return 'üîÆ <strong>Ketu (South Node)</strong><br><br>Represents: Spirituality, detachment, moksha<br>Gemstone: Cat\'s Eye<br><br>Your spiritual path!';
                }
                
                // === FREQUENTLY ASKED ===
                if (msg.includes('compatible') || msg.includes('compatibility')) {
                    return 'üíë <strong>Compatibility Analysis</strong><br><br>We check compatibility for:<br>‚Ä¢ Marriage partners<br>‚Ä¢ Business partners<br>‚Ä¢ Friendships<br><br>Using:<br>‚Ä¢ Guna Milan<br>‚Ä¢ Planetary positions<br>‚Ä¢ Doshas<br><br>Find your perfect match!';
                }
                
                if (msg.includes('mangal dosha') || msg.includes('manglik')) {
                    return 'üî¥ <strong>Mangal Dosha</strong><br><br>A dosha formed when Mars is in specific houses. We provide:<br>‚Ä¢ Dosha detection<br>‚Ä¢ Severity analysis<br>‚Ä¢ Remedial measures<br>‚Ä¢ Compatibility matching<br><br>Resolve your concerns!';
                }
                
                if (msg.includes('kaal sarp') || msg.includes('kalsarp')) {
                    return 'üêç <strong>Kaal Sarp Dosha</strong><br><br>Formed when all planets are between Rahu-Ketu. We offer:<br>‚Ä¢ Detailed analysis<br>‚Ä¢ Impact assessment<br>‚Ä¢ Puja recommendations<br>‚Ä¢ Remedial solutions<br><br>Minimize negative effects!';
                }
                
                if (msg.includes('mahadasha') || msg.includes('dasha')) {
                    return '‚è∞ <strong>Dasha Analysis</strong><br><br>Dasha periods show planetary influences over time. We analyze:<br>‚Ä¢ Current Mahadasha<br>‚Ä¢ Antardasha effects<br>‚Ä¢ Transit impacts<br>‚Ä¢ Favorable periods<br><br>Time your actions perfectly!';
                }
                
                // === CONTACT & SUPPORT ===
                if (msg.includes('contact') || msg.includes('reach you') || msg.includes('call')) {
                    return 'üìû <strong>Contact Us</strong><br><br>Ways to reach:<br>üì± Phone: <strong>9591909552</strong><br>üìß Email: Check Contact section<br>üìç Visit: Mysuru, Karnataka<br>üí¨ WhatsApp: Available<br><br>We\'re here to help!';
                }
                
                if (msg.includes('whatsapp')) {
                    return 'üí¨ <strong>WhatsApp Consultation</strong><br><br>Yes! We offer WhatsApp consultations:<br>‚Ä¢ Quick queries<br>‚Ä¢ Follow-ups<br>‚Ä¢ Booking confirmation<br><br>Message us at <strong>9591909552</strong>!';
                }
                
                // === THANK YOU ===
                if (msg.includes('thank') || msg.includes('thanks')) {
                    console.log('‚úÖ Matched: thanks');
                    return 'üôè <strong>You\'re Most Welcome!</strong><br><br>May the stars guide you to success, happiness, and prosperity! Feel free to ask anything else! ‚ú®';
                }
                
                // === BYE / GOODBYE ===
                if (msg.includes('bye') || msg.includes('goodbye') || msg.includes('see you')) {
                    return 'üëã <strong>Goodbye!</strong> May cosmic blessings be with you always! We\'re here whenever you need guidance. Have a blessed day! üåü';
                }
                
                // === HELP ===
                if (msg.includes('help') || msg.includes('assist')) {
                    return '‚ùì <strong>How Can I Help?</strong><br><br>Ask me about:<br>üåü Astrology basics<br>üìä Services & readings<br>üí∞ Pricing<br>üìÖ Booking<br>üïê Hours<br>üìç Location<br>‚ôà Zodiac signs<br>üåô Planets<br>üíé Remedies<br><br>Or call <strong>9591909552</strong>!';
                }
                
                // === PAYMENT ===
                if (msg.includes('payment') || msg.includes('pay')) {
                    return 'üí≥ <strong>Payment Options</strong><br><br>We accept:<br>‚Ä¢ Cash<br>‚Ä¢ UPI/PhonePe/GPay<br>‚Ä¢ Card payments<br>‚Ä¢ Bank transfer<br><br>Payment after consultation. Call <strong>9591909552</strong> for details!';
                }
                
                // === LANGUAGES ===
                if (msg.includes('language') || msg.includes('hindi') || msg.includes('kannada')) {
                    return 'üó£Ô∏è <strong>Languages We Speak</strong><br><br>Consultations available in:<br>‚Ä¢ English<br>‚Ä¢ Hindi<br>‚Ä¢ Kannada<br>‚Ä¢ Telugu<br>‚Ä¢ Tamil<br><br>Communicate comfortably!';
                }
                
                // === REPORT ===
                if (msg.includes('report') || msg.includes('written report')) {
                    return 'üìÑ <strong>Written Reports</strong><br><br>We provide detailed written reports including:<br>‚Ä¢ Complete chart analysis<br>‚Ä¢ Predictions<br>‚Ä¢ Remedies<br>‚Ä¢ Recommendations<br><br>Available in print/PDF!';
                }
                
                // === EXPERIENCE ===
                if (msg.includes('experience') || msg.includes('expertise') || msg.includes('qualified')) {
                    return 'üéì <strong>Our Expertise</strong><br><br>Our astrologers have:<br>‚Ä¢ 15+ years experience<br>‚Ä¢ Vedic astrology certification<br>‚Ä¢ Thousands of consultations<br>‚Ä¢ High accuracy rate<br>‚Ä¢ Client satisfaction<br><br>Trust the experts!';
                }
                
                // === DEFAULT FALLBACK ===
                console.log('‚ö†Ô∏è No match found, using fallback');
                return 'üí¨ <strong>I\'m Here to Help!</strong><br><br>You can ask about:<br>üåü Astrology & Services<br>üìÖ Booking & Appointments<br>üí∞ Pricing & Fees<br>üïê Business Hours<br>üìç Location<br>‚ôà Zodiac Signs<br>üåô Planets & Doshas<br>üíé Remedies<br><br>Or call <strong>9591909552</strong> directly!';
            }
            
            console.log('‚úÖ Chatbot initialized successfully');
        }
        
        // Load Footer Contact Info from API
        async function loadContactInfo() {
            try {
                const response = await fetch('/api/business-info');
                const config = await response.json();
                globalBusinessInfo = config; // Store globally for use in other functions
                
                if (config) {
                    // Update footer
                    document.getElementById('footer-phone').textContent = config.phone || '+91 8431729319';
                    document.getElementById('footer-email').textContent = config.email || 'info@example.com';
                    
                    // Update contact section cards
                    const phoneDisplay = document.getElementById('contact-phone-display');
                    const emailDisplay = document.getElementById('contact-email-display');
                    const addressDisplay = document.getElementById('contact-address-display');
                    const hoursDisplay = document.getElementById('contact-hours-display');
                    const locationMapBtn = document.getElementById('location-map-btn');
                    
                    if (phoneDisplay) phoneDisplay.textContent = config.phone || '+91 98765 43210';
                    if (emailDisplay) emailDisplay.textContent = config.email || 'info@omsrimahakali.com';
                    if (addressDisplay) addressDisplay.textContent = config.address || 'Bangalore, Karnataka, India';
                    if (hoursDisplay) hoursDisplay.textContent = config.business_hours || 'Mon-Sun: 9AM - 8PM';
                    
                    // Update location map button with Google Maps link
                    if (locationMapBtn) {
                        const address = config.address || 'Bangalore, Karnataka, India';
                        const mapUrl = config.google_maps_url || 'https://maps.app.goo.gl/huh17Kp2mp3DyqJu5';
                        locationMapBtn.href = mapUrl;
                    }
                    
                    // Update contact form quick action buttons
                    const callBtn = document.getElementById('quick-call-btn');
                    const whatsappBtn = document.getElementById('quick-whatsapp-btn');
                    if (callBtn && config.phone) callBtn.href = `tel:${config.phone}`;
                    if (whatsappBtn && config.phone) {
                        const whatsappNum = config.phone.replace(/[^0-9]/g, '');
                        const greeting = encodeURIComponent('üôè Namaste! I am interested in your astrology services. Please guide me with consultation details, timings, and pricing. Thank you!');
                        whatsappBtn.href = `https://wa.me/${whatsappNum}?text=${greeting}`;
                    };
                    
                    const socialsDiv = document.getElementById('footer-socials');
                    socialsDiv.innerHTML = '';
                    
                    // Social media links from business_info table (social_media JSON field)
                    // Fetch Follow Us section data properly from database
                    if (config.social_media && typeof config.social_media === 'object') {
                        const socials = config.social_media;
                        if (socials.facebook) {
                            socialsDiv.innerHTML += `<a href="${socials.facebook}" target="_blank" rel="noopener noreferrer" class="text-2xl hover:text-yellow-300 transition" aria-label="Facebook"><i class="fab fa-facebook"></i></a>`;
                        }
                        if (socials.instagram) {
                            socialsDiv.innerHTML += `<a href="${socials.instagram}" target="_blank" rel="noopener noreferrer" class="text-2xl hover:text-yellow-300 transition" aria-label="Instagram"><i class="fab fa-instagram"></i></a>`;
                        }
                        // YouTube removed as requested
                        if (socials.twitter) {
                            socialsDiv.innerHTML += `<a href="${socials.twitter}" target="_blank" rel="noopener noreferrer" class="text-2xl hover:text-yellow-300 transition" aria-label="Twitter"><i class="fab fa-twitter"></i></a>`;
                        }
                        if (socials.linkedin) {
                            socialsDiv.innerHTML += `<a href="${socials.linkedin}" target="_blank" rel="noopener noreferrer" class="text-2xl hover:text-yellow-300 transition" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>`;
                        }
                    }
                    
                    // Fallback to individual fields if social_media object doesn't exist
                    if (!config.social_media || (typeof config.social_media === 'object' && Object.keys(config.social_media).length === 0)) {
                        if (config.facebook) {
                            socialsDiv.innerHTML += `<a href="${config.facebook}" target="_blank" rel="noopener noreferrer" class="text-2xl hover:text-yellow-300 transition"><i class="fab fa-facebook"></i></a>`;
                        }
                        if (config.instagram) {
                            socialsDiv.innerHTML += `<a href="${config.instagram}" target="_blank" rel="noopener noreferrer" class="text-2xl hover:text-yellow-300 transition"><i class="fab fa-instagram"></i></a>`;
                        }
                        // YouTube removed as requested
                        if (config.twitter) {
                            socialsDiv.innerHTML += `<a href="${config.twitter}" target="_blank" rel="noopener noreferrer" class="text-2xl hover:text-yellow-300 transition"><i class="fab fa-twitter"></i></a>`;
                        }
                    }
                    
                    // Add WhatsApp with auto-greeting message
                    const whatsappNumber = config.whatsapp_number || config.whatsapp || config.phone;
                    if (whatsappNumber) {
                        const whatsappNum = whatsappNumber.replace(/\D/g, '');
                        const greeting = encodeURIComponent('üôè Namaste! I am interested in your astrology services. Please guide me with consultation details, timings, and pricing. Thank you!');
                        socialsDiv.innerHTML += `<a href="https://wa.me/${whatsappNum}?text=${greeting}" target="_blank" rel="noopener noreferrer" class="text-2xl hover:text-yellow-300 transition"><i class="fab fa-whatsapp"></i></a>`;
                    }

                    // Apply background images to services sections from navbar_settings
                    const navbarResponse = await fetch('/api/navbar-settings');
                    if (navbarResponse.ok) {
                        const navbarSettings = await navbarResponse.json();
                        
                        if (navbarSettings.astrological_services_bg_url) {
                            console.log('üé® Applying Astrological Services BG:', navbarSettings.astrological_services_bg_url);
                            applyServiceBackground('services', navbarSettings.astrological_services_bg_url);
                        }
                        
                        if (navbarSettings.pooja_services_bg_url) {
                            console.log('üé® Applying Pooja Services BG:', navbarSettings.pooja_services_bg_url);
                            applyServiceBackground('pooja', navbarSettings.pooja_services_bg_url);
                        }
                    }
                    
                    // Fallback to site_settings if needed
                    if (config.astrological_services_bg_url) {
                        applyServiceBackground('services', config.astrological_services_bg_url);
                    }
                    if (config.pooja_services_bg_url) {
                        applyServiceBackground('pooja', config.pooja_services_bg_url);
                    }
                }
            } catch (error) {
                console.error('Error loading contact info:', error);
                document.getElementById('footer-phone').textContent = 'Error loading';
                document.getElementById('footer-email').textContent = 'Error loading';
            }
        }
        
        // Helper function to apply background to service sections
        function applyServiceBackground(sectionId, bgUrl) {
            const section = document.getElementById(sectionId);
            if (!section) {
                console.warn(`‚ö†Ô∏è Section not found: ${sectionId}`);
                return;
            }
            if (!bgUrl) {
                console.warn(`‚ö†Ô∏è No background URL for section: ${sectionId}`);
                return;
            }
            
            // Keep original URL (don't convert - backgrounds can be from Supabase or local)
            console.log(`üñºÔ∏è Applying background to ${sectionId}:`, bgUrl);
            
            // Apply background styles - scroll with section
            section.style.backgroundImage = `url('${bgUrl}')`;
            section.style.backgroundSize = 'cover';
            section.style.backgroundPosition = 'center';
            section.style.backgroundRepeat = 'no-repeat';
            section.style.backgroundAttachment = 'scroll'; // Scroll with section
            section.style.position = 'relative';
            
            // Add subtle overlay for readability (lighter for better visibility)
            let overlay = document.getElementById(`${sectionId}-bg-overlay`);
            if (!overlay) {
                overlay = document.createElement('div');
                overlay.id = `${sectionId}-bg-overlay`;
                overlay.style.position = 'absolute';
                overlay.style.inset = '0';
                overlay.style.backgroundColor = 'rgba(255,255,255,0.85)'; // Lighter overlay
                overlay.style.pointerEvents = 'none';
                overlay.style.zIndex = '1';
                section.prepend(overlay);
            }
            
            // Ensure container content sits above overlay
            const container = section.querySelector('.container');
            if (container) {
                container.style.position = 'relative';
                container.style.zIndex = '10';
            }
            
            console.log(`‚úÖ Background applied successfully to ${sectionId}`);
        }

        // Global helper to convert ALL URLs to local /uploads/ with bucket fallback
        function convertToLocalUrl(url, skipConversion = false) {
            try {
                if (!url) return '';
                if (skipConversion) return url; // Keep original URL when explicitly asked

                // Already local
                if (url.startsWith('/uploads/')) return url;

                // Extract filename from common patterns (Supabase/storage URLs or path URLs)
                let filename = '';
                try {
                    const u = new URL(url, window.location.origin);
                    const pathParts = u.pathname.split('/');
                    filename = pathParts[pathParts.length - 1];
                } catch (_) {
                    // URL may be a relative path; try string split
                    const parts = url.split('/');
                    filename = parts[parts.length - 1];
                }
                filename = (filename || '').split('?')[0];

                // If we still can't determine, force it into uploads with original path string
                const localUrl = filename ? `/uploads/${filename}` : `/uploads/${url}`;
                return localUrl;
            } catch (e) {
                console.error('convertToLocalUrl error:', e);
                return url;
            }
        }
        
        // Load and Display Reviews from Database
        // Variables declared at top of script section

        // NEW MODERN REVIEWS IMPLEMENTATION
        let reviewsRafId = null;
        let reviewsPaused = false;
        let reviewsCurrentIndex = 0;
        let reviewsAutoScrollSpeed = 0.3;
        
        // Default review image (falls back when no user image is present)
        const defaultReviewImage = '/static/assets/images/slider1-1765343440118-814547787.png';
        // Default avatar placeholder (global)
        const defaultAvatar = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill=%22%23a855f7%22%3E%3Cpath d=%22M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z%22/%3E%3C/svg%3E';

        // Letter avatar fallback (global)
        function getLetterAvatar(name) {
            const safeName = (name || 'A').trim();
            const letter = safeName.charAt(0).toUpperCase() || 'A';
            const palette = ['#7C3AED', '#EC4899', '#2563EB', '#059669', '#F59E0B', '#DC2626', '#0EA5E9', '#8B5CF6'];
            let hash = 0;
            for (let i = 0; i < safeName.length; i++) hash = ((hash << 5) - hash) + safeName.charCodeAt(i);
            const color = palette[Math.abs(hash) % palette.length];
            const svg = `
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48">
                    <rect width="100%" height="100%" rx="24" fill="${color}"/>
                    <text x="50%" y="54%" dominant-baseline="middle" text-anchor="middle" fill="#fff" font-size="24" font-weight="700" font-family="Arial, sans-serif">${letter}</text>
                </svg>`;
            return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);
        }

        function computeReviewSlideWidth() {
            const carousel = document.getElementById('reviews-carousel');
            if (!carousel || !carousel.firstElementChild) return 0;
            const gap = parseInt(window.getComputedStyle(carousel).gap || '16', 10);
            const width = carousel.firstElementChild.getBoundingClientRect().width;
            return width + gap;
        }

        // Default review image as data URL (SVG)
        const defaultReviewImageSVG = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Ccircle fill="%237C3AED" cx="50" cy="50" r="50"/%3E%3Ctext fill="white" font-size="40" font-weight="bold" x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3Eüë§%3C/text%3E%3C/svg%3E';

        function renderReviewsCarousel() {
            const carousel = document.getElementById('reviews-carousel');
            if (!carousel) return;
            
            if (!reviewsData || reviewsData.length === 0) {
                carousel.innerHTML = `
                    <div class="w-full text-center py-12">
                        <i class="fas fa-comments text-gray-300 text-6xl mb-4"></i>
                        <p class="text-gray-500 text-lg">No reviews yet. Be the first to share your experience!</p>
                    </div>
                `;
                return;
            }

            // Remove duplicates and sort
            const uniqueReviews = [];
            const seen = new Set();
            reviewsData.forEach(r => {
                const key = r.id || `${r.name || ''}-${r.review_text || r.text || ''}`;
                if (!seen.has(key)) {
                    seen.add(key);
                    uniqueReviews.push(r);
                }
            });
            uniqueReviews.sort((a, b) => (a.display_order ?? 999) - (b.display_order ?? 999));

            // Duplicate for infinite scroll
            const multiplier = Math.max(3, Math.ceil(8 / uniqueReviews.length));
            let allReviews = [];
            for (let i = 0; i < multiplier; i++) {
                allReviews = allReviews.concat(uniqueReviews);
            }

            carousel.innerHTML = '';

            // Create modern review cards
            allReviews.forEach((review) => {
                const name = review.name || 'Anonymous';
                const text = review.review_text || review.text || 'Excellent service!';
                const rating = review.rating || 5;
                const imageSource = (review.photo || review.image_url || review.user_image || review.avatar || '').trim();
                
                // Generate gradient avatar
                const colors = [
                    ['#9333EA', '#EC4899'],
                    ['#3B82F6', '#8B5CF6'],
                    ['#10B981', '#059669'],
                    ['#F59E0B', '#EF4444'],
                    ['#06B6D4', '#3B82F6'],
                    ['#EC4899', '#F97316']
                ];
                const colorIndex = Math.abs(name.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0)) % colors.length;
                const [color1, color2] = colors[colorIndex];

                const card = document.createElement('div');
                card.className = 'review-card-modern';
                
                let avatarHTML;
                if (imageSource) {
                    const converted = convertToLocalUrl(imageSource);
                    avatarHTML = `
                        <img src="${converted}" alt="${name}" 
                             class="w-full h-full object-cover" 
                             loading="lazy" 
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="w-full h-full flex items-center justify-center text-white font-bold text-xl" 
                             style="display: none; background: linear-gradient(135deg, ${color1}, ${color2});">
                            ${name.charAt(0).toUpperCase()}
                        </div>
                    `;
                } else {
                    avatarHTML = `
                        <div class="w-full h-full flex items-center justify-center text-white font-bold text-xl" 
                             style="background: linear-gradient(135deg, ${color1}, ${color2});">
                            ${name.charAt(0).toUpperCase()}
                        </div>
                    `;
                }

                // Generate star rating
                let stars = '';
                for (let i = 0; i < 5; i++) {
                    if (i < rating) {
                        stars += '<i class="fas fa-star text-yellow-400"></i>';
                    } else {
                        stars += '<i class="far fa-star text-gray-300"></i>';
                    }
                }
                
                card.innerHTML = `
                    <i class="fas fa-quote-right review-quote-icon"></i>
                    <div class="flex items-center gap-4 mb-4">
                        <div class="w-14 h-14 rounded-full overflow-hidden ring-4 ring-purple-100 flex-shrink-0">
                            ${avatarHTML}
                        </div>
                        <div class="flex-1 min-w-0">
                            <h4 class="font-bold text-gray-800 text-base truncate">${name}</h4>
                            <div class="flex gap-0.5 mt-1">
                                ${stars}
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm leading-relaxed line-clamp-4">${text}</p>
                `;
                carousel.appendChild(card);
            });

            startModernReviewsScroll();
        }

        function startModernReviewsScroll() {
            const carousel = document.getElementById('reviews-carousel');
            const prevBtn = document.getElementById('reviews-prev');
            const nextBtn = document.getElementById('reviews-next');
            
            if (!carousel || !carousel.children.length) return;
            
            let offset = 0;
            const cardWidth = carousel.firstElementChild.offsetWidth + 24; // card width + gap
            
            // Auto-scroll animation
            const autoScroll = () => {
                if (!reviewsPaused) {
                    offset -= reviewsAutoScrollSpeed;
                    
                    // Reset when scrolled one card width
                    if (Math.abs(offset) >= cardWidth) {
                        offset += cardWidth;
                        const first = carousel.firstElementChild;
                        if (first) carousel.appendChild(first);
                    }
                    
                    carousel.style.transform = `translateX(${offset}px)`;
                }
                reviewsRafId = requestAnimationFrame(autoScroll);
            };
            
            // Start auto-scroll
            cancelAnimationFrame(reviewsRafId);
            reviewsRafId = requestAnimationFrame(autoScroll);
            
            // Pause/Resume controls
            const pause = () => { reviewsPaused = true; };
            const resume = () => { reviewsPaused = false; };
            
            carousel.addEventListener('mouseenter', pause);
            carousel.addEventListener('mouseleave', resume);
            carousel.addEventListener('touchstart', pause, { passive: true });
            carousel.addEventListener('touchend', () => setTimeout(resume, 500), { passive: true });
            
            // Manual navigation
            if (prevBtn) {
                prevBtn.addEventListener('click', () => {
                    const last = carousel.lastElementChild;
                    if (last) carousel.prepend(last);
                    offset = 0;
                    carousel.style.transform = 'translateX(0)';
                });
            }
            
            if (nextBtn) {
                nextBtn.addEventListener('click', () => {
                    const first = carousel.firstElementChild;
                    if (first) carousel.appendChild(first);
                    offset = 0;
                    carousel.style.transform = 'translateX(0)';
                });
            }
            
            // Responsive resize
            window.addEventListener('resize', () => {
                offset = 0;
                carousel.style.transform = 'translateX(0)';
            });
            
            // Touch/Swipe support for mobile
            let touchStartX = 0;
            let touchEndX = 0;
            
            carousel.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
            }, { passive: true });
            
            carousel.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, { passive: true });
            
            function handleSwipe() {
                const swipeThreshold = 50;
                if (touchStartX - touchEndX > swipeThreshold) {
                    // Swipe left - next
                    const first = carousel.firstElementChild;
                    if (first) carousel.appendChild(first);
                    offset = 0;
                    carousel.style.transform = 'translateX(0)';
                } else if (touchEndX - touchStartX > swipeThreshold) {
                    // Swipe right - prev
                    const last = carousel.lastElementChild;
                    if (last) carousel.prepend(last);
                    offset = 0;
                    carousel.style.transform = 'translateX(0)';
                }
            }
        }

        // Boot reviews - Load and display with modern design
        async function loadReviews() {
            console.log('üîÑ Loading reviews from API...');
            try {
                const cached = sessionStorage.getItem('reviewsData');
                if (cached) {
                    console.log('üì¶ Found cached reviews');
                    reviewsData = JSON.parse(cached);
                    if (reviewsData.length > 0) {
                        console.log('‚úÖ Using cached reviews:', reviewsData.length);
                        renderReviewsCarousel();
                        return;
                    }
                }
                console.log('üåê Fetching reviews from API...');
                const response = await fetch('/api/reviews');
                console.log('‚úÖ API response status:', response.status);
                reviewsData = await response.json();
                console.log('üìä Reviews received:', reviewsData?.length || 0);
                sessionStorage.setItem('reviewsData', JSON.stringify(reviewsData));
                if (reviewsData && reviewsData.length > 0) {
                    console.log('‚úÖ Rendering', reviewsData.length, 'reviews with modern design');
                    renderReviewsCarousel();
                } else {
                    console.warn('‚ö†Ô∏è No reviews to display');
                    const carousel = document.getElementById('reviews-carousel');
                    if (carousel) {
                        carousel.innerHTML = `
                            <div class="w-full text-center p-12">
                                <i class="fas fa-comments text-gray-300 text-6xl mb-4"></i>
                                <p class="text-gray-500 text-lg">No reviews available yet</p>
                            </div>
                        `;
                    }
                }
            } catch (error) {
                console.error('üí• Error loading reviews:', error);
                const carousel = document.getElementById('reviews-carousel');
                if (carousel) {
                    carousel.innerHTML = `
                        <div class="w-full text-center p-12">
                            <i class="fas fa-exclamation-circle text-red-400 text-6xl mb-4"></i>
                            <p class="text-red-500 text-lg">Failed to load reviews</p>
                        </div>
                    `;
                }
            }
        }

        // SETTINGS MENU DROPDOWN BEHAVIOR - Modern design with translate integration
        // ========================================
        document.addEventListener('DOMContentLoaded', () => {
            const settingsBtn = document.getElementById('settings-menu-btn');
            const settingsDropdown = document.getElementById('settings-dropdown');
            const closeBtn = document.getElementById('settings-close-btn');

            if (!settingsBtn || !settingsDropdown) return;

            // Position dropdown relative to button
            function positionDropdown() {
                const btnRect = settingsBtn.getBoundingClientRect();
                const dropdownWidth = 320;
                const viewportWidth = window.innerWidth;
                
                // Calculate right position to align with button
                let rightPos = viewportWidth - btnRect.right;
                if (rightPos < 10) rightPos = 10;
                
                // Calculate top position below navbar
                const topPos = btnRect.bottom + 8;
                
                settingsDropdown.style.top = topPos + 'px';
                settingsDropdown.style.right = rightPos + 'px';
                settingsDropdown.style.left = 'auto';
            }

            // Toggle dropdown overlay with proper positioning
            settingsBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                if (settingsDropdown.classList.contains('hidden')) {
                    positionDropdown();
                    settingsDropdown.classList.remove('hidden');
                } else {
                    settingsDropdown.classList.add('hidden');
                }
            });
            
            // Close button
            if (closeBtn) {
                closeBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    settingsDropdown.classList.add('hidden');
                });
            }

            // Reposition on resize
            window.addEventListener('resize', () => {
                if (!settingsDropdown.classList.contains('hidden')) {
                    positionDropdown();
                }
            });

            // Close when clicking outside
            document.addEventListener('click', (e) => {
                if (!settingsDropdown.classList.contains('hidden') && 
                    !settingsDropdown.contains(e.target) && 
                    !settingsBtn.contains(e.target)) {
                    settingsDropdown.classList.add('hidden');
                }
            });

            // Close on Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key !== 'Escape') return;
                if (!settingsDropdown.classList.contains('hidden')) {
                    settingsDropdown.classList.add('hidden');
                }
                });

        });

        // Fast loading - ensure loading screen is hidden quickly
        // Fallback: Force hide loading screen after 2 seconds max
        setTimeout(() => {
            const loadingScreen = document.getElementById('loading-screen');
            const mainContent = document.getElementById('main-content');
            if (loadingScreen && loadingScreen.style.display !== 'none') {
                console.log('‚ö° Force hiding loading screen (2s timeout)');
                loadingScreen.style.display = 'none';
                if (mainContent) {
                    mainContent.style.opacity = '1';
                    mainContent.style.visibility = 'visible';
                }
            }
        }, 2000);

        // Page initialization - Optimized for FAST Loading
        document.addEventListener('DOMContentLoaded', () => {
            console.log('‚úÖ Page ready');
            
            // Hide loading screen immediately after DOM ready
            setTimeout(() => {
                const loadingScreen = document.getElementById('loading-screen');
                const mainContent = document.getElementById('main-content');
                if (loadingScreen) loadingScreen.style.display = 'none';
                if (mainContent) {
                    mainContent.style.opacity = '1';
                    mainContent.style.visibility = 'visible';
                }
            }, 100);

            // Keep mobile menu positioned just below navbar height
            const adjustMobileMenuOffset = () => {
                const nav = document.getElementById('main-navbar');
                const mobileMenu = document.getElementById('mobile-menu');
                if (nav && mobileMenu) {
                    const navHeight = nav.offsetHeight || 64;
                    mobileMenu.style.top = `${navHeight}px`;
                }
            };
            adjustMobileMenuOffset();
            window.addEventListener('resize', adjustMobileMenuOffset);
            
            // Priority 0: Critical UI elements (immediate)
            loadNavbar();
            loadHeroBannerSlider();
            
            // Initialize chatbot visibility
            setTimeout(() => {
                ensureChatbotVisible();
                
                // Keep checking to ensure chatbot stays visible
                setInterval(ensureChatbotVisible, 2000);
            }, 1000);
            
            // Priority 1: Above-the-fold content (immediate)
            setTimeout(() => {
                loadAstrologicalServices();
                loadGallerySlides();
            }, 50);
            
            // Priority 2: Below-the-fold content (delayed)
            setTimeout(() => {
                loadAboutSection();
                loadContactInfo();
                loadReviews();
                
                // Initialize lazy loading for services
                initLazyLoading();
                
                // Setup contact form handler
                setupContactFormHandler();
            }, 150);
            
            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href === '#' || href === '') return;
                    
                    e.preventDefault();
                    const target = document.querySelector(href);
                    if (target) {
                        // Close mobile menu if open
                        const mobileMenu = document.getElementById('mobile-menu');
                        if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                            mobileMenu.classList.add('hidden');
                        }
                        
                        // Smooth scroll to section
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
            
            // Highlight active nav link on scroll
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link');
            
            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    if (scrollY >= (sectionTop - 100)) {
                        current = section.getAttribute('id');
                    }
                });
                
                navLinks.forEach(link => {
                    link.classList.remove('text-yellow-300');
                    if (link.getAttribute('href') === '#' + current) {
                        link.classList.add('text-yellow-300');
                    }
                });
            });

            // Solutions menu link fix: route '#solutions' to '#expert-solutions'
            document.addEventListener('click', function(e) {
                const a = e.target.closest('a[href="#solutions"]');
                if (a) {
                    e.preventDefault();
                    const target = document.getElementById('expert-solutions');
                    if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    
        // Chatbot state variable
        let isChatbotOpen = false;
        
        function ensureChatbotVisible() {
            const widget = document.getElementById('chatbot-widget');
            if (widget) {
                widget.style.setProperty('display', 'block', 'important');
                widget.style.setProperty('visibility', 'visible', 'important');
                widget.style.setProperty('opacity', '1', 'important');
                widget.style.setProperty('pointer-events', 'auto', 'important');
                widget.style.setProperty('z-index', '999999', 'important');
                widget.style.setProperty('position', 'fixed', 'important');
                widget.style.setProperty('bottom', '20px', 'important');
                widget.style.setProperty('right', '20px', 'important');
            }
            const toggle = document.getElementById('chatbot-toggle');
            if (toggle && !toggle.classList.contains('hidden-when-open')) {
                toggle.style.setProperty('display', 'flex', 'important');
                toggle.style.setProperty('visibility', 'visible', 'important');
                toggle.style.setProperty('opacity', '1', 'important');
                toggle.style.setProperty('pointer-events', 'auto', 'important');
            }
        }
        
        function toggleChatbot(forceOpen) {
            const chatWindow = document.getElementById('chatbot-window');
            const chatToggle = document.getElementById('chatbot-toggle');
            const chatBackdrop = document.getElementById('chatbot-backdrop');
            if (!chatWindow || !chatToggle) return;
            
            isChatbotOpen = (typeof forceOpen === 'boolean') ? forceOpen : !isChatbotOpen;
            
            if (isChatbotOpen) {
                // Open chat: Hide icon, show window, disable background scroll
                chatWindow.classList.remove('hidden');
                chatToggle.classList.add('hidden-when-open');
                chatWindow.style.setProperty('display', 'flex', 'important');
                chatWindow.style.setProperty('visibility', 'visible', 'important');
                chatWindow.style.setProperty('opacity', '1', 'important');
                chatToggle.style.setProperty('display', 'none', 'important');
                
                // Disable background scrolling
                document.body.classList.add('chatbot-open');
                document.body.style.overflow = 'hidden';
                
                // Show backdrop on mobile
                if (chatBackdrop && window.innerWidth <= 640) {
                    chatBackdrop.classList.add('active');
                }
                
                // Smooth animation
                setTimeout(() => {
                    chatWindow.style.transition = 'opacity 0.3s ease, transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
                }, 10);
            } else {
                // Close chat: Show icon, hide window, enable background scroll
                chatWindow.classList.add('hidden');
                chatToggle.classList.remove('hidden-when-open');
                chatWindow.style.setProperty('display', 'none', 'important');
                chatWindow.style.setProperty('visibility', 'hidden', 'important');
                chatWindow.style.setProperty('opacity', '0', 'important');
                chatToggle.style.setProperty('display', 'flex', 'important');
                chatToggle.style.setProperty('visibility', 'visible', 'important');
                chatToggle.style.setProperty('opacity', '1', 'important');
                
                // Enable background scrolling
                document.body.classList.remove('chatbot-open');
                document.body.style.overflow = '';
                
                // Hide backdrop
                if (chatBackdrop) {
                    chatBackdrop.classList.remove('active');
                }
            }
            
            // Update aria attributes
            chatToggle.setAttribute('aria-expanded', isChatbotOpen ? 'true' : 'false');
            
            if (isChatbotOpen) {
                // Open chatbot window, HIDE the toggle button
                chatWindow.classList.remove('hidden');
                chatWindow.style.setProperty('display', 'flex', 'important');
                chatWindow.style.flexDirection = 'column';
                
                // Add backdrop for mobile
                if (chatBackdrop) {
                    chatBackdrop.classList.add('active');
                }
                
                // Lock body scroll
                document.body.classList.add('chatbot-open');
                
                if (chatToggle) {
                    chatToggle.style.setProperty('display', 'none', 'important');
                    chatToggle.classList.add('hidden-when-open');
                    chatToggle.setAttribute('aria-expanded', 'true');
                }
            } else {
                // Close chatbot window, SHOW the toggle button again
                chatWindow.classList.add('hidden');
                chatWindow.style.setProperty('display', 'none', 'important');
                
                // Remove backdrop
                if (chatBackdrop) {
                    chatBackdrop.classList.remove('active');
                }
                
                // Unlock body scroll
                document.body.classList.remove('chatbot-open');
                
                if (chatToggle) {
                    chatToggle.style.setProperty('display', 'flex', 'important');
                    chatToggle.classList.remove('hidden-when-open');
                    chatToggle.setAttribute('aria-expanded', 'false');
                }
            }
        }
        
        function addUserMessage(text) {
            const messagesDiv = document.getElementById('chatbot-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user-message';
            messageDiv.style.cssText = 'display: flex; gap: 0.75rem; align-items: flex-start; flex-direction: row-reverse; margin-bottom: 1rem;';
            messageDiv.innerHTML = `
                <div class="message-content" style="background: linear-gradient(135deg, #9333EA 0%, #EC4899 100%); color: white; padding: 0.75rem 1rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(147, 51, 234, 0.3); max-width: 75%; margin-left: auto; border: none !important;">
                    ${text}
                </div>
            `;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
        
        function addBotMessage(text) {
            const messagesDiv = document.getElementById('chatbot-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot-message';
            messageDiv.style.cssText = 'display: flex; gap: 0.75rem; align-items: flex-start; margin-bottom: 1rem;';
            messageDiv.innerHTML = `
                <div class="message-content" style="background: white; color: #333; padding: 0.75rem 1rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); max-width: 75%; line-height: 1.6; border: 1px solid #e5e7eb;">
                    ${text}
                </div>
            `;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
        
        async function sendMessage(bookingData = null) {
            const input = document.getElementById('chatbot-input');
            const message = bookingData ? '' : input.value.trim();
            if (!message && !bookingData) return;
            
            if (!bookingData) {
                addUserMessage(message);
                input.value = '';
                
                // Check if user wants menu
                if (message.toLowerCase().includes('menu') || message.toLowerCase().includes('help') || message.toLowerCase().includes('options')) {
                    showWelcomeMenu();
                    return;
                }
                
                // Booking is now handled by backend response
            }
            
            try {
                // Send message with proper encoding
                const response = await fetch('/api/chatbot', {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(bookingData ? { booking: bookingData } : { message: message.trim() })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('Chatbot response:', data);
                
                if (data.response === 'SHOW_BOOKING_FORM') {
                    console.log('Showing booking form');
                    addBotMessage('üìÖ <strong>Great! Let me help you book a consultation.</strong><br><br>Please fill in the details below:');
                    showBookingForm();
                } else if (data.response) {
                    console.log('Showing normal response:', data.response);
                    addBotMessage(data.response);
                } else {
                    console.log('No response from server, showing fallback');
                    addBotMessage('Sorry, I couldn\'t understand that. Please try asking about our services, booking, or contact information. Or click the menu options above!');
                }
            } catch (error) {
                console.error('Chatbot error:', error);
                addBotMessage('Sorry, I\'m having trouble connecting. Please try again or contact us directly via WhatsApp or phone.');
            }
        }
        
        function showBookingForm() {
            console.log('showBookingForm function called');
            const today = new Date().toISOString().split('T')[0];
            console.log('Max date for DOB:', today);
            addBotMessage(`
                <div class="booking-form-container" style="background: transparent !important; border: none !important; box-shadow: none !important; padding: 0 !important; margin: 0 !important; max-width: 100%; width: 100%;">
                    <strong style="font-size: clamp(14px, 3vw, 16px);">üìÖ Book Your Consultation</strong><br><br>
                    <form id="chatbot-booking-form" class="space-y-2 sm:space-y-3" style="background: transparent !important; border: none !important; box-shadow: none !important;">
                        <input type="text" id="booking-name" placeholder="Your Name *" required class="w-full px-2 sm:px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500" style="color: #333; font-size: clamp(12px, 2.5vw, 14px);">
                        <input type="email" id="booking-email" placeholder="Email (Optional)" class="w-full px-2 sm:px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500" style="color: #333; font-size: clamp(12px, 2.5vw, 14px);">
                        <input type="tel" id="booking-phone" placeholder="Phone Number (10 digits) *" required pattern="[6-9][0-9]{9}" class="w-full px-2 sm:px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500" style="color: #333; font-size: clamp(12px, 2.5vw, 14px);">
                        <div>
                            <label style="display: block; font-size: clamp(12px, 2.5vw, 14px); color: #333; margin-bottom: 4px; font-weight: 500;">Date of Birth *</label>
                            <input type="date" id="booking-dob" required max="${today}" class="w-full px-2 sm:px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500" style="color: #333; font-size: clamp(12px, 2.5vw, 14px);">
                        </div>
                        <div>
                            <label style="display: block; font-size: clamp(12px, 2.5vw, 14px); color: #333; margin-bottom: 4px; font-weight: 500;">Select Service *</label>
                            <select id="booking-service" required class="w-full px-2 sm:px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500" style="color: #333; font-size: clamp(12px, 2.5vw, 14px);">
                                <option value="">Choose a service...</option>
                                <option value="Kundali Analysis">üîÆ Kundali Analysis</option>
                                <option value="Tarot Reading">üé¥ Tarot Reading</option>
                                <option value="Career Guidance">üíº Career Guidance</option>
                                <option value="Love & Relationships">üíë Love & Relationships</option>
                                <option value="Financial Consultation">üí∞ Financial Consultation</option>
                                <option value="Vastu Consultation">üè† Vastu Consultation</option>
                                <option value="Gemstone Recommendation">üíé Gemstone Recommendation</option>
                                <option value="Muhurat Selection">üìÖ Muhurat Selection</option>
                            </select>
                        </div>
                        <div>
                            <label style="display: block; font-size: clamp(12px, 2.5vw, 14px); color: #333; margin-bottom: 4px; font-weight: 500;">Message (Optional)</label>
                            <textarea id="booking-message" placeholder="Tell us about your concerns or questions..." class="w-full px-2 sm:px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500" rows="2" style="color: #333; font-size: clamp(12px, 2.5vw, 14px); min-height: 60px;"></textarea>
                        </div>
                        <button type="submit" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-2 sm:py-2.5 rounded-lg font-bold hover:shadow-lg transition" style="font-size: clamp(12px, 2.5vw, 14px);">
                            üì§ Submit Booking
                        </button>
                    </form>
                </div>
            `);
            
            // Add form submit handler
            setTimeout(() => {
                const form = document.getElementById('chatbot-booking-form');
                form.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    // Validation
                    const name = document.getElementById('booking-name').value.trim();
                    const email = document.getElementById('booking-email').value.trim();
                    const phone = document.getElementById('booking-phone').value.trim();
                    const dob = document.getElementById('booking-dob').value;
                    const service = document.getElementById('booking-service').value;
                    
                    // Name validation - at least 2 letters, only letters and spaces
                    if (!/^[A-Za-z\s]{2,}$/.test(name)) {
                        addBotMessage('‚ùå Please enter a valid name (at least 2 letters, only alphabets)');
                        return;
                    }
                    
                    // Email validation (if provided)
                    if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                        addBotMessage('‚ùå Please enter a valid email address');
                        return;
                    }
                    
                    // Phone validation - 10 digits starting with 6/7/8/9
                    if (!/^[6-9]\d{9}$/.test(phone)) {
                        addBotMessage('‚ùå Please enter a valid 10-digit phone number starting with 6, 7, 8, or 9');
                        return;
                    }
                    
                    // DOB validation
                    const dobDate = new Date(dob);
                    const today = new Date();
                    today.setHours(0, 0, 0, 0);
                    
                    if (dobDate >= today) {
                        addBotMessage('‚ùå Date of birth cannot be today or in the future');
                        return;
                    }
                    
                    const age = Math.floor((today - dobDate) / (365.25 * 24 * 60 * 60 * 1000));
                    if (age < 5 || age > 120) {
                        addBotMessage('‚ùå Please enter a valid date of birth (age between 5 and 120 years)');
                        return;
                    }
                    
                    const bookingData = {
                        name: name,
                        email: email || null,
                        phone: phone,
                        dob: dob,
                        service: service,
                        subject: service,
                        message: document.getElementById('booking-message').value.trim() || null
                    };
                    
                    // Show loading message
                    addBotMessage('‚è≥ <strong>Processing your booking...</strong>');
                    
                    try {
                        // Submit booking to API
                        const response = await fetch('/api/bookings', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(bookingData)
                        });
                        
                        const result = await response.json();
                        
                        if (response.ok && result) {
                            // Clear the form first
                            form.reset();
                            
                            // Remove the entire booking form message from chat
                            const messages = document.getElementById('chatbot-messages');
                            const formMessages = messages.querySelectorAll('.booking-form-container');
                            formMessages.forEach(msg => {
                                const parentDiv = msg.closest('.flex');
                                if (parentDiv) parentDiv.remove();
                            });
                            
                            // Generate booking ID - use result.id or result.booking_id or create a timestamp-based one
                            const bookingId = result.id || result.booking_id || result.data?.id || `BK${Date.now()}`;
                            
                            // Show success message with contact options
                            addBotMessage(`‚úÖ <strong>Booking Confirmed!</strong><br><br>
Thank you <strong>${name}</strong> for booking <strong>${service}</strong>!<br><br>
üìã <strong>Booking Details:</strong><br>
‚Ä¢ Name: ${name}<br>
‚Ä¢ Phone: ${phone}<br>
‚Ä¢ Service: ${service}<br>
‚Ä¢ DOB: ${dob}<br>
${bookingData.message ? '‚Ä¢ Question: ' + bookingData.message + '<br>' : ''}
<br><em>Booking ID: #${bookingId}</em><br><br>
üì± <strong>Contact Us Directly:</strong><br>
<div style="display: flex; gap: 10px; flex-wrap: wrap; margin: 15px 0;">
    <a href="https://wa.me/${(globalBusinessInfo?.whatsapp_number || globalBusinessInfo?.phone || '918431729319').replace(/\\D/g, '')}?text=Hi!%20I%20just%20booked%20(ID:%20${bookingId})%20for%20${encodeURIComponent(service)}" target="_blank" style="background: #25D366; color: white; padding: 10px 15px; border-radius: 20px; text-decoration: none; display: inline-flex; align-items: center; font-weight: bold; gap: 5px;">
        <i class="fab fa-whatsapp"></i> WhatsApp
    </a>
    <a href="mailto:${globalBusinessInfo?.email || 'omkargouda1204@gmail.com'}?subject=Booking%20Confirmation%20${bookingId}&body=Hi,%20I%20booked%20${encodeURIComponent(service)}%20consultation." style="background: #EA4335; color: white; padding: 10px 15px; border-radius: 20px; text-decoration: none; display: inline-flex; align-items: center; font-weight: bold; gap: 5px;">
        <i class="fas fa-envelope"></i> Email
    </a>
</div>
<br>üôè <strong>What's next?</strong><br>
‚Ä¢ We'll contact you within 2 hours<br>
‚Ä¢ Or use buttons above to reach us now!<br>
‚Ä¢ Prepare your birth details<br><br>
üí¨ <strong>Need anything else?</strong> Just ask!`);
                            
                            // Reset review flag
                            reviewTimerSet = false;
                        } else {
                            const waNum = (globalBusinessInfo?.whatsapp_number || globalBusinessInfo?.phone || '918431729319').replace(/\D/g, '');
                            const greeting = encodeURIComponent('Hello! I tried booking but encountered an issue. Can you help?');
                            addBotMessage(`‚ùå <strong>Booking failed</strong><br><br>${result.error || 'Please try again or contact us directly.'}<br><br>
<a href="https://wa.me/${waNum}?text=${greeting}" target="_blank" style="color: #7C3AED; font-weight: bold;">
üí¨ Contact us on WhatsApp instead
</a>`);
                        }
                    } catch (error) {
                        console.error('Booking error:', error);
                        const waNum = (globalBusinessInfo?.whatsapp_number || globalBusinessInfo?.phone || '918431729319').replace(/\D/g, '');
                        const greeting = encodeURIComponent('Hello! I encountered an error while booking. Please assist me.');
                        addBotMessage(`‚ùå <strong>Booking failed. Please try again or contact us directly.</strong><br><br><a href="https://wa.me/${waNum}?text=${greeting}" target="_blank" style="color: #7C3AED; font-weight: bold;">üí¨ WhatsApp Us</a>`);
                    }
                });
            }, 100);
        }
        
        function showWelcomeMenu() {
            addBotMessage(`
                <div class="welcome-menu">
                    <strong style="font-size: 18px;">üôè Namaste! Welcome to Cosmic Astrology</strong><br><br>
                    <p style="color: #666; margin-bottom: 15px;">I'm here to assist you. Click any option below:</p>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px;">
                        <button onclick="sendMenuOption('services')" class="menu-btn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 13px; min-height: 44px; display: flex; align-items: center; justify-content: center; transition: transform 0.2s;">
                            üåü Services
                        </button>
                        <button onclick="sendMenuOption('book')" class="menu-btn" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 12px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 13px; min-height: 44px; display: flex; align-items: center; justify-content: center; transition: transform 0.2s;">
                            üìÖ Book Now
                        </button>
                        <button onclick="sendMenuOption('hours')" class="menu-btn" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 12px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 13px; min-height: 44px; display: flex; align-items: center; justify-content: center; transition: transform 0.2s;">
                            ‚è∞ Hours
                        </button>
                        <button onclick="sendMenuOption('location')" class="menu-btn" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; padding: 12px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 13px; min-height: 44px; display: flex; align-items: center; justify-content: center; transition: transform 0.2s;">
                            üìç Location
                        </button>
                        <button onclick="sendMenuOption('contact')" class="menu-btn" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white; padding: 12px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 13px; min-height: 44px; display: flex; align-items: center; justify-content: center; transition: transform 0.2s;">
                            üìû Contact
                        </button>
                        <button onclick="sendMenuOption('social')" class="menu-btn" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); color: white; padding: 12px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 13px; min-height: 44px; display: flex; align-items: center; justify-content: center; transition: transform 0.2s;">
                            üì± Social
                        </button>
                        <button onclick="sendMenuOption('qa')" class="menu-btn" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #333; padding: 12px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 13px; min-height: 44px; display: flex; align-items: center; justify-content: center; transition: transform 0.2s;">
                            ‚ùì FAQ
                        </button>
                    </div>
                    
                    <style>
                        /* Responsive menu buttons for all devices */
                        .menu-btn:hover {
                            transform: scale(1.05);
                        }
                        .menu-btn:active {
                            transform: scale(0.95);
                        }
                        @media (max-width: 640px) {
                            .welcome-menu button {
                                font-size: 12px !important;
                                padding: 10px !important;
                                min-height: 44px !important;
                            }
                        }
                        @media (max-width: 375px) {
                            .welcome-menu button {
                                font-size: 11px !important;
                                padding: 8px !important;
                            }
                        }
                    </style>
                    
                    <p style="margin-top: 15px; color: #888; font-size: 12px;"><em>Or type your question directly!</em></p>
                </div>
            `);
        }
        
        function sendMenuOption(option) {
            const displayText = option.charAt(0).toUpperCase() + option.slice(1);
            addUserMessage(displayText);
            
            // Send to backend without triggering sendMessage() again
            fetch('/api/chatbot', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ message: option })
            })
            .then(response => response.json())
            .then(data => {
                if (data.response === 'SHOW_BOOKING_FORM') {
                    console.log('Showing booking form from menu');
                    addBotMessage('üìÖ <strong>Great! Let me help you book a consultation.</strong><br><br>Please fill in the details below:');
                    showBookingForm();
                } else if (data.response) {
                    addBotMessage(data.response);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                addBotMessage('Sorry, I encountered an error. Please try again.');
            });
            
            // Clear input
            document.getElementById('chatbot-input').value = '';
        }
        
        function contactViaWhatsApp() {
            // Use global business info for WhatsApp number
            const whatsappNumber = globalBusinessInfo?.whatsapp_number || globalBusinessInfo?.phone || '918431729319';
            const whatsappNum = whatsappNumber.replace(/\D/g, '');
            const message = encodeURIComponent('Hello! üëã I\'m interested in astrology consultation. Can you please guide me?');
            window.open(`https://wa.me/${whatsappNum}?text=${message}`, '_blank');
        }
        
        function contactViaCall() {
            const phoneNumber = globalBusinessInfo?.phone || '+918431729319';
            window.location.href = `tel:${phoneNumber}`;
        }
    
        // Enhanced lazy loading and optimization for all images
        document.addEventListener('DOMContentLoaded', function() {
            // Optimize all images for fast loading
            document.querySelectorAll('img').forEach(img => {
                // Don't apply lazy loading to hero slider images
                const isHeroImage = img.closest('#hero-slider, .hero-slide, .hero-slides-container');
                const isLogoImage = img.id === 'navbar-logo' || img.closest('header');
                
                if (!isHeroImage && !isLogoImage) {
                    if (!img.hasAttribute('loading')) {
                        img.setAttribute('loading', 'lazy');
                    }
                } else {
                    // Critical images load eagerly
                    img.setAttribute('loading', 'eager');
                }
                
                // Always set async decoding for better performance
                if (!img.hasAttribute('decoding')) {
                    img.setAttribute('decoding', 'async');
                }
                
                // Add loaded class when image loads
                if (img.complete) {
                    img.classList.add('loaded');
                } else {
                    img.addEventListener('load', function() {
                        this.classList.add('loaded');
                    });
                }
            });
            
            // Intersection Observer for lazy loading fallback
            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            if (img.dataset.src) {
                                img.src = img.dataset.src;
                                img.removeAttribute('data-src');
                            }
                            img.classList.add('loaded');
                            observer.unobserve(img);
                        }
                    });
                }, {
                    rootMargin: '50px 0px',
                    threshold: 0.01
                });
                
                document.querySelectorAll('img[loading="lazy"]').forEach(img => {
                    imageObserver.observe(img);
                });
            }
        });

        // Preload critical images
        function preloadCriticalImage(src) {
            if (!src) return;
            const link = document.createElement('link');
            link.rel = 'preload';
            link.as = 'image';
            link.href = src;
            link.fetchpriority = 'high';
            document.head.appendChild(link);
        }

        // ===== LOADING SCREEN MANAGEMENT =====
        (function() {
            const loader = document.getElementById('global-loader');
            const progressBar = document.getElementById('loading-progress');
            const statusText = document.getElementById('loading-status');
            
            let loadedResources = 0;
            let totalResources = 0;
            let allDataLoaded = false;
            let allImagesLoaded = false;
            
            function updateProgress() {
                const percentage = totalResources > 0 ? (loadedResources / totalResources) * 100 : 0;
                if (progressBar) {
                    progressBar.style.width = percentage + '%';
                }
                
                // Update status text
                if (statusText) {
                    if (percentage < 30) {
                        statusText.textContent = 'Loading content...';
                    } else if (percentage < 60) {
                        statusText.textContent = 'Loading images...';
                    } else if (percentage < 90) {
                        statusText.textContent = 'Almost ready...';
                    } else {
                        statusText.textContent = 'Finalizing...';
                    }
                }
                
                // Hide loader when everything is loaded
                if (allDataLoaded && allImagesLoaded && percentage >= 100) {
                    setTimeout(() => {
                        if (loader) {
                            loader.classList.add('fade-out');
                            document.body.classList.remove('loading');
                        }
                        setTimeout(() => {
                            if (loader) loader.style.display = 'none';
                        }, 500);
                    }, 300);
                }
            }
            
            // Track all images on page
            function trackImages() {
                const images = document.querySelectorAll('img');
                totalResources += images.length;
                
                if (images.length === 0) {
                    allImagesLoaded = true;
                    updateProgress();
                    return;
                }
                
                let imagesLoaded = 0;
                images.forEach(img => {
                    if (img.complete) {
                        loadedResources++;
                        imagesLoaded++;
                    } else {
                        img.addEventListener('load', () => {
                            loadedResources++;
                            imagesLoaded++;
                            updateProgress();
                            if (imagesLoaded >= images.length) {
                                allImagesLoaded = true;
                                updateProgress();
                            }
                        });
                        img.addEventListener('error', () => {
                            loadedResources++;
                            imagesLoaded++;
                            updateProgress();
                            if (imagesLoaded >= images.length) {
                                allImagesLoaded = true;
                                updateProgress();
                            }
                        });
                    }
                });
                
                if (imagesLoaded >= images.length) {
                    allImagesLoaded = true;
                    updateProgress();
                }
            }
            
            // Wait for DOM and all data to load
            window.addEventListener('load', function() {
                // Set initial progress
                loadedResources = 10;
                totalResources = 100;
                updateProgress();
                
                // Track images immediately for faster loading
                setTimeout(() => {
                    trackImages();
                    
                    // Mark data as loaded quickly
                    setTimeout(() => {
                        allDataLoaded = true;
                        loadedResources = Math.max(loadedResources, totalResources - 10);
                        updateProgress();
                    }, 800);
                }, 100);
            });
            
            // Failsafe: Remove loader after 5 seconds for faster experience
            setTimeout(() => {
                if (loader && !loader.classList.contains('fade-out')) {
                    allDataLoaded = true;
                    allImagesLoaded = true;
                    loadedResources = totalResources;
                    updateProgress();
                }
            }, 5000);
        })();

            </script>
    <!-- Loading Screen -->
    <div id="loading-screen" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 9999999; transition: opacity 0.5s ease, visibility 0.5s ease;">
        <div style="text-align: center; color: white;">
            <div style="width: 80px; height: 80px; border: 6px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 2rem;"></div>
            <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 1rem; font-family: 'Playfair Display', serif;">Sri Mahakali Bhairavi</h2>
            <p style="font-size: 1.2rem; opacity: 0.9;">Loading your cosmic journey...</p>
        </div>
    </div>
    <style>
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        #loading-screen.hide {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }
        /* Hide chatbot during loading */
        body:has(#loading-screen:not(.hide)) #chatbot-widget {
            display: none !important;
        }
        
        /* ========================================
           COMPREHENSIVE RESPONSIVE FIXES - ALL DEVICES
           ======================================== */
        
    /* Universal chatbot visibility - ensure icon is ALWAYS visible on ALL devices */
        /* Chatbot widget - Fixed position bottom-right, NOT attached to any section or footer */
        #chatbot-widget {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            position: fixed !important;
            bottom: 20px !important;
            right: 20px !important;
            top: auto !important;
            left: auto !important;
            transform: none !important;
            z-index: 2147483647 !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        /* Ensure footer doesn't affect chatbot position */
        footer {
            position: relative !important;
        }
        
        /* Chatbot is independent of footer */
        footer ~ #chatbot-widget,
        #chatbot-widget {
            position: fixed !important;
        }
        
        #chatbot-toggle:not(.hidden-when-open) {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
            pointer-events: auto !important;
        }
        
        /* Chatbot window must be hidden by default - shows only on click */
        /* Chatbot Window - Opens FROM icon position (anchored to icon) - RESPONSIVE */
        #chatbot-window {
            z-index: 2147483646 !important;
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            pointer-events: none !important;
            position: fixed !important;
            /* Desktop: Opens near icon (bottom-right) */
            bottom: 90px !important;
            right: 20px !important;
            left: auto !important;
            top: auto !important;
            width: 400px !important;
            max-width: calc(100vw - 40px) !important;
            height: 600px !important;
            max-height: calc(100vh - 120px) !important;
            border-radius: 16px !important;
            background: white !important;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.3) !important;
            /* Smooth animation */
            transition: opacity 0.3s ease, transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: scale(0.9) translateY(10px);
        }
        #chatbot-window:not(.hidden) {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
            pointer-events: auto !important;
            transform: scale(1) translateY(0);
        }
        
        /* Mobile: Chat opens FROM icon, expands upward, stays in viewport */
        @media (max-width: 640px) {
            #chatbot-window {
                bottom: 85px !important;
                right: 15px !important;
                left: 15px !important;
                top: auto !important;
                width: calc(100vw - 30px) !important;
                max-width: calc(100vw - 30px) !important;
                height: calc(100vh - 120px) !important;
                max-height: 500px !important;
                border-radius: 16px !important;
            }
        }
        
        /* Small mobile devices */
        @media (max-width: 375px) {
            #chatbot-window {
                bottom: 80px !important;
                right: 10px !important;
                left: 10px !important;
                width: calc(100vw - 20px) !important;
                height: calc(100vh - 110px) !important;
                max-height: 450px !important;
            }
        }
        
        /* Tablet */
        @media (min-width: 641px) and (max-width: 1024px) {
            #chatbot-window {
                width: 380px !important;
                height: 550px !important;
            }
        }
        
        #chatbot-window.hidden {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            pointer-events: none !important;
        }
        
        /* Ensure footer is scrollable to end on ALL devices - CRITICAL FIX */
        html {
            height: auto !important;
            min-height: 100vh !important;
            max-height: none !important;
            overflow-y: auto !important;
            overflow-x: hidden !important;
            -webkit-overflow-scrolling: touch !important;
        }
        
        body {
            height: auto !important;
            min-height: 100vh !important;
            max-height: none !important;
            overflow-y: auto !important;
            overflow-x: hidden !important;
            -webkit-overflow-scrolling: touch !important;
            padding-bottom: 0 !important;
            margin-bottom: 0 !important;
        }
        
        footer {
            padding-bottom: 0 !important;
            margin-bottom: 0 !important;
            clear: both !important;
        }
        
        /* Remove any max-height restrictions */
        html, body, main, #main-content {
            max-height: none !important;
        }
        
        /* iPhone specific scrolling fix */
        @media (max-width: 480px) {
            html, body {
                height: auto !important;
                min-height: 100vh !important;
                max-height: none !important;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
            }
            body {
                padding-bottom: 0 !important;
                margin-bottom: 0 !important;
            }
            footer {
                padding-bottom: 0 !important;
                margin-bottom: 0 !important;
            }
        }
        
        /* Android phones scrolling fix */
        @media (min-width: 360px) and (max-width: 640px) {
            html, body {
                height: auto !important;
                min-height: 100vh !important;
                max-height: none !important;
                overflow-y: auto !important;
            }
        }
        
        /* iPad and tablet scrolling fix */
        @media (min-width: 768px) and (max-width: 1024px) {
            html, body {
                height: auto !important;
                min-height: 100vh !important;
                max-height: none !important;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
            }
            body {
                padding-bottom: 0 !important;
                margin-bottom: 0 !important;
            }
            footer {
                padding-bottom: 0 !important;
                margin-bottom: 0 !important;
            }
        }
        
        /* iPad Pro scrolling fix */
        @media (min-width: 1024px) and (max-width: 1366px) {
            html, body {
                height: auto !important;
                min-height: 100vh !important;
                max-height: none !important;
                overflow-y: auto !important;
            }
        }
        
        /* Service images ensure visibility */
        #astrological-services-grid .service-item img {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        /* Pooja images ensure visibility */
        .pooja-circle img {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        /* Force chatbot icon visibility on ALL devices - override any hiding */
        @media (max-width: 320px), 
               (min-width: 321px) and (max-width: 480px),
               (min-width: 481px) and (max-width: 768px),
               (min-width: 769px) and (max-width: 1024px),
               (min-width: 1025px) {
            #chatbot-widget {
                display: block !important;
                visibility: visible !important;
                opacity: 1 !important;
            }
            #chatbot-toggle:not(.hidden-when-open) {
                display: flex !important;
                visibility: visible !important;
                opacity: 1 !important;
            }
        }
        
        /* iOS devices - iPhone, iPad - ensure scrolling and chatbot visibility */
        @supports (-webkit-touch-callout: none) {
            html, body {
                height: auto !important;
                min-height: 100vh !important;
                max-height: none !important;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
            }
            #chatbot-widget {
                display: block !important;
                visibility: visible !important;
                opacity: 1 !important;
            }
            #chatbot-toggle:not(.hidden-when-open) {
                display: flex !important;
                visibility: visible !important;
                opacity: 1 !important;
            }
        }
        
        /* Android devices - ensure scrolling and chatbot visibility */
        @media screen and (-webkit-min-device-pixel-ratio: 0) {
            html, body {
                height: auto !important;
                min-height: 100vh !important;
                max-height: none !important;
                overflow-y: auto !important;
            }
        }

        /* ============================================
           CHATBOT STYLES - FLOATING ICON & WINDOW
           ============================================ */
        
        /* Chatbot Widget Container - Fixed Positioning */
        .chatbot-widget {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 9999;
            pointer-events: none;
        }
        
        /* Chatbot Floating Icon */
        .chatbot-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #9333EA, #EC4899);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 20px rgba(147, 51, 234, 0.4);
            transition: all 0.3s ease;
            pointer-events: auto;
            animation: chatbot-pulse 2s infinite;
        }
        
        .chatbot-icon i {
            font-size: 1.75rem;
        }
        
        .chatbot-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(147, 51, 234, 0.6);
        }
        
        @keyframes chatbot-pulse {
            0%, 100% {
                box-shadow: 0 4px 20px rgba(147, 51, 234, 0.4), 0 0 0 0 rgba(147, 51, 234, 0.7);
            }
            50% {
                box-shadow: 0 4px 25px rgba(147, 51, 234, 0.5), 0 0 0 8px rgba(147, 51, 234, 0);
            }
        }
        
        /* Hide icon when chat is open */
        .chatbot-icon.hidden {
            opacity: 0;
            transform: scale(0);
            pointer-events: none;
        }
        
        /* Chatbot Window - Opens from icon position */
        .chatbot-window {
            position: fixed;
            bottom: 100px;
            right: 24px;
            width: 400px;
            max-width: calc(100vw - 48px);
            height: 580px;
            max-height: calc(100vh - 140px);
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.3);
            display: flex !important;
            flex-direction: column;
            overflow: hidden;
            transform-origin: bottom right;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: auto;
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
            z-index: 9998;
        }
        
        .chatbot-window.hidden {
            opacity: 0 !important;
            visibility: hidden !important;
            transform: translateY(20px) scale(0.95) !important;
            pointer-events: none !important;
            display: none !important;
        }
        
        /* Chatbot Header */
        .chatbot-header {
            background: linear-gradient(135deg, #9333EA, #EC4899);
            color: white;
            padding: 1rem 1.25rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        
        .chatbot-close-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .chatbot-close-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }
        
        /* Chatbot Messages Area */
        .chatbot-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1.25rem;
            background: #f9fafb;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .chatbot-messages::-webkit-scrollbar {
            width: 6px;
        }
        
        .chatbot-messages::-webkit-scrollbar-thumb {
            background: rgba(147, 51, 234, 0.3);
            border-radius: 3px;
        }
        
        /* Chatbot Menu Options - Above Input with Scrolling */
        .chatbot-menu-options {
            border-top: 1px solid #e5e7eb;
            padding: 12px;
            background: #f9fafb;
            overflow-x: auto;
            overflow-y: hidden;
            max-height: 120px;
            flex-shrink: 0;
            -webkit-overflow-scrolling: touch;
        }
        
        .chatbot-menu-options::-webkit-scrollbar {
            height: 6px;
        }
        
        .chatbot-menu-options::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .chatbot-menu-options::-webkit-scrollbar-thumb {
            background: #9333EA;
            border-radius: 10px;
        }
        
        .chatbot-menu-options::-webkit-scrollbar-thumb:hover {
            background: #7C3AED;
        }
        
        .chatbot-menu-btn {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .chatbot-menu-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .chatbot-menu-btn:active {
            transform: scale(0.95);
        }
        
        /* Responsive menu buttons */
        @media (max-width: 640px) {
            .chatbot-menu-options {
                padding: 10px;
                max-height: 100px;
            }
            .chatbot-menu-btn {
                font-size: 11px !important;
                padding: 8px 14px !important;
                min-width: 90px !important;
            }
        }
        
        @media (max-width: 375px) {
            .chatbot-menu-btn {
                font-size: 10px !important;
                padding: 6px 12px !important;
                min-width: 80px !important;
            }
        }
        
        /* Message Bubbles - NO background cards */
        .message {
            display: flex;
            gap: 0.75rem;
            align-items: flex-start;
            animation: messageSlide 0.3s ease;
            background: none !important;
            border: none !important;
            box-shadow: none !important;
            padding: 0 !important;
        }
        
        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .message-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #9333EA, #EC4899);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 0.875rem;
        }
        
        .message-content {
            padding: 0.75rem 1rem;
            border-radius: 12px;
            max-width: 75%;
            background: transparent;
            box-shadow: none;
        }
        
        .message-content p {
            margin: 0;
            line-height: 1.5;
        }
        
        .user-message {
            flex-direction: row-reverse;
        }
        
        .user-message .message-icon {
            background: linear-gradient(135deg, #EC4899, #9333EA);
        }
        
        .user-message .message-content {
            background: linear-gradient(135deg, #9333EA 0%, #EC4899 100%) !important;
            color: white !important;
            margin-left: auto;
            border: none !important;
            box-shadow: 0 2px 8px rgba(147, 51, 234, 0.3) !important;
        }
        
        .bot-message .message-content {
            background: white !important;
            color: #333 !important;
            border: 1px solid #e5e7eb !important;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important;
        }
        
        /* Remove any extra background cards */
        .booking-form-container {
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
            padding: 0 !important;
            margin: 0 !important;
            max-width: 100% !important;
            width: 100% !important;
            overflow: hidden !important;
        }
        
        .booking-form-container form {
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
            max-width: 100% !important;
        }
        
        .booking-form-container input,
        .booking-form-container select,
        .booking-form-container textarea,
        .booking-form-container button {
            font-size: clamp(12px, 2.5vw, 14px) !important;
            max-width: 100% !important;
            box-sizing: border-box !important;
        }
        
        .booking-form-container label {
            font-size: clamp(12px, 2.5vw, 14px) !important;
        }
        
        @media (max-width: 640px) {
            .booking-form-container {
                padding: 0 !important;
            }
            .booking-form-container input,
            .booking-form-container select,
            .booking-form-container textarea {
                padding: 8px 10px !important;
            }
            .booking-form-container button {
                padding: 10px 12px !important;
            }
        }
        
        /* Chatbot Input Area */
        .chatbot-input-area {
            padding: 1rem 1.25rem;
            background: white;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 0.75rem;
            flex-shrink: 0;
        }
        
        .chatbot-input-area input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 25px;
            font-size: 0.9375rem;
            outline: none;
            transition: all 0.2s ease;
        }
        
        .chatbot-input-area input:focus {
            border-color: #9333EA;
            box-shadow: 0 0 0 3px rgba(147, 51, 234, 0.1);
        }
        
        .chatbot-input-area button {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg, #9333EA, #EC4899);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }
        
        .chatbot-input-area button:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(147, 51, 234, 0.4);
        }
        
        /* Chatbot Backdrop - Mobile only */
        .chatbot-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 9998;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(4px);
        }
        
        .chatbot-backdrop.active {
            opacity: 1;
            pointer-events: auto;
        }
        
        /* Disable body scroll when chat is open */
        body.chatbot-open {
            overflow: hidden;
        }
        
        /* Mobile Responsive Styles */
        @media (max-width: 640px) {
            .chatbot-widget {
                bottom: 16px;
                right: 16px;
            }
            
            .chatbot-icon {
                width: 56px;
                height: 56px;
            }
            
            .chatbot-icon i {
                font-size: 1.5rem;
            }
            
            .chatbot-window {
                bottom: 16px !important;
                left: 16px !important;
                right: 16px !important;
                width: calc(100vw - 32px) !important;
                max-width: none !important;
                height: calc(100vh - 100px) !important;
                max-height: none !important;
                border-radius: 16px;
                transform-origin: bottom center;
            }
            
            .chatbot-messages {
                padding: 1rem;
            }
            
            .chatbot-input-area {
                padding: 0.875rem 1rem;
            }
        }
        
        /* Tablet Styles */
        @media (min-width: 641px) and (max-width: 1024px) {
            .chatbot-window {
                width: 380px;
                height: 540px;
            }
        }
        
        /* Small mobile devices */
        @media (max-width: 375px) {
            .chatbot-icon {
                width: 52px;
                height: 52px;
            }
            
            .chatbot-icon i {
                font-size: 1.375rem;
            }
            
            .chatbot-window {
                bottom: 12px !important;
                left: 12px !important;
                right: 12px !important;
                height: calc(100vh - 80px) !important;
                max-height: none !important;
                border-radius: 12px;
            }
            
            .chatbot-header {
                padding: 0.75rem 1rem;
            }
            
            .chatbot-messages {
                padding: 0.875rem;
            }
            }
        }
    </style>

    <!-- Booking Form Modal Styles -->
    <style>
        /* Modal Overlay */
        .booking-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .booking-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Modal Container */
        .booking-modal {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 480px;
            width: 92%;
            max-height: 85vh;
            overflow-y: auto;
            transform: scale(0.8) translateY(-20px);
            transition: transform 0.3s ease;
            position: relative;
        }

        .booking-modal-overlay.active .booking-modal {
            transform: scale(1) translateY(0);
        }

        /* Modal Header */
        .booking-modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem 2rem;
            border-radius: 16px 16px 0 0;
            position: relative;
        }

        .booking-modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .booking-modal-header p {
            margin: 0.5rem 0 0 0;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Close Button */
        .booking-close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .booking-close-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Modal Body */
        .booking-modal-body {
            padding: 2rem;
        }

        /* Form Styles */
        .booking-form-group {
            margin-bottom: 1.25rem;
        }

        .booking-form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #333;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .booking-form-group label .required {
            color: #e53e3e;
            margin-left: 0.2rem;
        }

        .booking-form-group input,
        .booking-form-group select,
        .booking-form-group textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.95rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            font-family: inherit;
        }

        .booking-form-group input:focus,
        .booking-form-group select:focus,
        .booking-form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .booking-form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .booking-form-error {
            color: #e53e3e;
            font-size: 0.85rem;
            margin-top: 0.5rem;
            display: none;
        }

        .booking-form-group.error input,
        .booking-form-group.error select {
            border-color: #e53e3e;
        }

        .booking-form-group.error .booking-form-error {
            display: block;
        }

        /* Buttons */
        .booking-form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .booking-btn {
            flex: 1;
            padding: 0.875rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .booking-btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .booking-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .booking-btn-secondary {
            background: #f7fafc;
            color: #4a5568;
            border: 2px solid #e2e8f0;
        }

        .booking-btn-secondary:hover {
            background: #edf2f7;
        }

        /* Success Message */
        .booking-success-message {
            display: none;
            text-align: center;
            padding: 3rem 2rem;
        }

        .booking-success-message.active {
            display: block;
        }

        .booking-success-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            animation: successPop 0.5s ease;
        }

        @keyframes successPop {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .booking-success-icon i {
            font-size: 2.5rem;
            color: white;
        }

        .booking-success-message h3 {
            color: #2d3748;
            font-size: 1.5rem;
            margin: 0 0 0.5rem 0;
        }

        .booking-success-message p {
            color: #718096;
            margin: 0 0 2rem 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .booking-modal {
                max-width: 94%;
                max-height: 88vh;
                width: 94%;
            }

            .booking-modal-header {
                padding: 1.25rem 1.5rem;
            }

            .booking-modal-header h2 {
                font-size: 1.25rem;
            }

            .booking-modal-body {
                padding: 1.5rem;
            }

            .booking-form-actions {
                flex-direction: column;
            }

            .booking-btn {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .booking-modal {
                width: 96%;
                max-width: 96%;
                max-height: 92vh;
            }

            .booking-modal-header {
                padding: 1rem 1.25rem;
            }

            .booking-modal-header h2 {
                font-size: 1.1rem;
            }

            .booking-modal-body {
                padding: 1.25rem;
            }

            .booking-form-group {
                margin-bottom: 1rem;
            }
        }

        /* Scrollbar Styling */
        .booking-modal::-webkit-scrollbar {
            width: 8px;
        }

        .booking-modal::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 0 16px 16px 0;
        }

        .booking-modal::-webkit-scrollbar-thumb {
            background: #cbd5e0;
            border-radius: 10px;
        }

        .booking-modal::-webkit-scrollbar-thumb:hover {
            background: #a0aec0;
        }
    </style>

    <!-- Booking Form Modal HTML -->
    <div class="booking-modal-overlay" id="bookingModal">
        <div class="booking-modal">
            <div class="booking-modal-header">
                <button class="booking-close-btn" onclick="closeBookingModal()" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
                <h2>Book Your Consultation</h2>
                <p>Fill in the details below and we'll get back to you soon</p>
            </div>
            
            <div class="booking-modal-body">
                <form id="bookingForm" class="booking-form">
                    <div class="booking-form-group">
                        <label for="booking-name">
                            Full Name<span class="required">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="booking-name" 
                            name="name" 
                            placeholder="Enter your full name"
                            required
                        >
                        <div class="booking-form-error">Please enter your name</div>
                    </div>

                    <div class="booking-form-group">
                        <label for="booking-mobile">
                            Mobile Number<span class="required">*</span>
                        </label>
                        <input 
                            type="tel" 
                            id="booking-mobile" 
                            name="phone" 
                            placeholder="Enter 10-digit mobile number"
                            pattern="[0-9]{10}"
                            required
                        >
                        <div class="booking-form-error">Please enter a valid 10-digit mobile number</div>
                    </div>

                    <div class="booking-form-group">
                        <label for="booking-email">
                            Email Address
                        </label>
                        <input 
                            type="email" 
                            id="booking-email" 
                            name="email" 
                            placeholder="Enter your email (optional)"
                        >
                        <div class="booking-form-error">Please enter a valid email address</div>
                    </div>

                    <div class="booking-form-group">
                        <label for="booking-service">
                            Service<span class="required">*</span>
                        </label>
                        <select id="booking-service" name="service" required>
                            <option value="">Select a service</option>
                            <option value="Horoscope Reading">Horoscope Reading</option>
                            <option value="Kundali Matching">Kundali Matching</option>
                            <option value="Birth Chart Analysis">Birth Chart Analysis</option>
                            <option value="Marriage Consultation">Marriage Consultation</option>
                            <option value="Career Guidance">Career Guidance</option>
                            <option value="Gemstone Consultation">Gemstone Consultation</option>
                            <option value="Vastu Consultation">Vastu Consultation</option>
                            <option value="Pooja Services">Pooja Services</option>
                            <option value="General Consultation">General Consultation</option>
                        </select>
                        <div class="booking-form-error">Please select a service</div>
                    </div>

                    <div class="booking-form-group">
                        <label for="booking-date">
                            Consultation Date<span class="required">*</span>
                        </label>
                        <input 
                            type="date" 
                            id="booking-date" 
                            name="date_of_birth" 
                            required
                        >
                        <div class="booking-form-error">Please select a valid date (today or future only)</div>
                    </div>

                    <div class="booking-form-group">
                        <label for="booking-message">
                            Message
                        </label>
                        <textarea 
                            id="booking-message" 
                            name="message" 
                            placeholder="Tell us more about your requirements (optional)"
                        ></textarea>
                    </div>

                    <div class="booking-form-actions">
                        <button type="button" class="booking-btn booking-btn-secondary" onclick="closeBookingModal()">
                            Cancel
                        </button>
                        <button type="submit" class="booking-btn booking-btn-primary">
                            <i class="fas fa-calendar-check"></i> Book Now
                        </button>
                    </div>
                </form>

                <div class="booking-success-message" id="bookingSuccess">
                    <div class="booking-success-icon">
                        <i class="fas fa-check"></i>
                    </div>
                    <h3>Booking Submitted!</h3>
                    <p>Thank you for booking with us. We'll contact you shortly to confirm your appointment.</p>
                    <button class="booking-btn booking-btn-primary" onclick="closeBookingModal()">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Form JavaScript -->
    <script>
        // Show modal automatically on page load
        window.addEventListener('DOMContentLoaded', function() {
            // Show booking modal after a slight delay for better UX
            setTimeout(function() {
                openBookingModal();
            }, 500);

            // Set minimum date to today and validate date selection
            const dateInput = document.getElementById('booking-date');
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const todayStr = today.toISOString().split('T')[0];
            dateInput.setAttribute('min', todayStr);
            
            // Prevent manual entry of past dates
            dateInput.addEventListener('change', function() {
                const selectedDate = new Date(this.value);
                selectedDate.setHours(0, 0, 0, 0);
                
                if (selectedDate < today) {
                    this.value = todayStr;
                    this.closest('.booking-form-group').classList.add('error');
                    alert('Please select today or a future date only');
                } else {
                    this.closest('.booking-form-group').classList.remove('error');
                }
            });
        });

        // Open booking modal
        function openBookingModal() {
            const modal = document.getElementById('bookingModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Close booking modal
        function closeBookingModal() {
            const modal = document.getElementById('bookingModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
            
            // Reset form and hide success message after modal closes
            setTimeout(function() {
                resetBookingForm();
            }, 300);
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('bookingModal');
            if (event.target === modal) {
                closeBookingModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeBookingModal();
            }
        });

        // Form validation and submission
        document.getElementById('bookingForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            // Clear previous errors
            document.querySelectorAll('.booking-form-group').forEach(function(group) {
                group.classList.remove('error');
            });

            let isValid = true;

            // Validate Name
            const nameInput = document.getElementById('booking-name');
            if (!nameInput.value.trim()) {
                nameInput.closest('.booking-form-group').classList.add('error');
                isValid = false;
            }

            // Validate Mobile Number
            const mobileInput = document.getElementById('booking-mobile');
            const mobilePattern = /^[0-9]{10}$/;
            if (!mobilePattern.test(mobileInput.value.trim())) {
                mobileInput.closest('.booking-form-group').classList.add('error');
                isValid = false;
            }

            // Validate Email (if provided)
            const emailInput = document.getElementById('booking-email');
            if (emailInput.value.trim()) {
                const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailPattern.test(emailInput.value.trim())) {
                    emailInput.closest('.booking-form-group').classList.add('error');
                    isValid = false;
                }
            }

            // Validate Service
            const serviceInput = document.getElementById('booking-service');
            if (!serviceInput.value) {
                serviceInput.closest('.booking-form-group').classList.add('error');
                isValid = false;
            }

            // Validate Date
            const dateInput = document.getElementById('booking-date');
            if (!dateInput.value) {
                dateInput.closest('.booking-form-group').classList.add('error');
                isValid = false;
            } else {
                // Check if date is today or in the future
                const selectedDate = new Date(dateInput.value);
                selectedDate.setHours(0, 0, 0, 0);
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                
                if (selectedDate < today) {
                    dateInput.closest('.booking-form-group').classList.add('error');
                    isValid = false;
                    alert('Please select today or a future date only');
                }
            }

            if (!isValid) {
                return;
            }

            // Collect form data
            const formData = {
                name: nameInput.value.trim(),
                phone: mobileInput.value.trim(),
                email: emailInput.value.trim() || null,
                service: serviceInput.value,
                booking_date: dateInput.value,
                message: document.getElementById('booking-message').value.trim() || null
            };

            console.log('üì§ Submitting booking:', formData);

            // Show loading state
            const submitBtn = document.querySelector('.booking-btn-primary');
            const originalBtnText = submitBtn.innerHTML;
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';

            // Submit booking to API
            fetch('/api/bookings', {
                method: 'POST',
                headers: { 
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => {
                if (!response.ok) {
                    return response.json().then(err => {
                        throw new Error(err.error || 'Failed to submit booking');
                    });
                }
                return response.json();
            })
            .then(data => {
                console.log('‚úÖ Booking submitted successfully:', data);
                showSuccessMessage();
            })
            .catch(error => {
                console.error('‚ùå Booking error:', error);
                alert('Failed to submit booking: ' + error.message + '. Please try again or contact us directly.');
            })
            .finally(() => {
                // Restore button state
                submitBtn.disabled = false;
                submitBtn.innerHTML = originalBtnText;
            });
        });

        // Show success message
        function showSuccessMessage() {
            document.getElementById('bookingForm').style.display = 'none';
            document.getElementById('bookingSuccess').classList.add('active');
        }

        // Reset form
        function resetBookingForm() {
            document.getElementById('bookingForm').reset();
            document.getElementById('bookingForm').style.display = 'block';
            document.getElementById('bookingSuccess').classList.remove('active');
            
            // Clear all errors
            document.querySelectorAll('.booking-form-group').forEach(function(group) {
                group.classList.remove('error');
            });
        }
    </script>

</body>
</html>
